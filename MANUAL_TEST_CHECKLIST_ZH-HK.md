# PetSOS 手動測試清單

## 📱 **WhatsApp 功能測試**

### 測試 1：WhatsApp 緊急廣播
**目標：** 驗證緊急廣播能透過 WhatsApp 發送到多間診所

**前置條件：**
- 帳戶內至少有一隻已註冊的寵物
- 資料庫中有多間診所並提供 WhatsApp 號碼

**步驟：**
1. ✅ 登入 PetSOS
2. ✅ 前往緊急求助頁面 (/emergency)
3. ✅ 從寵物清單中選擇一隻寵物
4. ✅ 輸入緊急症狀（例如：「狗狗呼吸困難」）
5. ✅ 點擊「尋找附近診所」或進入下一步
6. ✅ 查看診所清單（應顯示有 WhatsApp 聯絡方式的診所）
7. ✅ 點擊「廣播至所有診所」或「發送緊急警報」
8. ✅ 等待確認訊息

**預期結果：**
- ✅ 出現成功訊息：「緊急廣播已發送至 X 間診所」
- ✅ 提示通知顯示已聯絡的診所數量
- ✅ 可以前往廣播狀態頁面
- ✅ 瀏覽器控制台沒有錯誤訊息
- ✅ 診所 WhatsApp 號碼收到訊息

**檢查訊息內容：**
- ✅ 包含寵物名稱、品種、種類
- ✅ 包含症狀描述
- ✅ 包含主人聯絡資訊
- ✅ 包含緊急事件時間戳記
- ✅ 訊息清晰且專業

---

### 測試 2：個別診所 WhatsApp 聯絡
**目標：** 驗證可以直接透過 WhatsApp 聯絡個別診所

**步驟：**
1. ✅ 前往診所頁面 (/clinics)
2. ✅ 尋找有列出 WhatsApp 號碼的診所
3. ✅ 尋找診所旁邊的 WhatsApp 圖示/按鈕
4. ✅ 點擊 WhatsApp 聯絡按鈕

**預期結果：**
- ✅ WhatsApp 在新分頁/視窗中開啟（web.whatsapp.com 或 WhatsApp 應用程式）
- ✅ 診所電話號碼已預先填入
- ✅ 電話號碼格式正確（香港為 +852XXXXXXXX）
- ✅ 可以直接向診所發送訊息

---

### 測試 3：訊息傳送狀態追蹤
**目標：** 驗證可以追蹤廣播訊息狀態

**步驟：**
1. ✅ 發送緊急廣播後，前往狀態頁面
2. ✅ 檢查每間診所的訊息傳送狀態
3. ✅ 查看狀態指示器（已發送、已送達、失敗）

**預期結果：**
- ✅ 每間診所顯示訊息狀態
- ✅ WhatsApp 訊息成功時顯示「已發送」狀態
- ✅ WhatsApp 不可用時顯示「失敗」狀態及錯誤訊息
- ✅ WhatsApp 不可用時標示使用電郵備用方案
- ✅ 顯示每條訊息的時間戳記
- ✅ 可以查看哪些診所成功接收、哪些失敗

---

### 測試 4：WhatsApp 錯誤處理
**目標：** 測試 WhatsApp 失敗時的系統行為

**步驟：**
1. ✅ 嘗試廣播到沒有 WhatsApp 號碼的診所
2. ✅ 檢查系統是否改用電郵
3. ✅ 驗證錯誤訊息對使用者友善

**預期結果：**
- ✅ 系統自動使用電郵備用方案
- ✅ 通知使用者哪些診所透過電郵接收、哪些透過 WhatsApp
- ✅ 沒有當機或空白錯誤畫面
- ✅ 訊息記錄在資料庫中並顯示正確狀態

---

## 🔐 **身份驗證測試**

### 測試 5：用戶註冊和登入
**目標：** 驗證所有身份驗證方式都能正常運作

**Google OAuth：**
1. ✅ 點擊「登入 / 註冊」
2. ✅ 點擊「使用 Google 繼續」
3. ✅ 選擇 Google 帳戶
4. ✅ 重新導向至個人檔案頁面
5. ✅ 使用者名稱和電郵正確顯示

**電郵/密碼註冊：**
1. ✅ 點擊「使用電郵註冊」
2. ✅ 輸入名稱、電郵、密碼
3. ✅ 點擊「建立帳戶」
4. ✅ 重新導向至個人檔案頁面
5. ✅ 可以登出並重新登入

**電郵/密碼登入：**
1. ✅ 點擊「使用電郵登入」
2. ✅ 輸入已註冊的電郵和密碼
3. ✅ 點擊「登入」
4. ✅ 成功登入

**電話/密碼註冊：**
1. ✅ 點擊「使用電話註冊」
2. ✅ 選擇國家代碼（香港為 +852）
3. ✅ 輸入電話號碼
4. ✅ 輸入名稱和密碼
5. ✅ 成功建立帳戶

**電話/密碼登入：**
1. ✅ 點擊「使用電話登入」
2. ✅ 選擇國家代碼
3. ✅ 輸入電話號碼和密碼
4. ✅ 成功登入

---

## 🐾 **寵物管理測試**

### 測試 6：新增寵物
**目標：** 驗證建立寵物資料功能正常運作

**步驟：**
1. ✅ 前往寵物頁面 (/pets)
2. ✅ 點擊「新增寵物」
3. ✅ 填寫寵物資料：
   - 名稱：任何名稱
   - 品種：狗/貓
   - 種類：從下拉選單選擇（雙語品種）
   - 年齡：任何數字
   - 體重：任何數字
   - 性別：公/母
   - 醫療備註：選填
4. ✅ 點擊「儲存」或「新增寵物」

**預期結果：**
- ✅ 寵物立即出現在寵物清單中
- ✅ 所有資料正確儲存
- ✅ 品種以正確語言顯示（英文/繁體中文）
- ✅ 可以查看寵物詳情
- ✅ 顯示成功訊息

---

### 測試 7：編輯寵物資訊
**目標：** 驗證寵物更新功能正常運作

**步驟：**
1. ✅ 在現有寵物上點擊「編輯」
2. ✅ 更改名稱、年齡、體重或醫療備註
3. ✅ 點擊「儲存變更」

**預期結果：**
- ✅ 變更成功儲存
- ✅ 更新的資訊顯示在寵物清單中
- ✅ 顯示成功訊息

---

### 測試 8：刪除寵物
**目標：** 驗證寵物刪除功能正常運作

**步驟：**
1. ✅ 在寵物上點擊「刪除」
2. ✅ 在對話框中確認刪除
3. ✅ 檢查寵物清單

**預期結果：**
- ✅ 寵物從清單中移除
- ✅ 刪除前顯示確認對話框
- ✅ 顯示成功訊息
- ✅ 緊急求助中無法使用已刪除的寵物

---

## 🚨 **緊急求助流程測試**

### 測試 9：完整緊急求助流程
**目標：** 測試從開始到結束的整個緊急流程

**步驟：**
1. ✅ 前往緊急求助頁面
2. ✅ 從下拉選單選擇寵物
3. ✅ 清楚輸入症狀
4. ✅ （選填）錄製語音描述
5. ✅ 點擊「尋找附近診所」
6. ✅ 查看診所清單（如啟用 GPS 則按距離排序）
7. ✅ 點擊「廣播至所有診所」或選擇特定診所
8. ✅ 確認廣播
9. ✅ 查看廣播狀態

**預期結果：**
- ✅ 所有步驟順利完成
- ✅ 寵物選擇功能正常
- ✅ 症狀正確儲存
- ✅ 診所清單僅顯示 24 小時診所（預設）
- ✅ 廣播成功發送
- ✅ 可以追蹤訊息傳送狀態

---

### 測試 10：語音錄製（AI 分析）
**目標：** 測試語音症狀錄製和 AI 分析

**步驟：**
1. ✅ 在緊急求助頁面，點擊語音錄製按鈕
2. ✅ 允許麥克風存取
3. ✅ 清楚說出症狀（例如：「我的狗狗嘔吐和腹瀉」）
4. ✅ 停止錄製
5. ✅ 等待 AI 分析

**預期結果：**
- ✅ 錄製功能正常（顯示錄製指示器）
- ✅ 音訊成功捕獲
- ✅ AI 分析返回結構化症狀
- ✅ 症狀自動填入文字欄位
- ✅ 可以編輯 AI 生成的症狀（如需要）

---

### 測試 11：未登入的緊急存取
**目標：** 驗證未註冊使用者可以存取緊急功能

**步驟：**
1. ✅ 登出（如已登入）
2. ✅ 前往 /emergency
3. ✅ 嘗試建立緊急求助
4. ✅ 輸入症狀
5. ✅ 繼續尋找診所

**預期結果：**
- ✅ 無需登入即可存取緊急頁面
- ✅ 可以輸入症狀
- ✅ 可以查看診所清單
- ✅ 可能有限制的廣播功能（或提示註冊）

---

## 🏥 **診所目錄測試**

### 測試 12：瀏覽診所
**目標：** 驗證診所目錄正確顯示

**步驟：**
1. ✅ 前往 /clinics
2. ✅ 滾動瀏覽診所清單
3. ✅ 檢查顯示的診所資訊

**預期結果：**
- ✅ 診所成功載入
- ✅ 每間診所顯示：名稱、地址、電話、WhatsApp、電郵
- ✅ 24 小時診所顯示徽章
- ✅ 顯示 GPS 距離（如啟用位置）
- ✅ 地圖連結正常運作

---

### 測試 13：診所搜尋和篩選
**目標：** 驗證搜尋和篩選功能正常運作

**步驟：**
1. ✅ 使用搜尋框搜尋診所名稱
2. ✅ 切換「僅 24 小時」篩選器
3. ✅ 檢查 GPS 位置切換是否正常運作

**預期結果：**
- ✅ 搜尋按名稱篩選診所
- ✅ 24 小時篩選器僅顯示 24 小時診所
- ✅ 24 小時篩選器預設為開啟
- ✅ GPS 切換顯示/隱藏距離
- ✅ 啟用 GPS 時診所按距離排序

---

### 測試 14：GPS 位置功能
**目標：** 測試 GPS 距離追蹤

**步驟：**
1. ✅ 前往 /clinics
2. ✅ 出現提示時允許位置存取
3. ✅ 檢查 GPS 狀態橫幅

**預期結果：**
- ✅ 瀏覽器提示位置權限
- ✅ 獲得位置時顯示成功橫幅
- ✅ 診所顯示距離（例如「2.3 公里」）
- ✅ 診所按最近排序
- ✅ 拒絕或失敗位置時顯示錯誤橫幅
- ✅ 拒絕位置仍可使用應用程式

---

### 測試 15：診所聯絡方式
**目標：** 驗證所有聯絡方式正常運作

**步驟：**
1. ✅ 點擊診所的「致電」按鈕
2. ✅ 點擊診所的「WhatsApp」按鈕
3. ✅ 點擊「電郵」連結（如有）
4. ✅ 點擊「在地圖上查看」或地圖圖示

**預期結果：**
- ✅ 致電按鈕開啟電話撥號器（tel: 連結）
- ✅ WhatsApp 按鈕開啟 WhatsApp 並帶入診所號碼
- ✅ 電郵開啟預設電郵客戶端
- ✅ 地圖連結開啟 Google 地圖並顯示診所位置

---

## 🌐 **國際化 (i18n) 測試**

### 測試 16：語言切換
**目標：** 驗證雙語支援正常運作

**步驟：**
1. ✅ 點擊語言切換器（右上角地球圖示）
2. ✅ 切換至繁體中文
3. ✅ 瀏覽不同頁面
4. ✅ 切換回英文
5. ✅ 再次檢查所有頁面

**預期結果：**
- ✅ 語言立即切換
- ✅ 所有 UI 文字正確翻譯
- ✅ 按鈕標籤使用正確語言
- ✅ 表單標籤和佔位符已翻譯
- ✅ 錯誤訊息使用正確語言
- ✅ 寵物品種顯示正確中文名稱（例如「唐狗」表示混種）
- ✅ 緊急流程使用「毛孩」而非「寵物」
- ✅ 語言偏好在頁面導覽間保持

---

## 👨‍💼 **管理員儀表板測試**

### 測試 17：管理員登入和存取
**目標：** 驗證管理員功能可以存取

**步驟：**
1. ✅ 使用管理員帳戶登入（ansonlabfornone@gmail.com）
2. ✅ 前往管理員儀表板
3. ✅ 檢查管理員選單選項

**預期結果：**
- ✅ 管理員可以存取 /admin 路由
- ✅ 一般使用者無法存取管理員頁面
- ✅ 管理員選單顯示所有管理員功能

---

### 測試 18：診所管理（管理員）
**目標：** 測試診所的 CRUD 操作

**新增診所：**
1. ✅ 點擊「新增診所」
2. ✅ 填寫所有診所詳情
3. ✅ 使用 GPS 自動填入座標
4. ✅ 儲存診所

**編輯診所：**
1. ✅ 在現有診所上點擊「編輯」
2. ✅ 修改詳情
3. ✅ 儲存變更

**刪除診所：**
1. ✅ 在診所上點擊「刪除」
2. ✅ 確認刪除
3. ✅ 驗證移除

**預期結果：**
- ✅ 所有 CRUD 操作正常運作
- ✅ 地址的 GPS 自動填入功能正常
- ✅ 驗證阻止無效資料
- ✅ 變更立即反映

---

### 測試 19：多區域配置（管理員）
**目標：** 測試國家、地區和品種管理

**步驟：**
1. ✅ 前往管理員配置頁面
2. ✅ 新增/編輯國家
3. ✅ 新增/編輯地區
4. ✅ 新增/編輯寵物品種
5. ✅ 測試雙語翻譯

**預期結果：**
- ✅ 可以建立帶有電話代碼、旗幟的國家
- ✅ 可以建立連結至國家的地區
- ✅ 可以建立品種（狗/貓專用）
- ✅ 翻譯正常運作（英文/繁體中文）
- ✅ 變更立即出現在下拉選單中

---

## 🏪 **診所職員儀表板測試**

### 測試 20：診所職員存取
**目標：** 驗證診所職員功能

**步驟：**
1. ✅ 以診所職員使用者身份登入
2. ✅ 前往診所儀表板
3. ✅ 檢查可用功能

**預期結果：**
- ✅ 職員僅能存取自己診所的儀表板
- ✅ 無法存取其他診所的資料
- ✅ 可以查看發送至其診所的緊急求助

---

### 測試 21：診所可用性切換
**目標：** 測試 24 小時可用性切換

**步驟：**
1. ✅ 在診所儀表板上，尋找可用性切換
2. ✅ 將「24 小時服務」切換為開啟
3. ✅ 切換為關閉
4. ✅ 檢查是否反映在公開診所目錄中

**預期結果：**
- ✅ 切換立即生效
- ✅ 變更儲存至資料庫
- ✅ 診所出現/消失於 24 小時篩選器中
- ✅ 診所列表上的徽章更新

---

## 🔒 **安全和隱私測試**

### 測試 22：資料隱私合規
**目標：** 驗證 GDPR/PDPO 合規功能

**步驟：**
1. ✅ 前往隱私政策頁面
2. ✅ 檢查 Cookie 同意橫幅
3. ✅ 接受/拒絕 Cookie
4. ✅ 檢查服務條款頁面

**預期結果：**
- ✅ 隱私政策頁面載入且可閱讀
- ✅ 首次造訪時出現 Cookie 同意
- ✅ 選擇保持（接受/拒絕）
- ✅ Google Analytics 尊重同意
- ✅ 可存取服務條款

---

### 測試 23：資料匯出和刪除
**目標：** 測試使用者資料權利

**步驟：**
1. ✅ 前往個人檔案頁面
2. ✅ 尋找「匯出我的資料」選項
3. ✅ 點擊並下載資料匯出
4. ✅ 尋找「刪除我的帳戶」選項
5. ✅ 測試帳戶刪除流程

**預期結果：**
- ✅ 資料匯出生成 JSON/CSV 檔案
- ✅ 匯出包含所有使用者資料
- ✅ 刪除需要確認
- ✅ 帳戶和資料完全刪除
- ✅ 刪除後無法登入

---

## 📱 **手機響應式測試**

### 測試 24：手機版面
**目標：** 驗證應用程式在手機裝置上正常運作

**步驟：**
1. ✅ 在手機上開啟 petsos.site（或使用瀏覽器開發者工具的手機檢視）
2. ✅ 瀏覽所有頁面
3. ✅ 測試所有功能

**預期結果：**
- ✅ 登陸頁面在手機上正確顯示
- ✅ 按鈕可點擊（不會太小）
- ✅ 表單在手機上正常運作
- ✅ 沒有水平滾動
- ✅ 導覽選單正常運作
- ✅ 緊急流程在手機上正常運作
- ✅ WhatsApp 按鈕在手機上正常運作

---

## 🌐 **SEO 和品牌測試**

### 測試 25：SEO 中繼標籤
**目標：** 驗證 SEO 優化

**步驟：**
1. ✅ 開啟 petsos.site
2. ✅ 檢視頁面原始碼（右鍵點擊 → 檢視頁面原始碼）
3. ✅ 檢查中繼標籤
4. ✅ 前往不同頁面並重複

**預期結果：**
- ✅ 每個頁面都有獨特的標題標籤
- ✅ 存在中繼描述且相關
- ✅ Open Graph 標籤（og:title、og:description、og:url、og:image）
- ✅ Twitter Card 標籤
- ✅ 主題顏色：#EF4444
- ✅ 香港的地理標籤

---

### 測試 26：網站圖示和品牌
**目標：** 驗證視覺品牌

**步驟：**
1. ✅ 檢查瀏覽器分頁圖示
2. ✅ 檢查手機主畫面圖示
3. ✅ 檢查整個網站的品牌顏色

**預期結果：**
- ✅ 可見自訂網站圖示（紅色緊急十字 + 爪印）
- ✅ 不是通用預設圖示
- ✅ 紅色主題（#EF4444）在各頁面保持一致
- ✅ PetSOS 品牌清晰且專業

---

## 🐛 **錯誤處理測試**

### 測試 27：網路錯誤
**目標：** 測試網路失敗時的行為

**步驟：**
1. ✅ 中斷網路連線
2. ✅ 嘗試提交緊急求助
3. ✅ 重新連線並重試

**預期結果：**
- ✅ 顯示使用者友善的錯誤訊息
- ✅ 沒有空白畫面或當機
- ✅ 提供重試選項

---

### 測試 28：無效輸入處理
**目標：** 測試表單驗證

**步驟：**
1. ✅ 嘗試提交必填欄位為空的表單
2. ✅ 輸入無效的電郵格式
3. ✅ 輸入無效的電話號碼
4. ✅ 輸入負數年齡/體重

**預期結果：**
- ✅ 清楚顯示驗證錯誤
- ✅ 欄位以紅色標示
- ✅ 有用的錯誤訊息
- ✅ 無法提交無效資料

---

### 測試 29：404 錯誤頁面
**目標：** 測試不存在的路由

**步驟：**
1. ✅ 前往 https://petsos.site/nonexistent-page
2. ✅ 檢查顯示內容

**預期結果：**
- ✅ 顯示自訂 404 頁面
- ✅ 導覽仍正常運作
- ✅ 可以返回首頁

---

## 📊 **分析和監控測試**

### 測試 30：Google Analytics
**目標：** 驗證追蹤功能正常運作

**步驟：**
1. ✅ 在登陸頁面接受 Cookie
2. ✅ 瀏覽多個頁面
3. ✅ 觸發緊急求助
4. ✅ 檢查 Google Analytics 儀表板（如有存取權限）

**預期結果：**
- ✅ 追蹤頁面瀏覽
- ✅ 追蹤事件（緊急求助、廣播等）
- ✅ 拒絕 Cookie 時不追蹤
- ✅ 尊重使用者隱私

---

## ✅ **最終整合測試**

### 測試 31：完整使用者旅程
**目標：** 測試真實的端對端情境

**步驟：**
1. ✅ 新使用者造訪 petsos.site
2. ✅ 閱讀登陸頁面，切換語言
3. ✅ 註冊帳戶（Google/電郵/電話）
4. ✅ 新增 2 隻寵物至個人檔案
5. ✅ 編輯其中一隻寵物的詳情
6. ✅ 為第一隻寵物建立緊急求助
7. ✅ 錄製語音症狀（如有）
8. ✅ 查看 AI 的症狀分析
9. ✅ 尋找附近診所
10. ✅ 廣播緊急事件至所有診所
11. ✅ 檢查廣播狀態
12. ✅ 透過 WhatsApp 聯絡個別診所
13. ✅ 登出
14. ✅ 重新登入
15. ✅ 所有資料保持

**預期結果：**
- ✅ 整個流程順暢運作
- ✅ 沒有錯誤或當機
- ✅ 資料在工作階段間保持
- ✅ 所有功能如預期運作
- ✅ WhatsApp 訊息成功發送
- ✅ 專業、精緻的體驗

---

## 🔧 **效能測試**

### 測試 32：載入時間
**目標：** 確保頁面快速載入

**預期結果：**
- ✅ 登陸頁面在 3 秒內載入
- ✅ 診所清單在 5 秒內載入
- ✅ 沒有長時間的載入轉圈
- ✅ 圖片正確載入

---

### 測試 33：資料庫效能
**目標：** 使用真實資料量測試

**預期結果：**
- ✅ 診所搜尋在 191 間診所下正常運作
- ✅ 滾動診所清單時沒有延遲
- ✅ GPS 距離計算快速
- ✅ 廣播至 50+ 間診所快速完成

---

## 📝 **測試清單總結**

### 關鍵功能（必須正常運作）：
- [ ] WhatsApp 緊急廣播
- [ ] 使用者身份驗證（所有方式）
- [ ] 寵物管理（新增/編輯/刪除）
- [ ] 緊急求助流程
- [ ] 帶 GPS 的診所目錄
- [ ] 語言切換（英文/繁體中文）

### 重要功能（應該正常運作）：
- [ ] 語音錄製和 AI 分析
- [ ] 個別診所 WhatsApp 聯絡
- [ ] 24 小時篩選器（預設開啟）
- [ ] 管理員儀表板
- [ ] 診所職員儀表板
- [ ] SEO 中繼標籤
- [ ] 自訂網站圖示

### 附加功能：
- [ ] Cookie 同意
- [ ] 資料匯出
- [ ] Google Analytics
- [ ] 手機響應式
- [ ] 錯誤處理

---

## 🎯 **錯誤嚴重性分類**

**嚴重（P0）- 立即修復：**
- 應用程式當機或無法載入
- 完全無法登入
- WhatsApp 廣播完全損壞
- 資料庫錯誤阻止核心功能
- 安全性漏洞

**高（P1）- 24 小時內修復：**
- WhatsApp 對某些診所失敗
- GPS 位置無法運作
- 寵物建立/編輯損壞
- 無法提交緊急求助
- 無法存取管理員功能

**中（P2）- 一週內修復：**
- 語言切換問題
- UI 版面問題
- 搜尋/篩選無法運作
- 輕微資料顯示問題
- 分析未追蹤

**低（P3）- 有空時修復：**
- 文字錯字
- 輕微樣式不一致
- 非關鍵功能增強
- 效能優化

---

## 📞 **WhatsApp 專用除錯清單**

如果 WhatsApp 無法運作，檢查：

1. **憑證：**
   - [ ] WHATSAPP_ACCESS_TOKEN 存在且有效
   - [ ] WHATSAPP_PHONE_NUMBER_ID 存在且正確
   - [ ] Token 尚未過期

2. **電話號碼：**
   - [ ] 診所 WhatsApp 號碼格式正確（+852XXXXXXXX）
   - [ ] 除了 + 號外，沒有空格或特殊字元
   - [ ] 號碼已通過 Meta 驗證

3. **API 狀態：**
   - [ ] 檢查 Meta Business Suite 的 API 狀態
   - [ ] 檢查未超過速率限制
   - [ ] 檢查訊息範本已批准（如使用範本）

4. **控制台日誌：**
   - [ ] 檢查瀏覽器控制台是否有錯誤
   - [ ] 檢查伺服器日誌的 WhatsApp API 回應
   - [ ] 尋找 401/403 錯誤（認證問題）
   - [ ] 尋找 400 錯誤（無效電話號碼）

5. **測試模式：**
   - [ ] 生產環境中 TESTING_MODE 為 false
   - [ ] 測試模式中測試號碼收到訊息

---

## 🎉 **測試完成！**

完成此清單後，您應該有信心：
- ✅ WhatsApp 整合端對端運作
- ✅ 所有關鍵功能正常運作
- ✅ 使用者體驗流暢且專業
- ✅ 應用程式已準備好用於生產環境

**記住：** 在桌面和手機上測試，並且同時測試英文和繁體中文！
