import{c as q,h as b,j as e,_ as h,B as j,C as r,b as l,d as w,a0 as z,q as k,t as v,v as D}from"./index-DwyYRZ5p.js";import{S as n}from"./skeleton-CM7Qf3A_.js";import{t as L,c as _,s as C,f as F}from"./format-C75rDloS.js";import{A as K}from"./arrow-left-yEGhOFsb.js";import{A as g}from"./activity-Dm1SiUzR.js";import{B as p}from"./building-2-BwwPf-yj.js";import{S as G}from"./settings-BbERS9pR.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function O(s,d){const a=L(s);return isNaN(d)?_(s,NaN):(d&&a.setDate(a.getDate()+d),a)}function A(s){const d=L(s);return d.setHours(23,59,59,999),d}function N(s,d){return O(s,-d)}function W(){const{data:s,isLoading:d}=b({queryKey:["/api/emergency-requests"]});b({queryKey:["/api/users"],enabled:!1});const{data:a,isLoading:H}=b({queryKey:["/api/clinics"]}),o=new Date,T=N(o,7),B=N(o,30),c={totalRequests:(s==null?void 0:s.length)??0,requestsLast7Days:(s==null?void 0:s.filter(t=>new Date(t.createdAt)>=T).length)??0,requestsLast30Days:(s==null?void 0:s.filter(t=>new Date(t.createdAt)>=B).length)??0,requestsToday:(s==null?void 0:s.filter(t=>{const x=new Date(t.createdAt);return x>=C(o)&&x<=A(o)}).length)??0,totalClinics:(a==null?void 0:a.length)??0,activeClinics:(a==null?void 0:a.filter(t=>t.isAvailable).length)??0,supportHospitals:(a==null?void 0:a.filter(t=>t.isSupportHospital).length)??0,twentyFourHourClinics:(a==null?void 0:a.filter(t=>t.is24Hour).length)??0,averageResponseTime:"N/A",peakHour:"N/A"},f=Array.from({length:7},(t,x)=>{const u=N(o,6-x),M=(s==null?void 0:s.filter(S=>{const y=new Date(S.createdAt);return y>=C(u)&&y<=A(u)}).length)??0;return{date:F(u,"MMM d"),count:M}}),m={pending:(s==null?void 0:s.filter(t=>t.status==="pending").length)??0,broadcasting:(s==null?void 0:s.filter(t=>t.status==="broadcasting").length)??0,completed:(s==null?void 0:s.filter(t=>t.status==="completed").length)??0,cancelled:(s==null?void 0:s.filter(t=>t.status==="cancelled").length)??0},i=d||H;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",children:[e.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{href:"/admin",children:e.jsx(j,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(K,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin: Analytics"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monitor platform usage and performance"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{href:"/admin",children:e.jsxs(j,{variant:"outline",size:"sm","data-testid":"button-admin-dashboard",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Dashboard"]})}),e.jsx(h,{href:"/admin/clinics",children:e.jsxs(j,{variant:"outline",size:"sm","data-testid":"button-admin-clinics",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Clinics"]})}),e.jsx(h,{href:"/admin/config",children:e.jsxs(j,{variant:"outline",size:"sm","data-testid":"button-admin-config",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Config"]})})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Key Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Requests Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white","data-testid":"text-requests-today",children:i?e.jsx(n,{className:"h-8 w-12"}):c.requestsToday})]}),e.jsx(w,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 7 Days"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-8 w-12"}):c.requestsLast7Days})]}),e.jsx(I,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 30 Days"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-8 w-12"}):c.requestsLast30Days})]}),e.jsx(g,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Requests"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white","data-testid":"text-total-requests",children:i?e.jsx(n,{className:"h-8 w-12"}):c.totalRequests})]}),e.jsx(w,{className:"h-8 w-8 text-red-600 dark:text-red-400"})]})})})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Clinic Network"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Clinics"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-7 w-12"}):c.totalClinics})]}),e.jsx(p,{className:"h-7 w-7 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Now"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-7 w-12"}):c.activeClinics})]}),e.jsx(g,{className:"h-7 w-7 text-green-600 dark:text-green-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"24-Hour"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-7 w-12"}):c.twentyFourHourClinics})]}),e.jsx(z,{className:"h-7 w-7 text-purple-600 dark:text-purple-400"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Support Hospitals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?e.jsx(n,{className:"h-7 w-12"}):c.supportHospitals})]}),e.jsx(p,{className:"h-7 w-7 text-yellow-600 dark:text-yellow-400"})]})})})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:e.jsxs(r,{children:[e.jsxs(k,{children:[e.jsx(v,{children:"Request Trend (Last 7 Days)"}),e.jsx(D,{children:"Daily emergency request volume"})]}),e.jsx(l,{children:i?e.jsx(n,{className:"h-64 w-full"}):e.jsx("div",{className:"space-y-3",children:f.map(t=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 w-16",children:t.date}),e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-8 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-full flex items-center justify-end pr-2 text-white text-sm font-medium transition-all",style:{width:`${Math.max(t.count/Math.max(...f.map(x=>x.count),1)*100,3)}%`},children:t.count>0&&t.count})})]},t.date))})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(r,{children:[e.jsxs(k,{children:[e.jsx(v,{children:"Request Status Breakdown"}),e.jsx(D,{children:"Current distribution of emergency request statuses"})]}),e.jsx(l,{children:i?e.jsx(n,{className:"h-48 w-full"}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mb-1",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-900 dark:text-yellow-200",children:m.pending})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-1",children:"Broadcasting"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200",children:m.broadcasting})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-200",children:m.completed})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-400 mb-1",children:"Cancelled"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-200",children:m.cancelled})]})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mt-8",children:e.jsx(r,{className:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Google Analytics 4 Integration"}),e.jsxs("p",{children:["GA4 is configured and tracking events in real-time. For detailed analytics including page views, user behavior, and conversion metrics, visit the"," ",e.jsx("a",{href:"https://analytics.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"Google Analytics dashboard"}),"."]})]})]})})})})]})]})}export{W as default};
