import{c as ge,r as o,a as je,h as B,j as e,U as P,B as r,C as g,b as j,I as p,E as z,G as I,H as U,J as H,K as n,q as ue,t as pe,X as K,Y as $,_ as Q,$ as V,a0 as W,V as u,a1 as _,Q as R,O as G}from"./index-Dv-87GdI.js";import{u as J}from"./useMutation-DhbY-5L1.js";import{T as fe,a as be,b as X,c as l,d as ve,e as d}from"./table-DMjnPR7m.js";import{B as f}from"./badge-95hAwcnP.js";import{S as Ne}from"./skeleton-BMaZuR9w.js";import{T as ye}from"./textarea-CXxlry72.js";import{A as we}from"./arrow-left-BiOU8dRi.js";import{R as ke}from"./refresh-cw-BE3VGX5S.js";import{U as Ce}from"./users-DtJmq_Pu.js";import{B as Pe}from"./building-2-CsNomjhz.js";import{S as Se}from"./settings-DTODbNjx.js";import{P as O}from"./paw-print-DGN0yKnL.js";import{A as De}from"./activity-CcCRm6d4.js";import{S as Te}from"./search-BPoAccfe.js";import{C as Y}from"./calendar-CkFmbf76.js";import{S as Ae}from"./square-pen-3cMkxRSJ.js";import{T as Le}from"./trash-2-DER-1qtk.js";import{f as Ee}from"./format-CoLFXwEe.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ge("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);function Ye(){const[S,Z]=o.useState(""),[D,ee]=o.useState("all"),[x,b]=o.useState(1),[se,v]=o.useState(!1),[ae,N]=o.useState(!1),[y,w]=o.useState(null),[i,c]=o.useState({name:"",species:"",breed:"",age:0,weight:"",medicalNotes:""}),T=20,{toast:k}=je(),{data:t,isLoading:te}=B({queryKey:["/api/admin/pets"]}),{data:A}=B({queryKey:["/api/admin/users"]}),{data:L}=B({queryKey:["/api/clinics"]}),C={total:(t==null?void 0:t.length)??0,dogs:((t==null?void 0:t.filter(s=>s.species.toLowerCase()==="dog"))??[]).length,cats:((t==null?void 0:t.filter(s=>s.species.toLowerCase()==="cat"))??[]).length,others:((t==null?void 0:t.filter(s=>!["dog","cat"].includes(s.species.toLowerCase())))??[]).length},E=(t==null?void 0:t.filter(s=>{var a;if(S){const m=S.toLowerCase(),he=s.name.toLowerCase().includes(m),me=(a=s.breed)==null?void 0:a.toLowerCase().includes(m);if(!he&&!me)return!1}return!(D!=="all"&&s.species.toLowerCase()!==D.toLowerCase())}))??[],h=Math.ceil(E.length/T),q=E.slice((x-1)*T,x*T),ie=()=>{R.invalidateQueries({queryKey:["/api/admin/pets"]})},re=s=>{w(s),c({name:s.name,species:s.species,breed:s.breed||"",age:s.age||0,weight:s.weight||"",medicalNotes:s.medicalNotes||""}),v(!0)},ne=s=>{w(s),N(!0)},F=J({mutationFn:({petId:s,data:a})=>G("PATCH",`/api/pets/${s}`,a),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/pets"]}),v(!1),w(null),k({title:"Pet updated successfully"})},onError:s=>{k({title:"Error updating pet",description:s.message||"An error occurred",variant:"destructive"})}}),M=J({mutationFn:s=>G("DELETE",`/api/pets/${s}`),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/admin/pets"]}),N(!1),w(null),k({title:"Pet deleted successfully"})},onError:s=>{k({title:"Error deleting pet",description:s.message||"An error occurred",variant:"destructive"})}}),le=()=>{y&&F.mutate({petId:y.id,data:{...i,age:i.age||null}})},de=()=>{y&&M.mutate(y.id)},ce=s=>{const a=A==null?void 0:A.find(m=>m.id===s);return(a==null?void 0:a.name)||(a==null?void 0:a.email)||"Unknown"},oe=s=>{if(!s)return"N/A";const a=L==null?void 0:L.find(m=>m.id===s);return a?a.name:s},xe=s=>{const a=s.toLowerCase();return a==="dog"?e.jsx(f,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"ðŸ• Dog"}):a==="cat"?e.jsx(f,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ðŸ± Cat"}):a==="bird"?e.jsx(f,{variant:"secondary",className:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",children:"ðŸ¦ Bird"}):a==="rabbit"?e.jsx(f,{variant:"secondary",className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",children:"ðŸ° Rabbit"}):e.jsx(f,{variant:"outline",children:s})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",children:[e.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{href:"/admin",children:e.jsx(r,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(we,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Pet Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage pet profiles and medical information"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:ie,variant:"outline",size:"sm","data-testid":"button-refresh",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsx(P,{href:"/admin/users",children:e.jsxs(r,{variant:"outline",size:"sm","data-testid":"button-admin-users",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Users"]})}),e.jsx(P,{href:"/admin/clinics",children:e.jsxs(r,{variant:"outline",size:"sm","data-testid":"button-admin-clinics",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Clinics"]})}),e.jsx(P,{href:"/admin/config",children:e.jsxs(r,{variant:"outline",size:"sm","data-testid":"button-admin-config",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Config"]})})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(O,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-total-pets",children:C.total})]})]})})}),e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸ•"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dogs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.dogs})]})]})})}),e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸ±"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cats"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.cats})]})]})})}),e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(De,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Other Pets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.others})]})]})})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(p,{placeholder:"Search by pet name or breed...",value:S,onChange:s=>{Z(s.target.value),b(1)},className:"pl-10","data-testid":"input-search"})]}),e.jsxs(z,{value:D,onValueChange:s=>{ee(s),b(1)},children:[e.jsx(I,{"data-testid":"select-species-filter",children:e.jsx(U,{placeholder:"Filter by species"})}),e.jsxs(H,{children:[e.jsx(n,{value:"all",children:"All Species"}),e.jsx(n,{value:"dog",children:"Dogs"}),e.jsx(n,{value:"cat",children:"Cats"}),e.jsx(n,{value:"bird",children:"Birds"}),e.jsx(n,{value:"rabbit",children:"Rabbits"})]})]})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(g,{children:[e.jsx(ue,{children:e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Pets (",E.length,")"]}),h>1&&e.jsxs("span",{className:"text-sm font-normal text-gray-600 dark:text-gray-400",children:["Page ",x," of ",h]})]})}),e.jsx(j,{children:te?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,a)=>e.jsx(Ne,{className:"h-16 w-full"},a))}):q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pets found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsxs(X,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Species"}),e.jsx(l,{children:"Breed"}),e.jsx(l,{children:"Age"}),e.jsx(l,{children:"Weight"}),e.jsx(l,{children:"Owner"}),e.jsx(l,{children:"Last Clinic"}),e.jsx(l,{children:"Created"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(ve,{children:q.map(s=>e.jsxs(X,{"data-testid":`row-pet-${s.id}`,children:[e.jsx(d,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-gray-400"}),s.name]})}),e.jsx(d,{children:xe(s.species)}),e.jsx(d,{children:s.breed||e.jsx("span",{className:"text-gray-400",children:"Unknown"})}),e.jsx(d,{children:s.age?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-400"}),s.age," yrs"]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})}),e.jsx(d,{children:s.weight?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-gray-400"}),s.weight," kg"]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})}),e.jsx(d,{className:"text-sm text-gray-600 dark:text-gray-400",children:ce(s.userId)}),e.jsx(d,{className:"text-sm text-gray-600 dark:text-gray-400",children:oe(s.lastVisitHospitalId)}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Y,{className:"h-4 w-4"}),Ee(new Date(s.createdAt),"MMM d, yyyy")]})}),e.jsx(d,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>re(s),"data-testid":`button-edit-${s.id}`,children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>ne(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${s.id}`,children:e.jsx(Le,{className:"h-4 w-4"})})]})})]},s.id))})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx(r,{variant:"outline",onClick:()=>b(s=>Math.max(1,s-1)),disabled:x===1,"data-testid":"button-prev-page",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",x," of ",h]}),e.jsx(r,{variant:"outline",onClick:()=>b(s=>Math.min(h,s+1)),disabled:x===h,"data-testid":"button-next-page",children:"Next"})]})]})})]})})]}),e.jsx(K,{open:se,onOpenChange:v,children:e.jsxs($,{"data-testid":"dialog-edit-pet",children:[e.jsxs(Q,{children:[e.jsx(V,{children:"Edit Pet"}),e.jsx(W,{children:"Update pet information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Pet Name"}),e.jsx(p,{id:"name",value:i.name,onChange:s=>c({...i,name:s.target.value}),"data-testid":"input-edit-name"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"species",children:"Species"}),e.jsxs(z,{value:i.species,onValueChange:s=>c({...i,species:s}),children:[e.jsx(I,{"data-testid":"select-edit-species",children:e.jsx(U,{})}),e.jsxs(H,{children:[e.jsx(n,{value:"Dog",children:"Dog"}),e.jsx(n,{value:"Cat",children:"Cat"}),e.jsx(n,{value:"Bird",children:"Bird"}),e.jsx(n,{value:"Rabbit",children:"Rabbit"}),e.jsx(n,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"breed",children:"Breed"}),e.jsx(p,{id:"breed",value:i.breed,onChange:s=>c({...i,breed:s.target.value}),"data-testid":"input-edit-breed"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"age",children:"Age (years)"}),e.jsx(p,{id:"age",type:"number",value:i.age,onChange:s=>c({...i,age:parseInt(s.target.value)||0}),"data-testid":"input-edit-age"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"weight",children:"Weight (kg)"}),e.jsx(p,{id:"weight",value:i.weight,onChange:s=>c({...i,weight:s.target.value}),"data-testid":"input-edit-weight"})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"medicalNotes",children:"Medical Notes"}),e.jsx(ye,{id:"medicalNotes",value:i.medicalNotes,onChange:s=>c({...i,medicalNotes:s.target.value}),rows:4,"data-testid":"textarea-edit-medical-notes"})]})]}),e.jsxs(_,{children:[e.jsx(r,{variant:"outline",onClick:()=>v(!1),"data-testid":"button-cancel-edit",children:"Cancel"}),e.jsx(r,{onClick:le,disabled:F.isPending,"data-testid":"button-save-pet",children:F.isPending?"Saving...":"Save Changes"})]})]})}),e.jsx(K,{open:ae,onOpenChange:N,children:e.jsxs($,{"data-testid":"dialog-delete-pet",children:[e.jsxs(Q,{children:[e.jsx(V,{children:"Delete Pet"}),e.jsx(W,{children:"Are you sure you want to delete this pet? This action cannot be undone."})]}),e.jsxs(_,{children:[e.jsx(r,{variant:"outline",onClick:()=>N(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:de,disabled:M.isPending,"data-testid":"button-confirm-delete",children:M.isPending?"Deleting...":"Delete Pet"})]})]})})]})}export{Ye as default};
