import{a6 as $,h as v,j as e,S as E,i as A,B as a,a5 as Z,C as o,b as c,a7 as y,X as g,M as O,_ as C,R as H,v as B,w as G,aZ as w}from"./index-yGPiJpIr.js";import{B as I}from"./badge-4zSkoC7y.js";import{S as L}from"./skeleton-DdmbE3wx.js";import{C as P}from"./cloud-rain-r6vWQhiD.js";import{T as R}from"./triangle-alert-DBRIKIPj.js";import{C as W}from"./calendar-DeoQHxxx.js";import{C as b}from"./circle-check-big-BsKdr8iG.js";import{C as F}from"./circle-x-BIzv2Di1.js";const U={T1:{colorEn:"Standby",colorZh:"æˆ’å‚™",level:1,bgColor:"bg-green-100 dark:bg-green-900/20",textColor:"text-green-800 dark:text-green-200"},T3:{colorEn:"Strong Wind",colorZh:"å¼·é¢¨",level:3,bgColor:"bg-yellow-100 dark:bg-yellow-900/20",textColor:"text-yellow-800 dark:text-yellow-200"},T8NW:{colorEn:"Gale/Storm NW",colorZh:"çƒˆé¢¨æˆ–æš´é¢¨ï¼ˆè¥¿åŒ—ï¼‰",level:8,bgColor:"bg-orange-100 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200"},T8NE:{colorEn:"Gale/Storm NE",colorZh:"çƒˆé¢¨æˆ–æš´é¢¨ï¼ˆæ±åŒ—ï¼‰",level:8,bgColor:"bg-orange-100 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200"},T8SW:{colorEn:"Gale/Storm SW",colorZh:"çƒˆé¢¨æˆ–æš´é¢¨ï¼ˆè¥¿å—ï¼‰",level:8,bgColor:"bg-orange-100 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200"},T8SE:{colorEn:"Gale/Storm SE",colorZh:"çƒˆé¢¨æˆ–æš´é¢¨ï¼ˆæ±å—ï¼‰",level:8,bgColor:"bg-orange-100 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200"},T9:{colorEn:"Increasing Gale",colorZh:"çƒˆé¢¨æˆ–æš´é¢¨é¢¨åŠ›å¢å¼·",level:9,bgColor:"bg-red-100 dark:bg-red-900/20",textColor:"text-red-800 dark:text-red-200"},T10:{colorEn:"Hurricane",colorZh:"é¢¶é¢¨",level:10,bgColor:"bg-purple-100 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-200"}};function D(){var j,N,f;const{language:l}=$(),{data:t,isLoading:K,refetch:k,isFetching:p}=v({queryKey:["/api/typhoon/status"],refetchInterval:6e4}),{data:x}=v({queryKey:["/api/hospitals"]}),u=(j=t==null?void 0:t.currentAlert)==null?void 0:j.signalCode,s=u?U[u]:null,i=((N=t==null?void 0:t.hospitalStatuses)==null?void 0:N.filter(r=>r.isOpen))||[],h=((f=t==null?void 0:t.hospitalStatuses)==null?void 0:f.filter(r=>!r.isOpen))||[],n=(x==null?void 0:x.filter(r=>{var m;return!((m=t==null?void 0:t.hospitalStatuses)!=null&&m.some(T=>T.hospitalId===r.id))}))||[],S=()=>t!=null&&t.currentAlert?w("typhoon",i.map(r=>({name:l==="zh-HK"?r.hospital.nameZh:r.hospital.nameEn,url:`https://petsos.site/hospitals/${r.hospital.slug}`})),l):w("normal",[],l),d=r=>new Date(r).toLocaleTimeString(l==="zh-HK"?"zh-HK":"en-HK",{hour:"2-digit",minute:"2-digit"}),z=r=>new Date(r).toLocaleDateString(l==="zh-HK"?"zh-HK":"en-HK",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{title:l==="zh-HK"?"é¢±é¢¨æœŸé–“24å°æ™‚ç¸é†«è¨ºæ‰€ç‹€æ…‹ | PetSOS":"24-Hour Vet Status During Typhoon | PetSOS",description:l==="zh-HK"?"å³æ™‚æŸ¥çœ‹é¦™æ¸¯é¢±é¢¨æœŸé–“24å°æ™‚ç¸é†«è¨ºæ‰€çš„ç‡Ÿæ¥­ç‹€æ…‹ã€‚ç¢ºèªå“ªäº›è¨ºæ‰€åœ¨T8/T10ä¿¡è™ŸæœŸé–“ä»ç„¶é–‹æ”¾ã€‚":"Real-time status of 24-hour veterinary clinics during Hong Kong typhoons. See which clinics are confirmed open during T8/T10 signals.",keywords:l==="zh-HK"?"é¢±é¢¨ç¸é†«, T8è¨ºæ‰€é–‹æ”¾, é¦™æ¸¯é¢±é¢¨å¯µç‰©ç·Šæ€¥, 24å°æ™‚ç¸é†«é¢±é¢¨":"typhoon vet, T8 clinic open, Hong Kong typhoon pet emergency, 24-hour vet typhoon",canonical:"https://petsos.site/typhoon-status",language:l}),e.jsx(A,{data:S(),id:"schema-emergency-status"}),e.jsx("header",{className:`border-b border-border ${s?s.bgColor:"bg-green-50 dark:bg-green-900/10"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`p-4 rounded-full ${s?"bg-orange-600":"bg-green-600"}`,children:e.jsx(P,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground","data-testid":"text-page-title",children:l==="zh-HK"?"é¢±é¢¨/å‡æ—¥è¨ºæ‰€ç‹€æ…‹":"Typhoon/Holiday Clinic Status"}),e.jsx("p",{className:"text-muted-foreground",children:l==="zh-HK"?"å³æ™‚æ›´æ–°24å°æ™‚ç¸é†«è¨ºæ‰€ç‡Ÿæ¥­ç‹€æ…‹":"Real-time 24-hour vet clinic availability"})]})]}),t!=null&&t.currentAlert?e.jsx("div",{className:`p-4 rounded-lg ${(s==null?void 0:s.bgColor)||"bg-orange-100"} border-2 border-orange-500`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:`h-6 w-6 ${(s==null?void 0:s.textColor)||"text-orange-800"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:l==="zh-HK"?`ğŸŒ€ ${t.currentAlert.signalCode} é¢±é¢¨ä¿¡è™Ÿç”Ÿæ•ˆä¸­`:`ğŸŒ€ ${t.currentAlert.signalCode} Typhoon Signal in Effect`}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l==="zh-HK"?`ç™¼å‡ºæ™‚é–“: ${d(t.currentAlert.issuedAt.toString())}`:`Issued: ${d(t.currentAlert.issuedAt.toString())}`})]})]})}):t!=null&&t.upcomingHoliday?e.jsx("div",{className:"p-4 rounded-lg bg-blue-100 dark:bg-blue-900/20 border-2 border-blue-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-6 w-6 text-blue-700 dark:text-blue-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-blue-900 dark:text-blue-100",children:l==="zh-HK"?`ğŸ“… å³å°‡ä¾†è‡¨å‡æœŸ: ${t.upcomingHoliday.nameZh}`:`ğŸ“… Upcoming Holiday: ${t.upcomingHoliday.nameEn}`}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:z(t.upcomingHoliday.date.toString())})]})]})}):e.jsx("div",{className:"p-4 rounded-lg bg-green-100 dark:bg-green-900/20 border-2 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-6 w-6 text-green-700 dark:text-green-300"}),e.jsx("div",{className:"font-bold text-lg text-green-900 dark:text-green-100",children:l==="zh-HK"?"âœ… ç›®å‰æ²’æœ‰é¢±é¢¨ä¿¡è™Ÿ":"âœ… No Typhoon Signal Currently"})]})})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:(t==null?void 0:t.lastUpdated)&&e.jsxs(e.Fragment,{children:[l==="zh-HK"?"æœ€å¾Œæ›´æ–°: ":"Last updated: ",d(t.lastUpdated)]})}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>k(),disabled:p,"data-testid":"button-refresh",children:[e.jsx(Z,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),l==="zh-HK"?"åˆ·æ–°":"Refresh"]})]}),e.jsx(o,{className:"mb-6 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(y,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-2",children:l==="zh-HK"?"è¨‚é–±é¢±é¢¨é€šçŸ¥":"Subscribe to Typhoon Alerts"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-4",children:l==="zh-HK"?"ç•¶T8ä¿¡è™Ÿç™¼å‡ºæ™‚ï¼Œæ”¶åˆ°è¨ºæ‰€ç‡Ÿæ¥­ç‹€æ…‹çš„å³æ™‚é€šçŸ¥ã€‚":"Get instant notifications about clinic availability when T8 signal is issued."}),e.jsxs(a,{className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-subscribe",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),l==="zh-HK"?"è¨‚é–±é€šçŸ¥":"Subscribe to Alerts"]})]})]})})}),K?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(r=>e.jsx(L,{className:"h-24"},r))}):e.jsxs(e.Fragment,{children:[i.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-green-600"}),l==="zh-HK"?`ç¢ºèªç‡Ÿæ¥­ (${i.length})`:`Confirmed Open (${i.length})`]}),e.jsx("div",{className:"space-y-3",children:i.map(r=>e.jsx(o,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow","data-testid":`card-hospital-open-${r.hospitalId}`,children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(g,{href:`/hospitals/${r.hospital.slug}`,children:e.jsx("h3",{className:"font-bold text-foreground hover:text-blue-600 cursor-pointer",children:l==="zh-HK"?r.hospital.nameZh:r.hospital.nameEn})}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(O,{className:"h-3 w-3"}),l==="zh-HK"?r.hospital.addressZh:r.hospital.addressEn]}),r.openingTime&&r.closingTime&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[e.jsx(C,{className:"h-3 w-3 inline mr-1"}),r.openingTime," - ",r.closingTime]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l==="zh-HK"?`ç¢ºèªæ–¼ ${d(r.confirmedAt.toString())}`:`Confirmed at ${d(r.confirmedAt.toString())}`})]}),e.jsxs(a,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>r.hospital.phone&&(window.location.href=`tel:${r.hospital.phone}`),"data-testid":`button-call-${r.hospitalId}`,children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),l==="zh-HK"?"è‡´é›»":"Call"]})]})})},r.id))})]}),h.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-red-600"}),l==="zh-HK"?`ç¢ºèªæš«åœç‡Ÿæ¥­ (${h.length})`:`Confirmed Closed (${h.length})`]}),e.jsx("div",{className:"space-y-3",children:h.map(r=>e.jsx(o,{className:"border-l-4 border-l-red-500 opacity-75","data-testid":`card-hospital-closed-${r.hospitalId}`,children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-foreground",children:l==="zh-HK"?r.hospital.nameZh:r.hospital.nameEn}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.notes||(l==="zh-HK"?"é¢±é¢¨æœŸé–“æš«åœæœå‹™":"Closed during typhoon")})]}),e.jsx(I,{variant:"destructive",children:l==="zh-HK"?"æš«åœ":"Closed"})]})})},r.id))})]}),n.length>0&&(t==null?void 0:t.currentAlert)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-amber-600"}),l==="zh-HK"?`ç­‰å¾…ç¢ºèª (${n.length})`:`Awaiting Confirmation (${n.length})`]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l==="zh-HK"?"é€™äº›è¨ºæ‰€å°šæœªç¢ºèªé¢±é¢¨æœŸé–“çš„ç‡Ÿæ¥­ç‹€æ…‹ã€‚å»ºè­°ç›´æ¥è‡´é›»æŸ¥è©¢ã€‚":"These clinics have not yet confirmed their typhoon status. We recommend calling directly."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.slice(0,6).map(r=>e.jsx(o,{className:"border-l-4 border-l-amber-500","data-testid":`card-hospital-pending-${r.id}`,children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"font-medium text-foreground truncate",children:l==="zh-HK"?r.nameZh:r.nameEn})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>r.phone&&(window.location.href=`tel:${r.phone}`),"data-testid":`button-call-pending-${r.id}`,children:e.jsx(H,{className:"h-4 w-4"})})]})})},r.id))}),n.length>6&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(g,{href:"/hospitals",children:e.jsx(a,{variant:"outline",children:l==="zh-HK"?`æŸ¥çœ‹æ‰€æœ‰ ${n.length} é–“è¨ºæ‰€`:`View all ${n.length} clinics`})})})]}),!(t!=null&&t.currentAlert)&&!(t!=null&&t.upcomingHoliday)&&e.jsxs(o,{className:"text-center p-8",children:[e.jsx(b,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:l==="zh-HK"?"å¤©æ°£è‰¯å¥½":"Clear Weather"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:l==="zh-HK"?"ç›®å‰æ²’æœ‰é¢±é¢¨è­¦å‘Šã€‚æ‰€æœ‰24å°æ™‚ç¸é†«è¨ºæ‰€æŒ‰æ­£å¸¸æ™‚é–“ç‡Ÿæ¥­ã€‚":"No typhoon warnings currently. All 24-hour veterinary clinics operating normally."}),e.jsx(g,{href:"/hospitals",children:e.jsx(a,{className:"bg-red-600 hover:bg-red-700",children:l==="zh-HK"?"ç€è¦½æ‰€æœ‰è¨ºæ‰€":"Browse All Clinics"})})]})]}),e.jsxs(o,{className:"mt-8 bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800",children:[e.jsx(B,{children:e.jsx(G,{className:"text-lg text-amber-900 dark:text-amber-100",children:l==="zh-HK"?"ğŸ¥ è¨ºæ‰€ç¶“ç‡Ÿè€…":"ğŸ¥ For Clinic Operators"})}),e.jsxs(c,{children:[e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 mb-4",children:l==="zh-HK"?"å¦‚æœæ‚¨ç¶“ç‡Ÿ24å°æ™‚ç¸é†«è¨ºæ‰€ï¼Œè«‹åœ¨é¢±é¢¨æœŸé–“æ›´æ–°æ‚¨çš„ç‡Ÿæ¥­ç‹€æ…‹ï¼Œå¹«åŠ©å¯µç‰©ä¸»äººæ‰¾åˆ°é–‹æ”¾çš„è¨ºæ‰€ã€‚":"If you operate a 24-hour vet clinic, please update your status during typhoons to help pet owners find open clinics."}),e.jsx(a,{variant:"outline",className:"border-amber-600 text-amber-700","data-testid":"button-update-status",children:l==="zh-HK"?"æ›´æ–°æˆ‘çš„è¨ºæ‰€ç‹€æ…‹":"Update My Clinic Status"})]})]})]})]})}export{D as default};
