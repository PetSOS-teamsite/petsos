import{u as D,r as i,h as $,J as V,j as a,S as Q,i as M,aq as U,p as J,_ as X,B as j,L as Y,I as ee,ar as ae,as as te,at as E,$ as se,a0 as F,M as f,C,q as A,b as H,t as re,E as ne}from"./index-DwyYRZ5p.js";import{B as K}from"./badge-BMrQ0xDH.js";import{S as u}from"./skeleton-CM7Qf3A_.js";import{S as de}from"./switch-BavEdzWh.js";import{A as le}from"./arrow-left-yEGhOFsb.js";import{S as ie}from"./search-DvVGx0W3.js";import{B as ce}from"./building-2-BwwPf-yj.js";import{E as oe}from"./external-link-BUxMFfKu.js";import{M as me}from"./message-circle-B_AwNgGu.js";import{N as xe}from"./navigation-DdTD2RUh.js";function ke(){var P;const{t:p,language:t}=D(),[l,I]=i.useState(""),[c,T]=i.useState("all"),[m,G]=i.useState(!1),[n,q]=i.useState(null),[B,y]=i.useState(null),{data:w,isLoading:O}=$({queryKey:["/api/regions"]}),{data:b,isLoading:z}=$({queryKey:["/api/hospitals"]}),N=i.useMemo(()=>(b==null?void 0:b.filter(e=>e.isAvailable===!0))||[],[b]);i.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{q({lat:e.coords.latitude,lng:e.coords.longitude}),y(null)},e=>{console.error("Error getting location:",e),y(e.message)}):y("Geolocation not supported")},[]);const k=(e,s,d,o)=>{const x=(d-e)*Math.PI/180,h=(o-s)*Math.PI/180,g=Math.sin(x/2)*Math.sin(x/2)+Math.cos(e*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin(h/2)*Math.sin(h/2);return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))},r=(P=N==null?void 0:N.filter(e=>{var v,x,h,g,S,L;const s=!l||((x=(v=e.nameEn)==null?void 0:v.toLowerCase())==null?void 0:x.includes(l.toLowerCase()))||((h=e.nameZh)==null?void 0:h.includes(l))||((S=(g=e.addressEn)==null?void 0:g.toLowerCase())==null?void 0:S.includes(l.toLowerCase()))||((L=e.addressZh)==null?void 0:L.includes(l)),d=c==="all"||e.regionId===c,o=!m||e.open247===!0;return s&&d&&o}))==null?void 0:P.sort((e,s)=>{if(e.isPartner&&!s.isPartner)return-1;if(!e.isPartner&&s.isPartner)return 1;if(!n)return 0;const d=e.latitude&&e.longitude?k(n.lat,n.lng,parseFloat(e.latitude),parseFloat(e.longitude)):1/0,o=s.latitude&&s.longitude?k(n.lat,n.lng,parseFloat(s.latitude),parseFloat(s.longitude)):1/0;return d-o});i.useEffect(()=>{r&&(l||c!=="all"||m)&&V.trackClinicSearch({region:c!=="all"?c:void 0,is24Hour:m||void 0,resultsCount:r.length})},[l,c,m,r==null?void 0:r.length]);const Z=e=>{window.location.href=`tel:${e}`},R=e=>{window.open(`https://wa.me/${e.replace(/[^0-9+]/g,"")}`,"_blank")},_=(e,s,d)=>{const o=`https://www.google.com/maps/search/?api=1&query=${e},${s}&query_place_id=${encodeURIComponent(d)}`;window.open(o,"_blank")},W=(e,s)=>{s.target.closest("button")||e.slug&&(window.location.href=`/hospitals/${e.slug}`)};return a.jsxs(a.Fragment,{children:[a.jsx(Q,{title:t==="zh-HK"?"24å°æ™‚ç¸é†«è¨ºæ‰€ç›®éŒ„ - PetSOS | GPSè·é›¢é¡¯ç¤º":"24-Hour Veterinary Clinics Directory - PetSOS | GPS Distance Tracking",description:t==="zh-HK"?"æœå°‹é¦™æ¸¯24å°æ™‚å‹•ç‰©é†«é™¢ã€‚GPSè‡ªå‹•é¡¯ç¤ºè·é›¢ï¼ŒæŒ‰æœ€è¿‘è¨ºæ‰€æŽ’åºã€‚è¦†è“‹æ¸¯å³¶ã€ä¹é¾ã€æ–°ç•Œæ‰€æœ‰åœ°å€ã€‚ä¸€éµè‡´é›»æˆ–WhatsAppè¯çµ¡ï¼Œæ¯›å­©ç·Šæ€¥æƒ…æ³æœ€å¿«æ‰¾åˆ°å”åŠ©ã€‚":"Search 24-hour animal hospitals in Hong Kong. GPS-powered distance tracking, sorted by nearest clinics. Coverage across Hong Kong Island, Kowloon, and New Territories. One-tap call or WhatsApp contact for fast emergency help.",keywords:t==="zh-HK"?"24å°æ™‚ç¸é†«, å‹•ç‰©é†«é™¢ç›®éŒ„, GPSå°‹æ‰¾è¨ºæ‰€, æœ€è¿‘ç¸é†«, é¦™æ¸¯å³¶, ä¹é¾, æ–°ç•Œ, WhatsAppè¯çµ¡":"24-hour vet directory, animal hospital finder, GPS clinic search, nearest vet, Hong Kong Island, Kowloon, New Territories, WhatsApp contact",canonical:"https://petsos.site/clinics",language:t}),a.jsx(M,{data:U(t),id:"schema-veterinary-directory"}),a.jsx(M,{data:J([{name:t==="zh-HK"?"ä¸»é ":"Home",url:"https://petsos.site/"},{name:t==="zh-HK"?"è¨ºæ‰€ç›®éŒ„":"Clinics",url:"https://petsos.site/clinics"}]),id:"schema-breadcrumb-clinics"}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",children:[a.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 sticky top-0 z-10",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(X,{href:"/",children:a.jsx(j,{variant:"ghost",size:"icon","data-testid":"button-back",children:a.jsx(le,{className:"h-5 w-5"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p("clinics.title","Veterinary Clinics")})]}),a.jsx(Y,{})]})})}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"max-w-4xl mx-auto mb-8 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(ee,{type:"text",placeholder:p("clinics.search","Search clinics by name or address..."),value:l,onChange:e=>I(e.target.value),className:"pl-10 h-12 text-base","data-testid":"input-search"})]}),O?a.jsx(u,{className:"h-12 w-full"}):a.jsx(ae,{value:c,onValueChange:T,children:a.jsxs(te,{className:"inline-flex w-full h-auto p-1 overflow-x-auto scrollbar-hide","data-testid":"tabs-region",children:[a.jsx(E,{value:"all","data-testid":"tab-all",className:"flex-shrink-0 min-w-[80px] h-10 px-4",children:t==="zh-HK"?"å…¨æ¸¯":"All HK"}),w==null?void 0:w.map(e=>a.jsx(E,{value:e.id,"data-testid":`tab-region-${e.code}`,className:"flex-shrink-0 min-w-[80px] h-10 px-4",children:t==="zh-HK"?e.nameZh:e.nameEn},e.id))]})}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx(de,{id:"24hour-filter",checked:m,onCheckedChange:e=>{console.log("[24h Filter] Switch toggled:",e),G(e)},"data-testid":"switch-24hour-filter",className:"data-[state=checked]:bg-red-600"}),a.jsxs(se,{htmlFor:"24hour-filter",className:"flex items-center gap-2 cursor-pointer text-sm font-medium text-red-900 dark:text-red-100",children:[a.jsx(F,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),t==="zh-HK"?"åªé¡¯ç¤º24å°æ™‚è¨ºæ‰€":"Show 24-Hour Clinics Only"]})]}),B?a.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg","data-testid":"banner-location-error",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(f,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:t==="zh-HK"?"ç„¡æ³•å–å¾—ä½ç½® - è«‹å•Ÿç”¨å®šä½ä»¥é¡¯ç¤ºè·é›¢":"Location unavailable - Enable GPS to see distances"})]})}):n?a.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg","data-testid":"banner-location-success",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(f,{className:"h-4 w-4 text-red-600 dark:text-red-400 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-900 dark:text-red-100 font-medium",children:t==="zh-HK"?"ðŸ“ å·²æŒ‰è·é›¢æŽ’åº - æœ€è¿‘çš„è¨ºæ‰€å„ªå…ˆé¡¯ç¤º":"ðŸ“ Sorted by distance - Nearest clinics first"})]})}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg","data-testid":"banner-location-loading",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(f,{className:"h-4 w-4 text-gray-500 animate-pulse flex-shrink-0"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t==="zh-HK"?"æ­£åœ¨å–å¾—ä½ç½®...":"Getting your location..."})]})})]}),z?a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx(u,{className:"h-6 w-40"})}):a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm","data-testid":"text-results-count",children:t==="zh-HK"?`å·²æ‰¾åˆ° ${(r==null?void 0:r.length)||0} é–“è¨ºæ‰€`:`${(r==null?void 0:r.length)||0} ${(r==null?void 0:r.length)!==1?"hospitals":"hospital"} found`})}),a.jsx("div",{className:"max-w-4xl mx-auto space-y-3",children:z?a.jsx(a.Fragment,{children:[1,2,3].map(e=>a.jsxs(C,{children:[a.jsxs(A,{children:[a.jsx(u,{className:"h-6 w-3/4"}),a.jsx(u,{className:"h-4 w-1/2 mt-2"})]}),a.jsx(H,{children:a.jsx(u,{className:"h-10 w-full"})})]},e))}):r&&r.length>0?r.map(e=>a.jsxs(C,{className:"group hover:shadow-lg hover:border-l-red-700 transition-all border-l-4 border-l-red-600 cursor-pointer",onClick:s=>W(e,s),"data-testid":`card-clinic-${e.id}`,children:[a.jsx(A,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.isPartner&&a.jsx(K,{className:"bg-gradient-to-r from-purple-600 to-blue-600 font-bold","data-testid":`badge-partner-${e.id}`,children:"â­ PetSOS Partner"}),a.jsxs(K,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 font-bold","data-testid":`badge-hospital-${e.id}`,children:[a.jsx(ce,{className:"h-3 w-3 mr-1"}),e.open247?t==="zh-HK"?"24å°æ™‚å‹•ç‰©é†«é™¢":"24-Hour Hospital":t==="zh-HK"?"å‹•ç‰©é†«é™¢":"Animal Hospital"]})]}),a.jsxs(re,{className:"text-lg mb-1 leading-tight",children:[a.jsxs("span",{className:"flex items-center gap-1.5 font-bold text-gray-900 dark:text-white group-hover:text-red-600 transition-colors","data-testid":`text-clinic-name-${e.id}`,children:[t==="zh-HK"&&e.nameZh?e.nameZh:e.nameEn,a.jsx(oe,{className:"h-4 w-4 text-gray-400 group-hover:text-red-600 flex-shrink-0"})]}),t==="zh-HK"&&e.nameZh&&a.jsx("span",{className:"block text-sm font-normal text-gray-500 dark:text-gray-400 mt-0.5",children:e.nameEn})]}),n&&e.latitude&&e.longitude&&a.jsxs("div",{className:"inline-flex items-center gap-1 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full text-xs font-semibold mb-2","data-testid":`text-clinic-distance-${e.id}`,children:[a.jsx(f,{className:"h-3 w-3"}),k(n.lat,n.lng,parseFloat(e.latitude),parseFloat(e.longitude)).toFixed(1)," km ",t==="zh-HK"?"è·é›¢":"away"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate","data-testid":`text-clinic-address-${e.id}`,children:t==="zh-HK"&&e.addressZh?e.addressZh:e.addressEn})]}),e.open247&&a.jsxs(K,{className:"bg-red-600 hover:bg-red-700 shrink-0","data-testid":`badge-24hour-${e.id}`,children:[a.jsx(F,{className:"h-3 w-3 mr-1"}),t==="zh-HK"?"24å°æ™‚":"24hrs"]})]})}),a.jsx(H,{className:"pt-0",children:a.jsxs("div",{className:"flex gap-2",children:[e.phone&&a.jsxs(j,{onClick:s=>{s.stopPropagation(),Z(e.phone)},size:"sm",className:"flex-1 bg-red-600 hover:bg-red-700","data-testid":`button-call-${e.id}`,children:[a.jsx(ne,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"è‡´é›»":"Call"]}),e.whatsapp&&a.jsxs(j,{onClick:s=>{s.stopPropagation(),R(e.whatsapp)},variant:"outline",size:"sm",className:"flex-1 border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":`button-whatsapp-${e.id}`,children:[a.jsx(me,{className:"h-4 w-4 mr-1"}),"WhatsApp"]}),e.latitude&&e.longitude&&a.jsxs(j,{onClick:s=>{s.stopPropagation(),_(parseFloat(e.latitude),parseFloat(e.longitude),e.nameEn)},variant:"outline",size:"sm",className:"flex-1 border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":`button-maps-${e.id}`,children:[a.jsx(xe,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"å°Žèˆª":"Maps"]})]})})]},e.id)):a.jsx(C,{children:a.jsxs(H,{className:"py-12 text-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2","data-testid":"text-no-results",children:p("clinics.no_results","No clinics found matching your criteria")}),a.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm",children:p("clinics.adjust_search","Try adjusting your search or filters")})]})})})]})]})]})}export{ke as default};
