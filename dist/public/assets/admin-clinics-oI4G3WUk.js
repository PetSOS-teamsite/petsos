import{a as pe,r as l,h as de,g as ge,j as e,_ as ue,B as i,I as N,av as je,E as be,X as ye,C as fe,b as Ne,o as we,s as g,aB as Ce,F as ve,w as x,x as h,y as m,z as p,A as u,a1 as ke,a2 as Se,a3 as Ae,a4 as De,a5 as Ee,G as k,H as P,a7 as Ie}from"./index-B6saPYUG.js";import{u as L}from"./useMutation-BpjjsHNz.js";import{D as V,a as Z,b as F,c as q,d as H,e as K}from"./dialog-CD0b21-G.js";import{A as $e,a as Te,b as Oe,c as Pe,d as Le,e as Ve,f as Ze,g as Fe}from"./alert-dialog-BbSg89Wo.js";import{T as se}from"./textarea-CB4pMgR_.js";import{S as qe}from"./switch-CKhKJ8lT.js";import{B}from"./badge-BOAiHaNX.js";import{A as He}from"./arrow-left-BBFd6T1J.js";import{B as ze}from"./building-2-Cmog6cOv.js";import{S as Re}from"./search-DTHNNwi7.js";import{P as ae}from"./plus-BE_IImxm.js";import{L as re}from"./loader-circle-BwaShkSP.js";import{M as Me}from"./message-circle-nROJhZSX.js";import{P as Qe}from"./pencil-BpQdmNRl.js";import{C as U}from"./copy-Dz5m14Rk.js";import{T as Be}from"./trash-2-COGP7Zp1.js";import"./index-CgmZT5hz.js";const Ue=we({name:g().min(1,"Clinic name (English) is required"),nameZh:g().min(1,"Clinic name (Chinese) is required"),address:g().min(1,"Address (English) is required"),addressZh:g().min(1,"Address (Chinese) is required"),phone:g().min(1,"Phone is required"),whatsapp:g().optional(),email:g().optional(),regionId:g().min(1,"Region is required"),is24Hour:Ce().default(!1)});function ie({form:s,onSubmit:o,submitLabel:S}){const{data:c}=de({queryKey:["/api/regions"]});return e.jsx(ve,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[e.jsx("strong",{children:"Essential Information:"})," Help pet owners contact you quickly during emergencies."]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:s.control,name:"name",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Clinic Name (English) *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"Central Animal Clinic","data-testid":"input-name-en"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"nameZh",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Clinic Name (Chinese) *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"中環動物診所","data-testid":"input-name-zh"})}),e.jsx(u,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:s.control,name:"address",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Address (English) *"}),e.jsx(p,{children:e.jsx(se,{...a,placeholder:"123 Queen's Road Central",rows:2,"data-testid":"input-address-en"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"addressZh",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Address (Chinese) *"}),e.jsx(p,{children:e.jsx(se,{...a,placeholder:"皇后大道中123號",rows:2,"data-testid":"input-address-zh"})}),e.jsx(u,{})]})})]}),e.jsx(x,{control:s.control,name:"regionId",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Region *"}),e.jsxs(ke,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(p,{children:e.jsx(Se,{"data-testid":"select-region",children:e.jsx(Ae,{placeholder:"Select region"})})}),e.jsx(De,{children:c==null?void 0:c.map(b=>e.jsx(Ee,{value:b.id,"data-testid":`region-${b.code}`,children:b.nameEn},b.id))})]}),e.jsx(u,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(x,{control:s.control,name:"phone",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Phone *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"+852 1234 5678","data-testid":"input-phone"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"whatsapp",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"WhatsApp"}),e.jsx(p,{children:e.jsx(N,{...a,value:a.value||"",placeholder:"+852 1234 5678","data-testid":"input-whatsapp"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"email",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Email"}),e.jsx(p,{children:e.jsx(N,{...a,value:a.value||"",placeholder:"info@clinic.com",type:"email","data-testid":"input-email"})}),e.jsx(u,{})]})})]}),e.jsx(x,{control:s.control,name:"is24Hour",render:({field:a})=>e.jsxs(h,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(m,{className:"text-base",children:"24-Hour Operation"})}),e.jsx(p,{children:e.jsx(qe,{checked:a.value||!1,onCheckedChange:a.onChange,"data-testid":"switch-24hour"})})]})}),e.jsx(K,{children:e.jsx(i,{type:"submit","data-testid":"button-submit-clinic",children:S})})]})})}function ct(){const{toast:s}=pe(),[o,S]=l.useState(""),[c,a]=l.useState(null),[b,z]=l.useState(!1),[ne,G]=l.useState(!1),[w,W]=l.useState(null),[le,A]=l.useState(!1),[D,E]=l.useState(""),[X,_]=l.useState(!1),[j,J]=l.useState(null),[r,R]=l.useState(null),[M,I]=l.useState(null),{data:y,isLoading:oe,refetch:$}=de({queryKey:["/api/clinics"]}),f=ge({resolver:Ie(Ue),defaultValues:{name:"",nameZh:"",address:"",addressZh:"",phone:"",whatsapp:"",email:"",regionId:"",is24Hour:!1}}),Y=L({mutationFn:async t=>k("POST","/api/clinics",t),onSuccess:()=>{s({title:"Clinic created successfully"}),z(!1),f.reset(),P.invalidateQueries({queryKey:["/api/clinics"]}),$()},onError:t=>{s({title:"Error creating clinic",description:t.message,variant:"destructive"})}}),ee=L({mutationFn:async t=>{if(!(c!=null&&c.id))throw new Error("No clinic selected");return k("PATCH",`/api/clinics/${c.id}`,t)},onSuccess:()=>{s({title:"Clinic updated successfully"}),a(null),f.reset(),P.invalidateQueries({queryKey:["/api/clinics"]}),$()},onError:t=>{s({title:"Error updating clinic",description:t.message,variant:"destructive"})}}),te=L({mutationFn:async t=>k("DELETE",`/api/clinics/${t}`,{}),onSuccess:()=>{s({title:"Clinic deleted successfully"}),W(null),P.invalidateQueries({queryKey:["/api/clinics"]}),$()},onError:t=>{s({title:"Error deleting clinic",description:t.message,variant:"destructive"})}}),Q=L({mutationFn:async t=>(await k("POST",`/api/clinics/${t}/generate-code`,{})).code,onSuccess:t=>{I(t),s({title:"Code generated successfully"})},onError:t=>{s({title:"Error generating code",description:t.message,variant:"destructive"})}}),T=y==null?void 0:y.filter(t=>{var n,C,O,v;return!o||((n=t.name)==null?void 0:n.toLowerCase().includes(o.toLowerCase()))||((C=t.nameZh)==null?void 0:C.includes(o))||((O=t.address)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||((v=t.addressZh)==null?void 0:v.includes(o))}),ce=t=>{a(t),f.reset({name:t.name||"",nameZh:t.nameZh||"",address:t.address||"",addressZh:t.addressZh||"",phone:t.phone||"",whatsapp:t.whatsapp||"",email:t.email||"",regionId:t.regionId||"",is24Hour:t.is24Hour||!1})},xe=()=>{f.reset({name:"",nameZh:"",address:"",addressZh:"",phone:"",whatsapp:"",email:"",regionId:"",is24Hour:!1}),z(!0)},he=async()=>{var t,d;if(!D.trim()){s({title:"Error",description:"Please paste CSV data",variant:"destructive"});return}_(!0);try{const n=await k("POST","/api/clinics/import",{csvData:D});J(n),s({title:"Import Complete",description:`Created/Updated: ${((t=n.summary)==null?void 0:t.createdOrUpdated)||0}, Errors: ${((d=n.summary)==null?void 0:d.errors)||0}`}),E(""),P.invalidateQueries({queryKey:["/api/clinics"]}),$(),setTimeout(()=>A(!1),1e3)}catch(n){s({title:"Import Failed",description:n.message,variant:"destructive"})}finally{_(!1)}},me=t=>{var C;const d=(C=t.target.files)==null?void 0:C[0];if(!d)return;const n=new FileReader;n.onload=O=>{var v;E((v=O.target)==null?void 0:v.result)},n.readAsText(d)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{href:"/admin",children:e.jsx(i,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(He,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2","data-testid":"text-page-title",children:[e.jsx(ze,{className:"h-6 w-6 text-red-500"}),"Manage Clinics"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Edit and manage all veterinary clinics"})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{type:"text",placeholder:"Search clinic name or address...",value:o,onChange:t=>S(t.target.value),className:"pl-9 pr-9","data-testid":"input-search"}),o&&e.jsx("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-testid":"button-clear-search",children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsxs(i,{variant:"outline",onClick:()=>A(!0),"data-testid":"button-import-csv",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),e.jsxs(i,{onClick:xe,"data-testid":"button-create-clinic",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Add Clinic"]})]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:oe?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading clinics..."})]}):T&&T.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white min-w-[300px]",children:"Clinic Name & Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"WhatsApp"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Verification Code"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{"data-testid":`row-clinic-${t.id}`,className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm","data-testid":`text-clinic-name-${t.id}`,children:t.name}),t.nameZh&&e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.nameZh})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight","data-testid":`text-clinic-address-${t.id}`,children:[e.jsx("div",{children:t.address}),t.addressZh&&e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:t.addressZh})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap","data-testid":`text-clinic-phone-${t.id}`,children:t.phone||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap","data-testid":`text-clinic-whatsapp-${t.id}`,children:t.whatsapp||"—"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.is24Hour?e.jsx(B,{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium","data-testid":`badge-24h-${t.id}`,children:"24-Hour"}):e.jsx(B,{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs","data-testid":`badge-standard-${t.id}`,children:"Standard"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.ownerVerificationCode?e.jsx(B,{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-mono font-bold tracking-wide","data-testid":`badge-code-${t.id}`,children:t.ownerVerificationCode}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[t.phone&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>window.location.href=`tel:${t.phone}`,"data-testid":`button-call-${t.id}`,className:"h-8 w-8 p-0",title:"Call",children:e.jsx(be,{className:"h-4 w-4"})}),t.whatsapp&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{const d=(t.whatsapp||"").replace(/[^\d]/g,"");window.open(`https://wa.me/${d}`,"_blank")},"data-testid":`button-whatsapp-${t.id}`,className:"h-8 w-8 p-0 text-green-600 dark:text-green-400 hover:text-green-700",title:"WhatsApp",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>ce(t),"data-testid":`button-edit-${t.id}`,className:"h-8 w-8 p-0",title:"Edit",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{R(t),I(null),Q.mutate(t.id)},"data-testid":`button-generate-code-${t.id}`,className:"h-8 w-8 p-0",title:"Generate Access Code",disabled:Q.isPending,children:Q.isPending?e.jsx(re,{className:"h-4 w-4 animate-spin"}):e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{const d=`${window.location.origin}/clinic/edit/${t.id}`;navigator.clipboard.writeText(d),s({title:"Link copied",description:t.name})},"data-testid":`button-copy-link-${t.id}`,className:"h-8 w-8 p-0",title:"Copy Share Link",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{W(t),G(!0)},"data-testid":`button-delete-${t.id}`,className:"h-8 w-8 p-0 text-red-600 dark:text-red-400 hover:text-red-700",title:"Delete",children:e.jsx(Be,{className:"h-4 w-4"})})]})})]},t.id))})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 px-4",children:["Showing ",T.length," of ",(y==null?void 0:y.length)||0," clinics"]})]}):e.jsx(fe,{children:e.jsx(Ne,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400","data-testid":"text-no-results",children:"No clinics found"})})})})]}),e.jsx(V,{open:b,onOpenChange:z,children:e.jsxs(Z,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-create-clinic",children:[e.jsxs(F,{children:[e.jsx(q,{children:"Add New Clinic"}),e.jsx(H,{children:"Create a new veterinary clinic listing"})]}),e.jsx(ie,{form:f,onSubmit:t=>Y.mutate(t),submitLabel:Y.isPending?"Creating...":"Create Clinic"})]})}),e.jsx(V,{open:!!c,onOpenChange:t=>!t&&a(null),children:e.jsxs(Z,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-edit-clinic",children:[e.jsxs(F,{children:[e.jsx(q,{children:"Edit Clinic"}),e.jsx(H,{children:"Update clinic information"})]}),e.jsx(ie,{form:f,onSubmit:t=>ee.mutate(t),submitLabel:ee.isPending?"Saving...":"Save Changes"})]})}),e.jsx($e,{open:ne,onOpenChange:G,children:e.jsxs(Te,{"data-testid":"dialog-delete-confirm",children:[e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Delete Clinic?"}),e.jsxs(Le,{children:["Are you sure you want to delete ",w==null?void 0:w.name,"? This action cannot be undone."]})]}),e.jsxs(Ve,{children:[e.jsx(Ze,{"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsx(Fe,{onClick:()=>w&&te.mutate(w.id),className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",children:te.isPending?"Deleting...":"Delete"})]})]})}),e.jsx(V,{open:!!r&&!!M,onOpenChange:t=>{t||(R(null),I(null))},children:e.jsxs(Z,{"data-testid":"dialog-generated-code",children:[e.jsxs(F,{children:[e.jsx(q,{children:"Access Code Generated"}),e.jsxs(H,{children:["Share this 6-digit code with ",r==null?void 0:r.name," clinic owners to let them edit their clinic information"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-900/30 border-2 border-red-300 dark:border-red-700 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mb-2",children:"VERIFICATION CODE"}),e.jsx("p",{className:"text-5xl font-bold text-red-600 dark:text-red-400 tracking-widest font-mono","data-testid":"text-generated-code",children:M})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.jsx("strong",{children:"Share link:"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-900 text-sm text-gray-600 dark:text-gray-400","data-testid":"input-share-link"}),e.jsx(i,{size:"sm",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`),s({title:"Link copied"})},"data-testid":"button-copy-link-dialog",children:e.jsx(U,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"How to share:"})," Send both the link and the 6-digit code to the clinic owner. They'll need both to access the edit form."]})})]}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>{R(null),I(null)},"data-testid":"button-close-code-dialog",children:"Close"}),e.jsxs(i,{onClick:()=>{const t=`PetSOS Clinic Edit Access

Clinic: ${r==null?void 0:r.name}
Access Code: ${M}

Link: ${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`;navigator.clipboard.writeText(t),s({title:"Access info copied",description:"Ready to send to clinic owner"})},"data-testid":"button-copy-all",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Copy All Info"]})]})]})}),e.jsx(V,{open:le,onOpenChange:A,children:e.jsxs(Z,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-import-csv",children:[e.jsxs(F,{children:[e.jsx(q,{children:"Import Clinics from CSV"}),e.jsx(H,{children:"Upload or paste CSV data to create or update clinic records"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"CSV Format:"})," Name of Vet Clinic (English), 獸醫診所名稱 (Chinese), Address, 營業地址, Call Phone Number, WhatsApp Number, 24 hours, District"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Upload CSV File"}),e.jsx("input",{type:"file",accept:".csv,.xlsx",onChange:me,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300","data-testid":"input-csv-file"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"Or paste CSV data"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"CSV Data"}),e.jsx("textarea",{value:D,onChange:t=>E(t.target.value),placeholder:"Paste your CSV data here...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","data-testid":"textarea-csv-data"})]}),j&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[e.jsx("strong",{children:"Import Results:"})," ",j.summary.createdOrUpdated," created/updated, ",j.summary.errors," errors"]}),j.errors.length>0&&e.jsxs("div",{className:"mt-2 max-h-32 overflow-y-auto",children:[e.jsx("p",{className:"text-xs text-green-700 dark:text-green-400 font-semibold mb-1",children:"Errors:"}),j.errors.slice(0,5).map((t,d)=>e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:t},d)),j.errors.length>5&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["... and ",j.errors.length-5," more errors"]})]})]})]}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>{A(!1),E(""),J(null)},"data-testid":"button-cancel-import",children:"Cancel"}),e.jsx(i,{onClick:he,disabled:!D.trim()||X,"data-testid":"button-import",children:X?"Importing...":"Import Clinics"})]})]})})]})}export{ct as default};
