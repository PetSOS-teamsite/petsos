import{c as re,u as ue,a as ge,r as l,j as e,C as ee,b as te,d as se,B as M,o as D,s as u,n as R,e as Ne,f as Ce,g as Pe,h as W,S as ze,i as B,k as _e,l as Ie,m as Ae,p as Te,q as Oe,t as Ee,L as Le,v as qe,F as He,w as P,x as z,y as _,z as O,A as I,D as Ke,I as J,M as Re,E as Ve,G as $e,H as Me,J as De,K as We,P as Be,N as Ge,Z as Ue,O as Ye,Q as Fe,R as Qe}from"./index-Dv-87GdI.js";import{u as Ze}from"./useMutation-DhbY-5L1.js";import{T as Je}from"./textarea-CXxlry72.js";import{B as Xe}from"./BreedCombobox-DhzZb5zv.js";import{R as et,C as tt,a as st}from"./index-3MSBdfhq.js";import{C as rt}from"./circle-check-C1_Cff8L.js";import{I as nt}from"./info-Dc67Ck9i.js";import{L as at}from"./loader-circle-B-JBmTN-.js";import{C as it}from"./circle-check-big-DCQhHtVn.js";import{C as ot}from"./chevron-right-Dfx_4bpj.js";import"./search-BPoAccfe.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=re("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=re("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),dt=et,mt=tt,ut=st,gt={critical:{en:["unconscious","not breathing","stopped breathing","no breath","cant breathe","cannot breathe","not responsive","unresponsive","passed out","fainted","collapsed","choking","choked","something stuck","stuck in throat","cant swallow","bleeding heavily","massive bleeding","blood everywhere","wont stop bleeding","bleeding out","hemorrhaging","massive blood loss","spurting blood","gushing blood","seizure","seizing","convulsion","convulsing","fitting","spasms","poisoned","ate poison","toxic","ingested","swallowed something","hit by car","hit by vehicle","run over","car accident","vehicle accident","attacked","bitten","mauled","fight","attacked by dog","attacked by animal","fell from height","fell down stairs","fell from window","not moving","limp","lifeless","critical condition","dying","emergency"],zh:["ÊòèËø∑","‰∏çÂëºÂê∏","ÂÅúÊ≠¢ÂëºÂê∏","Â§±ÂéªÊÑèË≠ò","ÊòèÂÄí","ÊöàÂÄí","ÂÄí‰∏ã","Á™íÊÅØ","ÂìΩ‰Ωè","Âç°‰Ωè","ÂñâÂö®Âç°‰Ωè","Â§ßÂá∫Ë°Ä","ÊµÅË°Ä‰∏çÊ≠¢","Â§ßÈáèÂá∫Ë°Ä","Ë°ÄÊµÅ‰∏çÂÅú","Âô¥Ë°Ä","ÊäΩÊêê","ÁóôÊî£","ÊäΩÁ≠ã","ÂÖ®Ë∫´ÊäΩÊêê","‰∏≠ÊØí","È£üÈåØÂò¢","È£üÂíóÊØí","Ë™§È£ü","ËªäÊíû","Ë¢´ËªäÊíû","ÊíûËªä","‰∫§ÈÄöÊÑèÂ§ñ","Ë¢´Ë•≤Êìä","Ë¢´Âí¨","Ë¢´Êâì","Ë¢´ÁãóÂí¨","Ë¢´ÊîªÊìä","Ë∑åËêΩ","ÂæûÈ´òËôïË∑åËêΩ","Ë∑åËêΩÊ®ìÊ¢Ø","‰∏çÂãï","ÂÜáÂèçÊáâ","ÁÄïÊ≠ª","Âç±ÊÄ•","Ê≤°ÂëºÂê∏","ÂÅúÊ≠¢ÂëºÂê∏","Â§±ÂéªÊÑèËØÜ","ÊòèÂÄí","ÊôïÂÄí","Á™íÊÅØ","Âç°‰Ωè","ÂñâÂíôÂç°‰Ωè","Â§ßÂá∫Ë°Ä","ÊµÅË°Ä‰∏çÊ≠¢","Â§ßÈáèÂá∫Ë°Ä","ÊäΩÊêê","ÁóâÊåõ","ÊäΩÁ≠ã","‰∏≠ÊØí","ÂêÉÈîô‰∏úË•ø","ÂêÉ‰∫ÜÊØí","ËØØÈ£ü","Ë¢´ËΩ¶Êíû","ÊíûËΩ¶","‰∫§ÈÄöÊÑèÂ§ñ","Ë¢´Ë¢≠Âáª","Ë¢´Âí¨","Ë¢´ÁãóÂí¨","Ë¢´ÊîªÂáª","Ë∑åËêΩ","Êëî‰∏ãÊù•","‰∏çÂä®","Ê≤°ÂèçÂ∫î","ÊøíÊ≠ª","Âç±ÊÄ•"]},breathing:{en:["difficulty breathing","trouble breathing","hard to breathe","struggling to breathe","gasping","gasping for air","cant get air","panting heavily","panting hard","breathing fast","rapid breathing","blue gums","purple gums","pale gums","grey gums","wheezing","whistling sound","noisy breathing","coughing","coughing up blood","hacking","persistent cough","labored breathing","shallow breathing","irregular breathing","open mouth breathing","extended neck","flared nostrils"],zh:["ÂëºÂê∏Âõ∞Èõ£","ÂëºÂê∏ÂîîÂà∞","ÂîîÂ§†Ê∞£","Ê∞£‰øÉ","ÈÄèÂîîÂà∞Ê∞£","ÂñòÊ∞£","Âñò","Â§ßÂäõÂñò","ÂñòÂæóÂ•ΩÂé≤ÂÆ≥","ÁâôÈΩ¶ÁôºËóç","ÁâôËÇâÁôºÁ¥´","ÁâôÈΩ¶ËÆäËâ≤","Ê∞£Âñò","ÊúâÈõúÈü≥","ÂëºÂê∏ÊúâËÅ≤","Âí≥ÂóΩ","Âí≥Ë°Ä","‰∏ÄÁõ¥Âí≥","ÊåÅÁ∫åÂí≥","ÂºµÂè£ÂëºÂê∏","È†∏‰º∏Èï∑","ÈºªÂ≠îÂºµÂ§ß","ÂëºÂê∏Âõ∞Èöæ","ÂëºÂê∏‰∏çÂà∞","‰∏çÂ§üÊ∞î","Ê∞î‰øÉ","ÂñòÊ∞î","Âñò","ÂñòÂæóÂæàÂéâÂÆ≥","ÁâôÈæàÂèëËìù","ÁâôÈæàÂèëÁ¥´","Ê∞îÂñò","ÂëºÂê∏ÊúâÂ£∞","Âí≥ÂóΩ","Âí≥Ë°Ä","‰∏ÄÁõ¥Âí≥","Âº†Âè£ÂëºÂê∏","È¢à‰º∏Èïø","ÈºªÂ≠îÂº†Â§ß"]},injury:{en:["bleeding","blood","bloody","blood coming out","wound","open wound","deep wound","laceration","gash","cut","slash","broken leg","broken bone","fractured","broken limb","broken paw","limping","cant put weight","not using leg","holding leg up","favoring leg","injured","hurt","trauma","injured leg","injured paw","swollen","swelling","lump","bump","bruise","bruised","puncture wound","bite wound","scratch","dislocated","out of place","joint problem","exposed bone","bone sticking out"],zh:["ÊµÅË°Ä","Âá∫Ë°Ä","ÊúâË°Ä","ÊµÅÁ∑äË°Ä","Ë°ÄÊµÅÂá∫‰æÜ","ÂÇ∑Âè£","ÈñãÊîæÊÄßÂÇ∑Âè£","Ê∑±ÂÇ∑Âè£","ÂàÄÂÇ∑","Ââ≤ÂÇ∑","Êñ∑ËÖø","È™®Êäò","È™®Ë£Ç","Êñ∑È™®","Áà™Êñ∑","Ë∑õË°å","ÂîîÊï¢Ë∏©","ÂîîÁî®ÈöªËÖ≥","Êä¨‰ΩèËÖ≥","ÂèóÂÇ∑","Êï¥Ë¶™","ÂâµÂÇ∑","ËÖ≥ÂèóÂÇ∑","Áà™ÂèóÂÇ∑","ËÖ´","ËÖ´ËÑπ","ËÖ´Ëµ∑","ÁòÄ","ÁòÄÂÇ∑","Âí¨ÂÇ∑","ÊäìÂÇ∑","Á©øÂà∫ÂÇ∑","ËÑ´Ëáº","Áßª‰Ωç","ÈóúÁØÄÂïèÈ°å","È™®È†≠Èú≤Âá∫","È™®È†≠Á™ÅÂá∫","ÊµÅË°Ä","Âá∫Ë°Ä","ÊúâË°Ä","‰º§Âè£","ÂºÄÊîæÊÄß‰º§Âè£","Ê∑±‰º§Âè£","ÂàÄ‰º§","Ââ≤‰º§","Êñ≠ËÖø","È™®Êäò","È™®Ë£Ç","Êñ≠È™®","Ë∑õË°å","‰∏çÊï¢Ë∏©","‰∏çÁî®ËÑö","Êä¨ÁùÄËÑö","Âèó‰º§","Âàõ‰º§","ËÑöÂèó‰º§","ËÇø","ËÇøËÉÄ","ËÇøËµ∑","ÁòÄ‰º§","Âí¨‰º§","Êäì‰º§","ËÑ±Ëáº","Áßª‰Ωç","ÂÖ≥ËäÇÈóÆÈ¢ò","È™®Â§¥Èú≤Âá∫"]},digestive:{en:["vomiting","throwing up","puking","vomit","sick","retching","vomiting blood","blood in vomit","dark vomit","diarrhea","loose stool","watery stool","bloody stool","blood in stool","not eating","wont eat","refusing food","no appetite","stopped eating","bloated","swollen belly","distended stomach","tight belly","hard stomach","stomach pain","abdominal pain","belly pain","tummy pain","drooling","excessive drooling","salivating","constipated","cant poop","straining","trying to poop","eating grass","eating strange things"],zh:["ÂòîÂêê","Âòî","‰ΩúÂòî","ÊÉ≥Âòî","ÂèçËÉÉ","ÂòîË°Ä","ÂêêË°Ä","ÂòîÂï°Ëâ≤","ËÖπÁÄâ","Â±ôÂòî","Â±ôÊ∞¥","Â±ôË°Ä","‰æøË°Ä","‰∏çÂêÉ","ÂîîÈ£ü","ÊãíÈ£ü","ÂÜáËÉÉÂè£","ÂÅúÊ≠¢ÈÄ≤È£ü","ËÖπËÑπ","ËÇöËÑπ","ËÇöÂ≠êËÑπ","ËÇöÂ≠êÁ°¨","ËÇöÂ≠êÂ§ß","ËÇöÂ≠êÁóõ","ËÇöÁóõ","ËÖπÁóõ","ËÉÉÁóõ","ÊµÅÂè£Ê∞¥","Âè£Ê∞¥Â§ö","‰∏çÂÅúÊµÅÂè£Ê∞¥","‰æøÁßò","Â±ôÂîîÂá∫","Áî®ÂäõÂ±ô","Â•ΩËæõËã¶Â±ô","È£üËçâ","È£üÊÄ™Âò¢","ÂëïÂêê","Âëï","‰ΩúÂëï","ÊÉ≥Âêê","ÂèçËÉÉ","ÂëïË°Ä","ÂêêË°Ä","ËÖπÊ≥ª","ÊãâËÇöÂ≠ê","ÊãâÊ∞¥","ÊãâË°Ä","‰æøË°Ä","‰∏çÂêÉ","‰∏çÂêÉ‰∏úË•ø","ÊãíÈ£ü","Ê≤°ËÉÉÂè£","ËÖπËÉÄ","ËÇöÂ≠êËÉÄ","ËÇöÂ≠êÁ°¨","ËÇöÂ≠êÂ§ß","ËÇöÂ≠êÁñº","ËÇöÂ≠êÁóõ","ËÖπÁóõ","ËÉÉÁñº","ÊµÅÂè£Ê∞¥","Âè£Ê∞¥Â§ö","‰æøÁßò","Êãâ‰∏çÂá∫","Áî®ÂäõÊãâ","ÂêÉËçâ","ÂêÉÂ•áÊÄ™ÁöÑ‰∏úË•ø"]},neurological:{en:["seizure","seizing","convulsion","convulsing","fit","fitting","shaking","trembling","tremors","shivering","twitching","paralyzed","cant move","cant stand","cant walk","legs gave out","disoriented","confused","dazed","lost","wandering","walking in circles","head tilt","tilting head","head pressing","blind","cant see","bumping into things","circling","pacing","restless","weakness","weak","wobbly","unsteady","staggering","loss of balance","falling over","tilting"],zh:["ÊäΩÊêê","ÊäΩÁ≠ã","ÁóôÊî£","Áôº‰Ωú","ÁôºÊäñ","Èúá","È°´Êäñ","Êäñ","‰∏çÂÅúÊäñ","Áô±Áòì","‰∏çËÉΩÂãï","‰∏çËÉΩ‰ºÅ","‰∏çËÉΩËµ∞","ËÖ≥Ëªü","Ëø∑Â§±ÊñπÂêë","Ê∑∑‰∫Ç","Á≥äÂ°ó","Â§±ÊñπÂêë","‰∫ÇË°å","Ë°åÂúà","È†≠ÂÅ¥","È†≠Ê≠™","È†≠ÊíûÁâÜ","Áõ≤","Áúã‰∏çË¶ã","ÊíûÂà∞Âò¢","Ë°å‰æÜË°åÂéª","‰∏çÂÅúË°å","‰∏çÂÆâ","ÁÑ°Âäõ","ËªüÂº±","ÊêñÊôÉ","‰ºÅÂîîÁ©©","Ë°åÂîîÁ©©","Â§±Âπ≥Ë°°","Ë∑åÂÄí","ÂÅ¥","ÊäΩÊêê","ÊäΩÁ≠ã","ÁóâÊåõ","Âèë‰Ωú","ÂèëÊäñ","Èúá","È¢§Êäñ","Êäñ","Áò´Áó™","‰∏çËÉΩÂä®","‰∏çËÉΩÁ´ô","‰∏çËÉΩËµ∞","ËÖøËΩØ","Ëø∑Â§±ÊñπÂêë","Ê∑∑‰π±","Á≥äÊ∂Ç","Â§±ÊñπÂêë","Ëµ∞Âúà","Â§¥‰æß","Â§¥Ê≠™","Â§¥ÊíûÂ¢ô","Áõ≤","Áúã‰∏çËßÅ","ÊíûÂà∞‰∏úË•ø","Ëµ∞Êù•Ëµ∞Âéª","‰∏çÂÅúËµ∞","‰∏çÂÆâ","Êó†Âäõ","ËΩØÂº±","ÊëáÊôÉ","Á´ô‰∏çÁ®≥","Ëµ∞‰∏çÁ®≥","Â§±Âπ≥Ë°°","Ë∑åÂÄí"]},pain:{en:["crying","whimpering","whining","yelping","howling","pain","in pain","painful","hurts","hurt","sore","screaming","screeching","shrieking","aggressive","biting","snapping","growling when touched","sensitive","touchy","flinches","pulls away","restless","cant settle","pacing","cant get comfortable","hiding","withdrawn","acting strange","licking","biting at","chewing at area"],zh:["Âì≠Ê≥£","ÂóöÂíΩ","ÂìÄÈ≥¥","ÂìÄÂè´","Âó•Âè´","Áóõ","Â•ΩÁóõ","ÁóõËã¶","Áñº","ÁóõÊ•ö","Â∞ñÂè´","ÊÖòÂè´","Âè´","ÊîªÊìäÊÄß","Âí¨","ÊÉ≥Âí¨","Êë∏Â∞±Âòà","ÊïèÊÑü","‰∏ÄÊë∏Â∞±Á∏Æ","ÈÅøÈñã","‰∏çÂÆâ","ÂÆâÂÆöÂîîÂà∞","Ë°å‰æÜË°åÂéª","ÂîîËàíÊúç","Êî∂Âüã","Ë∫≤Ëóè","Ë°åÁÇ∫ÊÄ™","Ëàî","Âí¨‰Ωè","ÂïÉ","Âì≠Ê≥£","ÂëúÂíΩ","ÂìÄÈ∏£","ÂìÄÂè´","ÂöéÂè´","Áóõ","Â•ΩÁóõ","ÁóõËã¶","Áñº","ÁóõÊ•ö","Â∞ñÂè´","ÊÉ®Âè´","Âè´","ÊîªÂáªÊÄß","Âí¨","ÊÉ≥Âí¨","Êë∏Â∞±Âè´","ÊïèÊÑü","‰∏ÄÊë∏Â∞±Áº©","ÈÅøÂºÄ","‰∏çÂÆâ","ÂÆâÂÆö‰∏ç‰∫Ü","Ëµ∞Êù•Ëµ∞Âéª","‰∏çËàíÊúç","Ë∫≤Ëóè","Ë°å‰∏∫ÊÄ™","Ëàî","Âí¨ÁùÄ","ÂïÉ"]}};function G(t){const o=t.toLowerCase(),n=[],g=[];return Object.entries(gt).forEach(([k,p])=>{const A=[...p.en,...p.zh].filter(a=>o.includes(a.toLowerCase()));A.length>0&&(n.push(k),g.push(...A))}),n.length===0?"General emergency":n.includes("critical")?`CRITICAL: ${g.slice(0,3).join(", ")}`:g.slice(0,3).join(", ")}async function pt(t,o="en",n){try{const g=new AbortController,k=setTimeout(()=>g.abort(),12e3),p=await fetch("/api/voice/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:t,language:o}),signal:g.signal});if(clearTimeout(k),p.ok){const d=await p.json();if(d.success&&d.analysis){const{severity:A,primarySymptoms:a,confidence:E}=d.analysis,N=A.toUpperCase(),y=Math.round(E*100);if(a&&a.length>0){const T=a.slice(0,3).map(L=>L.symptom).join(", ");return`${N} (${y}%): ${T}`}return`${N} (${y}%)`}}return p.status===503?n==null||n("AI service not configured"):p.status===429?n==null||n("Rate limit exceeded"):p.status===504?n==null||n("AI analysis timeout"):n==null||n("AI service unavailable"),console.log("DeepSeek not available, using keyword-based analysis"),G(t)}catch(g){return g instanceof Error&&g.name==="AbortError"?n==null||n("AI analysis timeout"):n==null||n("Network error"),console.error("AI analysis error, using fallback:",g),G(t)}}function ht({onTranscriptComplete:t,language:o="en"}){const{t:n}=ue(),{toast:g}=ge(),[k,p]=l.useState(!1),[d,A]=l.useState(""),[a,E]=l.useState(!0),[N,y]=l.useState(null),[T,L]=l.useState(!1),j=l.useRef(null);l.useEffect(()=>{const x=window.SpeechRecognition||window.webkitSpeechRecognition;if(!x){E(!1),y("Voice recording is not supported in this browser. Please use Chrome, Safari, or Edge.");return}const h=new x;return h.continuous=!0,h.interimResults=!0,o==="zh-HK"||o==="zh"?h.lang="zh-HK":o==="zh-CN"?h.lang="zh-CN":h.lang="en-US",h.onstart=()=>{p(!0),y(null)},h.onresult=w=>{let q="",H="";for(let f=w.resultIndex;f<w.results.length;f++){const K=w.results[f][0].transcript;w.results[f].isFinal?H+=K+" ":q+=K}A(f=>f+H||q)},h.onerror=w=>{console.error("Speech recognition error:",w.error),w.error==="not-allowed"?y("Microphone access denied. Please allow microphone access and try again."):w.error==="no-speech"?y("No speech detected. Please speak clearly and try again."):y(`Error: ${w.error}`),p(!1)},h.onend=()=>{p(!1)},j.current=h,()=>{j.current&&j.current.stop()}},[o]);const V=()=>{if(j.current){A(""),y(null);try{j.current.start()}catch(x){console.error("Failed to start recording:",x),y("Failed to start recording. Please try again.")}}},U=async()=>{if(j.current)if(j.current.stop(),p(!1),d.trim()){L(!0);try{const x=await pt(d,o,h=>{g({title:n("voice_recorder.using_offline_analysis","Using offline analysis"),description:n("voice_recorder.fallback_message","AI analysis unavailable. Using enhanced keyword detection."),variant:"default"})});t(d,x),g({title:n("voice_recorder.success","Voice recording complete"),description:n("voice_recorder.success_description","Your symptoms have been analyzed successfully")})}catch(x){console.error("Analysis failed:",x);const h=G(d);t(d,h),g({title:n("voice_recorder.analysis_error","Analysis completed"),description:n("voice_recorder.fallback_used","Using offline symptom detection."),variant:"default"})}finally{L(!1)}}else y(n("voice_recorder.no_transcript","No speech detected. Please try again.")),g({title:n("voice_recorder.error_no_speech","No speech detected"),description:n("voice_recorder.error_no_speech_description","Please speak clearly and try recording again."),variant:"destructive"})};return a?e.jsx(ee,{className:k?"border-red-500 bg-red-50 dark:bg-red-950":"",children:e.jsx(te,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("span",{className:"absolute -right-1 -top-1 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),e.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:n("voice_recorder.recording","Recording... Speak now")})]}):d?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:n("voice_recorder.recorded","Voice recorded successfully")})]}):null}),k?e.jsxs(M,{onClick:U,variant:"destructive","data-testid":"button-stop-recording",children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),n("voice_recorder.stop","Stop")]}):e.jsxs(M,{onClick:V,variant:"default",className:"bg-red-600 hover:bg-red-700","data-testid":"button-start-recording",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),n("voice_recorder.start","Start Recording")]})]}),!d&&!k&&e.jsxs(dt,{children:[e.jsxs(mt,{className:"flex items-center gap-1.5 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx(nt,{className:"h-3.5 w-3.5"}),n("voice_recorder.tip_short","Speak clearly ‚Äî we'll analyze and guide you automatically")]}),e.jsx(ut,{className:"pt-1.5",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:["üí° ",n("voice_recorder.tip","Tip: Speak clearly and describe your pet's symptoms. The system will automatically analyze and categorize the emergency.")]})})})]}),d&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3","data-testid":"voice-transcript",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:n("voice_recorder.transcript","Transcript:")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:d}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:T?e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(at,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:n("voice_recorder.analyzing","Analyzing with AI...")})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("voice_recorder.analyzed","Analyzed symptoms:")," ",e.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:G(d)})]})})]}),N&&e.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 dark:text-red-400 text-xs",children:[e.jsx(se,{className:"h-3.5 w-3.5"}),e.jsx("p",{children:N})]})]})})}):e.jsx(ee,{className:"border-red-200 dark:border-red-800",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("p",{className:"text-sm",children:N})]})})})}const X=[{key:"unconscious",en:"Unconscious / Unresponsive",zh:"ÊòèËø∑ / Â§±ÂéªÊÑèË≠ò"},{key:"breathing",en:"Not breathing / Severe difficulty breathing",zh:"ÂëºÂê∏ÂÅúÊ≠¢ / Âö¥ÈáçÂëºÂê∏Âõ∞Èõ£"},{key:"seizure",en:"Seizure / Convulsions",zh:"Áô≤ÁôáÁôº‰Ωú / ÊäΩÊêê"},{key:"choking",en:"Choking / Airway blocked",zh:"ÂìΩÂ°û / Ê∞£ÈÅìÈòªÂ°û"},{key:"bleeding",en:"Severe bleeding / Hemorrhage",zh:"Âö¥ÈáçÂá∫Ë°Ä / ÊµÅË°Ä‰∏çÊ≠¢"},{key:"trauma",en:"Hit by vehicle / Major trauma",zh:"ËªäÁ¶çÊíûÊìä / Âö¥ÈáçÂ§ñÂÇ∑"},{key:"poisoning",en:"Poisoning / Toxic ingestion",zh:"‰∏≠ÊØí / Ë™§È£üÊØíÁâ©"},{key:"unable_stand",en:"Collapse / Cannot stand",zh:"ÂÄí‰∏ã / ÁÑ°Ê≥ïÁ´ôÁ´ã"},{key:"swollen",en:"Bloated abdomen / Distended",zh:"ËÖπÈÉ®ËÖ´ËÑπ / ËÖπËÑπ"},{key:"pain",en:"Severe pain / Distress",zh:"ÂäáÁÉàÁñºÁóõ / ÁóõËã¶‰∏çÂÆâ"},{key:"vomiting",en:"Repeated vomiting",zh:"ÊåÅÁ∫åÂòîÂêê"},{key:"diarrhea",en:"Severe diarrhea / Blood in stool",zh:"Âö¥ÈáçËÖπÁÄâ / ‰æøË°Ä"},{key:"broken_bone",en:"Fracture / Cannot move limb",zh:"È™®Êäò / ËÇ¢È´îÁÑ°Ê≥ïÁßªÂãï"},{key:"eye_injury",en:"Eye injury / Sudden blindness",zh:"ÁúºÈÉ®ÂèóÂÇ∑ / Á™ÅÁÑ∂Â§±Êòé"},{key:"not_eating",en:"Not eating/drinking for 24+ hours",zh:"24Â∞èÊôÇ‰ª•‰∏äÊãíÁµïÈÄ≤È£üÈ£≤Ê∞¥"},{key:"other",en:"Other concerning symptoms",zh:"ÂÖ∂‰ªñ‰ª§‰∫∫ÊìîÊÜÇÁóáÁãÄ"}];function zt(){var le,de;const{t,language:o}=ue(),n=D({symptom:u().min(1,t("validation.symptom_required","Please select at least one symptom")),petId:u().optional(),petSpecies:u().optional(),petBreed:u().optional(),petAge:R().optional(),userId:u().optional()}).refine(s=>s.petId?!0:!!s.petSpecies,{message:t("validation.pet_required","Please select a pet or provide pet details"),path:["petSpecies"]}),g=D({locationLatitude:R().optional(),locationLongitude:R().optional(),manualLocation:u().optional(),regionId:u().optional()}).refine(s=>s.locationLatitude!==void 0&&s.locationLongitude!==void 0||s.manualLocation&&s.manualLocation.length>0||s.regionId&&s.regionId.length>0,{message:t("validation.location_required","Please provide a location (GPS, manual entry, or select a district)"),path:["manualLocation"]}),k=D({contactName:u().min(2,t("validation.name_required","Contact name is required")),contactPhone:u().min(6,t("validation.phone_required","Please enter a valid phone number"))}),p=D({symptom:u().min(1,t("validation.symptom_required","Please select at least one symptom")),locationLatitude:R().optional(),locationLongitude:R().optional(),manualLocation:u().optional(),regionId:u().optional(),contactName:u().min(2,t("validation.name_required","Contact name is required")),contactPhone:u().min(6,t("validation.phone_required","Please enter a valid phone number")),petId:u().optional(),petSpecies:u().optional(),petBreed:u().optional(),petAge:R().optional(),userId:u().optional()}),{user:d,isLoading:A}=Ne(),[a,E]=l.useState(1),[N,y]=l.useState([]),[T,L]=l.useState(""),[j,V]=l.useState(!1),[U,x]=l.useState(null),[h,w]=l.useState(0),[q,H]=l.useState(!1),[f,K]=l.useState(null),[ne,pe]=l.useState(""),[he,ye]=l.useState(""),[xe,be]=l.useState(!1),[ae,ie]=l.useState("+852"),{toast:Y}=ge(),[,fe]=Ce(),S=d==null?void 0:d.id,i=Pe({shouldUnregister:!1,defaultValues:{symptom:"",manualLocation:"",regionId:void 0,contactName:"",contactPhone:"",userId:S,petSpecies:void 0,petBreed:void 0,petAge:void 0}});l.useEffect(()=>{S&&i.setValue("userId",S)},[S,i]);const{data:C,isSuccess:oe,isFetching:ce}=W({queryKey:[`/api/users/${S}`],refetchOnMount:"always",refetchOnWindowFocus:!0,enabled:!!S}),{data:F=[],isLoading:yt}=W({queryKey:[`/api/users/${S}/pets`],enabled:a===1&&!!S});l.useEffect(()=>{a===2&&!j&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(s=>{i.setValue("locationLatitude",s.coords.latitude),i.setValue("locationLongitude",s.coords.longitude),V(!0),x(null)},s=>{x(t("emergency.gps.error","Unable to detect location")),V(!1)}):x(t("emergency.gps.not_supported","Geolocation is not supported by this browser")))},[a,j,h,i,t]);const{data:ve=[]}=W({queryKey:["/api/regions"],enabled:a===2}),{data:Q=[]}=W({queryKey:["/api/countries"],enabled:a===3});l.useEffect(()=>{if(a===3&&oe&&!ce&&C&&!q&&Q.length>0&&(!f||f.username!==C.username||f.phone!==C.phone)){const r=C.name||C.username||"";if(i.setValue("contactName",r),C.phone){const c=C.phone.trim();if(c.startsWith("+")){const b=Q.map(m=>m.phonePrefix).filter(Boolean).sort((m,$)=>$.length-m.length).find(m=>c.startsWith(m));b?(ie(b),i.setValue("contactPhone",c.substring(b.length).trim())):i.setValue("contactPhone",c)}else i.setValue("contactPhone",c)}K({username:C.username,phone:C.phone})}a!==3&&(q&&H(!1),f&&K(null))},[a,i,C,oe,ce,q,f,Q]);const Z=Ze({mutationFn:async s=>await(await Ye("POST","/api/emergency-requests",s)).json(),onSuccess:(s,r)=>{Fe.invalidateQueries({queryKey:[`/api/users/${S}/emergency-requests`]}),Qe.trackEmergencyRequest({petType:r.petSpecies||"unknown",region:s.regionId}),Y({title:t("emergency.submit.success","Emergency request submitted!"),description:t("emergency.submit.finding","Finding nearby clinics...")}),fe(`/emergency-results/${s.id}`)},onError:s=>{Y({title:t("error","Error"),description:s.message,variant:"destructive"})}}),je=s=>{y(r=>{const c=r.includes(s)?r.filter(b=>b!==s):[...r,s];let v=c.filter(b=>b!=="other").map(b=>{const m=X.find($=>$.key===b);return o==="zh-HK"?m==null?void 0:m.zh:m==null?void 0:m.en}).join(", ");return c.includes("other")&&T&&(v=v?`${v}, ${T}`:T),i.setValue("symptom",v||""),c})},we=async s=>{try{if(a===1)await n.parseAsync(s),E(2);else if(a===2)await g.parseAsync(s),E(3);else if(a===3){await k.parseAsync(s);const r=i.getValues(),c=r.contactPhone?`${ae}${r.contactPhone}`:r.contactPhone,v={...r,contactPhone:c,voiceTranscript:ne||void 0,aiAnalyzedSymptoms:he||void 0,isVoiceRecording:xe};await p.parseAsync(v),Z.mutate(v)}}catch(r){r instanceof Ue&&r.errors.forEach(c=>{c.path[0]&&i.setError(c.path[0],{message:c.message})})}},Se=()=>{a>1&&E(a-1)},ke=o==="zh-HK"?[{question:"ÂØµÁâ©Á∑äÊÄ•ÊÉÖÊ≥ÅÊôÇÊáâË©≤ÊÄéÈ∫ºËæ¶Ôºü",answer:"Â¶ÇÊûúÊÇ®ÁöÑÂØµÁâ©Âá∫ÁèæÁ∑äÊÄ•ÊÉÖÊ≥ÅÔºåË´ã‰ΩøÁî®PetSOSÁ´ãÂç≥ËÅØÁπ´24Â∞èÊôÇÂãïÁâ©ÈÜ´Èô¢„ÄÇÊàëÂÄëÁöÑÁ≥ªÁµ±ÂèØ‰ª•Âú®3ÂÄãÊ≠•È©üÂÖßÈÄöÁü•Â§öÂÆ∂Ë®∫ÊâÄÔºåÂåÖÊã¨ÈÅ∏ÊìáÁóáÁãÄ„ÄÅÊèê‰æõ‰ΩçÁΩÆÂíåËÅØÁµ°ÊñπÂºè„ÄÇ"},{question:"PetSOSÂ¶Ç‰ΩïÈÅã‰ΩúÔºü",answer:"PetSOSÈÄöÈÅé3Ê≠•È©üÂπ´Âä©ÊÇ®Âø´ÈÄüËÅØÁπ´24Â∞èÊôÇÁç∏ÈÜ´Ë®∫ÊâÄÔºö1) ÈÅ∏ÊìáÁóáÁãÄÊàñ‰ΩøÁî®AIË™ûÈü≥Ëº∏ÂÖ• 2) ÂàÜ‰∫´ÊÇ®ÁöÑGPS‰ΩçÁΩÆ 3) Êèê‰æõËÅØÁµ°Ë≥áË®ä„ÄÇÊàëÂÄëÊúÉÈÄèÈÅéWhatsAppÂç≥ÊôÇÂª£Êí≠ÊÇ®ÁöÑÊ±ÇÂä©Ë®äÊÅØÁµ¶ÈôÑËøëÁöÑË®∫ÊâÄ„ÄÇ"},{question:"‰ΩøÁî®PetSOSÈúÄË¶ÅÁôªÂÖ•ÂóéÔºü",answer:"‰∏çÈúÄË¶ÅÔºÅÁ∑äÊÄ•ÊÉÖÊ≥Å‰∏ãÂèØ‰ª•ÂåøÂêç‰ΩøÁî®PetSOS„ÄÇ‰ΩÜÂ¶ÇÊûúÊÇ®Â∑≤ÁôªË®òÂØµÁâ©Ë≥áÊñôÔºåÁ≥ªÁµ±ÂèØ‰ª•Ëá™ÂãïÂ°´ÂØ´Ë≥áË®äÔºåËÆìÊ±ÇÂä©ÈÅéÁ®ãÊõ¥Âø´ÈÄü„ÄÇ"},{question:"PetSOSË¶ÜËìãÈ¶ôÊ∏ØÂì™‰∫õÂú∞ÂçÄÔºü",answer:"PetSOSË¶ÜËìãÈ¶ôÊ∏ØÊâÄÊúâÂú∞ÂçÄÔºåÂåÖÊã¨È¶ôÊ∏ØÂ≥∂„ÄÅ‰πùÈæçÂíåÊñ∞Áïå„ÄÇÊàëÂÄëÁöÑGPSÁ≥ªÁµ±ÊúÉËá™ÂãïÊâæÂá∫Ë∑ùÈõ¢ÊÇ®ÊúÄËøëÁöÑ24Â∞èÊôÇÂãïÁâ©ÈÜ´Èô¢„ÄÇ"},{question:"Â¶Ç‰ΩïÁü•ÈÅìÂì™‰∫õÁóáÁãÄÊòØÁ∑äÊÄ•ÊÉÖÊ≥ÅÔºü",answer:"Âö¥ÈáçÁóáÁãÄÂåÖÊã¨ÔºöÊòèËø∑ÊàñÂ§±ÂéªÊÑèË≠ò„ÄÅÂëºÂê∏Âõ∞Èõ£„ÄÅÁô≤ÁôáÁôº‰Ωú„ÄÅÂö¥ÈáçÂá∫Ë°Ä„ÄÅ‰∏≠ÊØíÁ≠â„ÄÇÂ¶ÇÊûúÊÇ®‰∏çÁ¢∫ÂÆöÔºåË´ãÁ´ãÂç≥ËÅØÁπ´Áç∏ÈÜ´„ÄÇPetSOSÂèØ‰ª•Âπ´Âä©ÊÇ®Âø´ÈÄüËÅØÁµ°Â§öÂÆ∂24Â∞èÊôÇË®∫ÊâÄ„ÄÇ"}]:[{question:"What should I do in a pet emergency?",answer:"If your pet is experiencing an emergency, use PetSOS to immediately contact 24-hour animal hospitals. Our system notifies multiple clinics in 3 simple steps: select symptoms, provide location, and share contact information."},{question:"How does PetSOS work?",answer:"PetSOS helps you connect with 24-hour veterinary clinics in 3 steps: 1) Select symptoms or use AI voice input 2) Share your GPS location 3) Provide contact details. We instantly broadcast your emergency request to nearby clinics via WhatsApp."},{question:"Do I need to login to use PetSOS?",answer:"No! You can use PetSOS anonymously during emergencies. However, if you have registered pet profiles, the system can auto-fill information to make the process even faster."},{question:"Which areas does PetSOS cover in Hong Kong?",answer:"PetSOS covers all regions of Hong Kong including Hong Kong Island, Kowloon, and New Territories. Our GPS system automatically finds the nearest 24-hour animal hospitals to your location."},{question:"How do I know if a symptom is an emergency?",answer:"Critical symptoms include: unconsciousness, difficulty breathing, seizures, severe bleeding, poisoning, and trauma. If unsure, contact a vet immediately. PetSOS can help you quickly reach multiple 24-hour clinics."}];return e.jsxs(e.Fragment,{children:[e.jsx(ze,{title:o==="zh-HK"?"Á∑äÊÄ•Ê±ÇÂä© - PetSOS | Âç≥ÊôÇËÅØÁµ°24Â∞èÊôÇÂãïÁâ©ÈÜ´Èô¢":"Emergency Pet Care - PetSOS | Connect with 24-Hour Vets Instantly",description:o==="zh-HK"?"ÊØõÂ≠©Á∑äÊÄ•ÊÉÖÊ≥ÅÔºü3Ê≠•È©üÂç≥ÊôÇÈÄöÁü•È¶ôÊ∏Ø24Â∞èÊôÇÁç∏ÈÜ´Ë®∫ÊâÄ„ÄÇÊîØÊè¥Ë™ûÈü≥Ëº∏ÂÖ•„ÄÅAIÂàÜÊûêÁóáÁãÄ„ÄÅWhatsAppÂª£Êí≠Ê±ÇÂä©„ÄÇÊ∏ØÂ≥∂„ÄÅ‰πùÈæç„ÄÅÊñ∞ÁïåÂÖ®Ë¶ÜËìãÔºåÊúÄÂø´Áç≤ÂæóÂ∞àÊ•≠ÂçîÂä©„ÄÇ":"Pet emergency? Connect with 24-hour veterinary clinics in Hong Kong in 3 simple steps. Voice input, AI symptom analysis, instant WhatsApp broadcast. Fast professional help across Hong Kong Island, Kowloon, and New Territories.",keywords:o==="zh-HK"?"ÂØµÁâ©Á∑äÊÄ•, Á∑äÊÄ•Ê±ÇÂä©Ë°®Ê†º, Ë™ûÈü≥Ëº∏ÂÖ•, AIÂàÜÊûê, WhatsAppÂª£Êí≠, 24Â∞èÊôÇÁç∏ÈÜ´, È¶ôÊ∏ØÂãïÁâ©ÈÜ´Èô¢":"pet emergency form, voice input, AI symptom analysis, WhatsApp broadcast, 24-hour vet Hong Kong, emergency animal hospital",canonical:"https://petsos.site/emergency",language:o}),e.jsx(B,{data:_e(o),id:"schema-emergency-service"}),e.jsx(B,{data:Ie(ke),id:"schema-faq"}),e.jsx(B,{data:Ae(o),id:"schema-howto-emergency"}),e.jsx(B,{data:Te([{name:o==="zh-HK"?"‰∏ªÈ†Å":"Home",url:"https://petsos.site/"},{name:o==="zh-HK"?"Á∑äÊÄ•Ê±ÇÂä©":"Emergency",url:"https://petsos.site/emergency"}]),id:"schema-breadcrumb-emergency"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto pt-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t("emergency.step_indicator","Step {step} of 3").replace("{step}",String(a))}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a===1&&t("emergency.time_step1","~30s"),a===2&&t("emergency.time_step2","~15s"),a===3&&t("emergency.time_step3","~10s")]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${a/3*100}%`}})})]}),e.jsxs(ee,{className:"border-red-200 dark:border-red-900",children:[e.jsxs(Oe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-6 w-6 text-red-600"}),e.jsx(Ee,{className:"text-2xl",children:t("emergency.title","Emergency Pet Care")})]}),e.jsx(Le,{})]}),e.jsxs(qe,{children:[a===1&&t("emergency.step1.title","What's happening?"),a===2&&t("emergency.step2.title","Where are you?"),a===3&&t("emergency.step3.title","How can clinics reach you?")]})]}),e.jsx(te,{children:e.jsx(He,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(we),className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[S&&F.length>0&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:e.jsx(P,{control:i.control,name:"petId",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:t("emergency.select_pet","Which pet is this for?")}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:t("emergency.select_pet_desc","Select your pet for faster emergency help")}),e.jsx(O,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:F.map(r=>{const c=s.value===r.id;return e.jsxs("button",{type:"button",onClick:()=>s.onChange(c?void 0:r.id),className:`
                                          p-3 rounded-lg border-2 transition-all text-left text-sm
                                          ${c?"border-blue-600 bg-blue-100 dark:bg-blue-900 shadow-md":"border-blue-200 dark:border-blue-700 hover:border-blue-400 bg-white dark:bg-gray-800"}
                                        `,"data-testid":`pet-card-${r.id}`,children:[e.jsx("div",{className:"font-semibold truncate",children:r.name}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:r.breed||r.species})]},r.id)})})}),e.jsx(I,{})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["üé§ ",t("emergency.voice_option","Too panicked to type? Use voice instead")]})}),e.jsx(ht,{language:o,onTranscriptComplete:(s,r)=>{pe(s),ye(r),be(!0),i.setValue("symptom",r),Y({title:t("emergency.voice_recorded","Voice recorded successfully"),description:t("emergency.voice_analyzed","Your symptoms have been analyzed and will be sent to clinics")})}})]}),ne&&e.jsxs("div",{className:"flex items-center gap-4 my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("emergency.or_select_manually","Or select symptoms manually")}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsx(P,{control:i.control,name:"symptom",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-xl font-bold text-red-700 dark:text-red-400",children:t("symptoms.urgent","What's happening to your pet right now?")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("symptoms.select_all","Tap all symptoms that apply")}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:X.map(r=>{const c=N.includes(r.key),v=o==="zh-HK"?r.zh:r.en;return e.jsx("button",{type:"button",onClick:()=>je(r.key),className:`
                                      px-4 py-3 text-left rounded-lg border-2 transition-all
                                      ${c?"border-red-500 bg-red-50 dark:bg-red-950 text-red-900 dark:text-red-100":"border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700"}
                                    `,"data-testid":`symptom-${r.key}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`
                                        w-5 h-5 rounded-full border-2 flex items-center justify-center
                                        ${c?"border-red-500 bg-red-500":"border-gray-300 dark:border-gray-600"}
                                      `,children:c&&e.jsx(it,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:v})]})},r.key)})}),N.includes("other")&&e.jsx("div",{children:e.jsx(Je,{value:T,onChange:r=>{L(r.target.value);const c=N.filter(b=>b!=="other").map(b=>{const m=X.find($=>$.key===b);return o==="zh-HK"?m==null?void 0:m.zh:m==null?void 0:m.en}).join(", "),v=c?`${c}, ${r.target.value}`:r.target.value;i.setValue("symptom",v)},placeholder:t("symptoms.describe","Describe the symptoms..."),className:"min-h-[80px] text-base","data-testid":"input-other-symptom"})}),e.jsx("input",{type:"hidden",...s})]}),e.jsx(I,{})]})}),(!S||F.length===0||!i.watch("petId"))&&e.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t("emergency.pet_details","Pet Information")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("emergency.pet_details_desc","Tell us about your pet so clinics can prepare")})]}),e.jsx(P,{control:i.control,name:"petSpecies",render:({field:s})=>e.jsxs(z,{children:[e.jsxs(_,{children:[t("pets.species","Species")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>s.onChange("dog"),className:`
                                      p-4 rounded-lg border-2 transition-all font-medium text-base
                                      ${s.value==="dog"?"border-blue-500 bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"}
                                    `,"data-testid":"button-species-dog",children:["üêï ",t("pets.dog","Dog")]}),e.jsxs("button",{type:"button",onClick:()=>s.onChange("cat"),className:`
                                      p-4 rounded-lg border-2 transition-all font-medium text-base
                                      ${s.value==="cat"?"border-blue-500 bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"}
                                    `,"data-testid":"button-species-cat",children:["üê± ",t("pets.cat","Cat")]})]})}),e.jsx(I,{})]})}),e.jsx(P,{control:i.control,name:"petBreed",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{children:t("pets.breed","Breed")}),e.jsx(O,{children:e.jsx(Xe,{species:i.watch("petSpecies")||"",value:s.value??"",onChange:s.onChange,placeholder:t("pets.breed_placeholder","Select or type breed..."),testId:"combobox-pet-breed"})}),e.jsx(Ke,{className:"text-xs text-muted-foreground",children:o==="en"?"üí° Can't find your pet's breed? No worries! Just type it in and press Enter.":"üí° Êâæ‰∏çÂà∞ÂìÅÁ®ÆÔºüÊ≤íÈóú‰øÇÔºÅÁõ¥Êé•Ëº∏ÂÖ•ÁÑ∂ÂæåÊåâEnterÂç≥ÂèØ„ÄÇ"}),e.jsx(I,{})]})}),e.jsx(P,{control:i.control,name:"petAge",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{children:t("pets.age","Age (years)")}),e.jsx(O,{children:e.jsx(J,{...s,type:"number",value:s.value??"",onChange:r=>s.onChange(r.target.value?parseInt(r.target.value):void 0),placeholder:t("pets.age_placeholder","e.g., 3"),"data-testid":"input-pet-age"})}),e.jsx(I,{})]})})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx(Re,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsx("div",{className:"flex-1",children:j?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:t("emergency.step2.detected","Location detected")}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300","data-testid":"text-gps-status",children:[(le=i.watch("locationLatitude"))==null?void 0:le.toFixed(4),", ",(de=i.watch("locationLongitude"))==null?void 0:de.toFixed(4)]})]}):U?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900 dark:text-red-100",children:t("emergency.gps.unavailable","GPS unavailable")}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:t("emergency.gps.manual","Please enter location manually below")}),e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>{x(null),V(!1),w(s=>s+1)},className:"mt-2","data-testid":"button-retry-gps",children:t("emergency.step2.retry","Retry GPS")})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:t("emergency.step2.detecting","Detecting your location...")}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:t("emergency.step2.nearest","We'll find the nearest 24-hour clinics")})]})})]}),e.jsx(P,{control:i.control,name:"regionId",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step2.select_district","Select District")}),e.jsxs(Ve,{onValueChange:s.onChange,value:s.value||"",children:[e.jsx(O,{children:e.jsx($e,{className:"text-lg","data-testid":"select-region",children:e.jsx(Me,{placeholder:t("emergency.step2.district_placeholder","Choose your district...")})})}),e.jsx(De,{children:ve.map(r=>e.jsx(We,{value:r.id,"data-testid":`region-option-${r.id}`,children:o==="zh-HK"?r.nameZh:r.nameEn},r.id))})]}),e.jsx(I,{})]})}),e.jsxs("div",{className:"relative flex items-center my-4",children:[e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"flex-shrink mx-4 text-gray-500 dark:text-gray-400 text-sm",children:t("common.or","OR")}),e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"})]}),e.jsx(P,{control:i.control,name:"manualLocation",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg",children:t("emergency.step2.manual_label","Enter specific location")}),e.jsx(O,{children:e.jsx(J,{...s,value:s.value||"",placeholder:t("emergency.step2.placeholder","e.g., Central, Hong Kong Island"),className:"text-lg","data-testid":"input-manual-location"})}),e.jsx(I,{})]})})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(P,{control:i.control,name:"contactName",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step3.name","Your Name")}),e.jsx(O,{children:e.jsx(J,{...s,onChange:r=>{s.onChange(r),H(!0)},placeholder:t("emergency.step3.name_placeholder","Full name"),className:"text-lg","data-testid":"input-contact-name",autoFocus:!0})}),e.jsx(I,{})]})}),e.jsx(P,{control:i.control,name:"contactPhone",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step3.phone","Phone Number")}),e.jsx(O,{children:e.jsx(Be,{value:s.value,onChange:r=>{s.onChange(r),H(!0)},countryCode:ae,onCountryCodeChange:ie,placeholder:t("emergency.step3.phone_placeholder","1234 5678"),testId:"input-contact-phone"})}),e.jsx(I,{})]})}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsx(Ge,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:t("emergency.step3.clinic_contact","Clinics will contact you at this number to confirm availability")})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[a>1&&e.jsxs(M,{type:"button",variant:"outline",size:"lg",onClick:Se,className:"flex-1","data-testid":"button-back",children:[e.jsx(ct,{className:"mr-2 h-5 w-5"}),t("button.previous","Back")]}),e.jsx(M,{type:"submit",size:"lg",className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-lg font-semibold py-6",disabled:Z.isPending,"data-testid":"button-next",children:a===3?Z.isPending?t("button.submitting","Submitting..."):t("button.submit","Find Clinics"):e.jsxs(e.Fragment,{children:[t("button.next","Next"),e.jsx(ot,{className:"ml-2 h-5 w-5"})]})})]})]})})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("app.disclaimer","‚ö†Ô∏è PetSOS provides emergency guidance only and is not medical advice. If in doubt, contact a vet immediately.")})})]})})]})}export{zt as default};
