import{u as Q,r as i,h as T,V as f,j as a,S as Y,X as _,B as m,x as J,I as ee,al as A,J as ae,K as te,N as se,O as re,P as C,aL as ne,aM as le,aN as I,a_ as ie,a$ as de,C as H,v as F,b as z,w as oe,M as P,R as ce}from"./index-yGPiJpIr.js";import{B as o}from"./badge-4zSkoC7y.js";import{S as E}from"./skeleton-DdmbE3wx.js";import{C as ge,a as he,b as me}from"./collapsible-OjD99U5Y.js";import{A as xe}from"./arrow-left-BVTF3Tl5.js";import{B as ue}from"./building-2-Bk6ymILd.js";import{S as ye}from"./search-DPDD1EGd.js";import{F as be}from"./filter-DaTYLTkf.js";import{N as pe}from"./navigation-Dxq60WD7.js";import{C as fe}from"./circle-check-D4zmYIzY.js";import{S as je}from"./stethoscope-Y56DkLQX.js";import{M as R}from"./message-circle-DqTg9Vop.js";import"./index-C-LwW-wl.js";const j=[{key:"imagingCT",labelEn:"CT Scan",labelZh:"CTæƒæ",category:"imaging",type:"boolean"},{key:"imagingMRI",labelEn:"MRI",labelZh:"MRIç£åŠ›å…±æŒ¯",category:"imaging",type:"boolean"},{key:"imagingXray",labelEn:"X-Ray",labelZh:"Xå…‰",category:"imaging",type:"boolean"},{key:"imagingUS",labelEn:"Ultrasound",labelZh:"è¶…è²æ³¢",category:"imaging",type:"boolean"},{key:"bloodBankAccess",labelEn:"Blood Bank",labelZh:"è¡€åº«",category:"emergency",type:"string"},{key:"bloodTransfusion",labelEn:"Blood Transfusion",labelZh:"è¼¸è¡€æœå‹™",category:"emergency",type:"boolean"},{key:"icuLevel",labelEn:"ICU",labelZh:"æ·±åˆ‡æ²»ç™‚éƒ¨",category:"emergency",type:"string"},{key:"ventilator",labelEn:"Ventilator",labelZh:"å‘¼å¸æ©Ÿ",category:"emergency",type:"boolean"},{key:"oxygenTherapy",labelEn:"Oxygen Therapy",labelZh:"æ°§æ°£æ²»ç™‚",category:"emergency",type:"boolean"},{key:"sxEmergencySoft",labelEn:"Emergency Surgery",labelZh:"ç·Šæ€¥æ‰‹è¡“",category:"surgery",type:"boolean"},{key:"sxEmergencyOrtho",labelEn:"Ortho Surgery",labelZh:"éª¨ç§‘æ‰‹è¡“",category:"surgery",type:"boolean"},{key:"inHouseLab",labelEn:"In-House Lab",labelZh:"é™¢å…§åŒ–é©—",category:"other",type:"boolean"},{key:"endoscopy",labelEn:"Endoscopy",labelZh:"å…§çªºé¡",category:"other",type:"boolean"},{key:"dialysis",labelEn:"Dialysis",labelZh:"æ´—è…æœå‹™",category:"other",type:"boolean"},{key:"parking",labelEn:"Parking",labelZh:"åœè»Šå ´",category:"other",type:"boolean"},{key:"wheelchairAccess",labelEn:"Wheelchair Access",labelZh:"è¼ªæ¤…é€šé“",category:"other",type:"boolean"}],we=["no","not_available","none","false","0","unavailable"];function ke(x,t){const r=x[t];if(r==null)return!1;if(typeof r=="boolean")return r;if(typeof r=="string"){const c=r.toLowerCase().trim();return c.length>0&&!we.includes(c)}return!1}function ve(x,t,r,c){const y=(r-x)*Math.PI/180,d=(c-t)*Math.PI/180,b=Math.sin(y/2)*Math.sin(y/2)+Math.cos(x*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)))}function Ie(){const{t:x,language:t}=Q(),[r,c]=i.useState(""),[u,y]=i.useState("all"),[d,b]=i.useState("distance"),[g,B]=i.useState(null),[Ne,w]=i.useState(null),[l,S]=i.useState(new Set),[K,D]=i.useState(!1),p=e=>{S(s=>{const n=new Set(s);return n.has(e)?n.delete(e):n.add(e),n})},O=()=>{S(new Set)},{data:$,isLoading:U}=T({queryKey:["/api/regions"]}),{data:k,isLoading:V}=T({queryKey:["/api/hospitals"]});i.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{B({latitude:e.coords.latitude,longitude:e.coords.longitude}),w(null)},e=>{console.log("Geolocation error:",e.message),w(e.message)}):w("Geolocation not supported")},[]),i.useEffect(()=>{f.event("hospital_list_page_view",{event_category:"Hospital",language:t})},[t]);const Z=i.useMemo(()=>k?k.map(e=>{let s;return g&&e.latitude&&e.longitude&&(s=ve(g.latitude,g.longitude,parseFloat(e.latitude),parseFloat(e.longitude))),{...e,distance:s}}):[],[k,g]),h=i.useMemo(()=>{let e=Z.filter(s=>{var L,M;const n=!r||s.nameEn.toLowerCase().includes(r.toLowerCase())||((L=s.nameZh)==null?void 0:L.includes(r))||s.addressEn.toLowerCase().includes(r.toLowerCase())||((M=s.addressZh)==null?void 0:M.includes(r)),v=u==="all"||s.regionId===u,N=l.size===0||Array.from(l).every(G=>ke(s,G));return n&&v&&N});return d==="distance"&&g?e.sort((s,n)=>s.distance===void 0?1:n.distance===void 0?-1:s.distance-n.distance):d==="name"?e.sort((s,n)=>{const v=t==="zh-HK"?s.nameZh:s.nameEn,N=t==="zh-HK"?n.nameZh:n.nameEn;return v.localeCompare(N)}):d==="newest"&&e.sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()),e},[Z,r,u,d,t,g,l]),q=e=>{e.phone&&(f.event("hospital_cta_click",{event_category:"Hospital",type:"call",hospital_id:e.id,hospital_slug:e.slug}),window.location.href=`tel:${e.phone}`)},W=e=>{if(e.whatsapp){f.event("hospital_cta_click",{event_category:"Hospital",type:"whatsapp",hospital_id:e.id,hospital_slug:e.slug});const s=e.whatsapp.replace(/[^\d]/g,"");window.open(`https://wa.me/${s}`,"_blank")}},X=e=>{if(f.event("hospital_cta_click",{event_category:"Hospital",type:"maps",hospital_id:e.id,hospital_slug:e.slug}),e.latitude&&e.longitude){const s=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;window.open(s,"_blank")}else{const s=t==="zh-HK"?e.addressZh:e.addressEn,n=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s)}`;window.open(n,"_blank")}};return a.jsxs(a.Fragment,{children:[a.jsx(Y,{title:t==="zh-HK"?"24å°æ™‚å‹•ç‰©é†«é™¢ - PetSOS":"24-Hour Animal Hospitals - PetSOS",description:t==="zh-HK"?"é¦™æ¸¯24å°æ™‚å‹•ç‰©é†«é™¢è©³ç´°è³‡æ–™ï¼ŒåŒ…æ‹¬è¨ºç—‡è²»ç”¨ã€æœå‹™è¨­æ–½ã€ICUã€CTæƒæç­‰è³‡è¨Šã€‚":"Detailed profiles of 24-hour animal hospitals in Hong Kong, including consultation fees, facilities, ICU, CT scan, and more.",canonical:"https://petsos.site/hospitals",language:t}),a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"container mx-auto px-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_,{href:"/",children:a.jsx(m,{variant:"ghost",size:"icon","data-testid":"button-back",children:a.jsx(xe,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2","data-testid":"text-page-title",children:[a.jsx(ue,{className:"h-6 w-6 text-red-500"}),t==="zh-HK"?"24å°æ™‚å‹•ç‰©é†«é™¢":"24-Hour Animal Hospitals"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t==="zh-HK"?"è©³ç´°é†«é™¢è³‡æ–™åŠè¨ºç—‡è²»ç”¨åƒè€ƒ":"Detailed hospital information and consultation fees"})]})]}),a.jsx(J,{})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ee,{type:"text",placeholder:t==="zh-HK"?"æœå°‹é†«é™¢åç¨±æˆ–åœ°å€...":"Search hospital name or address...",value:r,onChange:e=>c(e.target.value),className:"pl-9 pr-9","data-testid":"input-search"}),r&&a.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-testid":"button-clear-search",children:a.jsx(A,{className:"h-4 w-4"})})]}),a.jsxs(ae,{value:d,onValueChange:b,children:[a.jsx(te,{className:"w-full md:w-[180px]","data-testid":"select-sort",children:a.jsx(se,{})}),a.jsxs(re,{children:[a.jsx(C,{value:"distance","data-testid":"sort-distance",children:t==="zh-HK"?"è·é›¢":"Distance"}),a.jsx(C,{value:"name","data-testid":"sort-name",children:t==="zh-HK"?"åç¨±":"Name"}),a.jsx(C,{value:"newest","data-testid":"sort-newest",children:t==="zh-HK"?"æœ€æ–°":"Newest"})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 md:gap-4",children:[!U&&$&&a.jsx("div",{className:"overflow-x-auto flex-shrink-0",children:a.jsx(ne,{value:u,onValueChange:y,children:a.jsxs(le,{"data-testid":"tabs-region",className:"w-max md:w-auto",children:[a.jsx(I,{value:"all","data-testid":"tab-all",children:t==="zh-HK"?"å…¨éƒ¨":"All"}),$.map(e=>a.jsx(I,{value:e.id,"data-testid":`tab-${e.code}`,children:t==="zh-HK"?e.nameZh:e.nameEn},e.id))]})})}),h&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex-shrink-0","data-testid":"text-results-count",children:t==="zh-HK"?`é¡¯ç¤º ${h.length} é–“é†«é™¢`:`Showing ${h.length} ${h.length===1?"hospital":"hospitals"}`})]}),a.jsxs(ge,{open:K,onOpenChange:D,children:[a.jsx(he,{asChild:!0,children:a.jsxs(m,{variant:"outline",size:"sm",className:"w-full md:w-auto flex items-center gap-2","data-testid":"button-toggle-filters",children:[a.jsx(be,{className:"h-4 w-4"}),t==="zh-HK"?"è¨­æ–½ç¯©é¸":"Filter by Facilities",l.size>0&&a.jsx(o,{variant:"secondary",className:"ml-1","data-testid":"badge-filter-count",children:l.size}),K?a.jsx(ie,{className:"h-4 w-4"}):a.jsx(de,{className:"h-4 w-4"})]})}),a.jsx(me,{className:"mt-3",children:a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t==="zh-HK"?"é¸æ“‡éœ€è¦çš„è¨­æ–½ï¼š":"Select required facilities:"}),l.size>0&&a.jsxs(m,{variant:"ghost",size:"sm",onClick:O,className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950","data-testid":"button-clear-filters",children:[a.jsx(A,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"æ¸…é™¤å…¨éƒ¨":"Clear All"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:t==="zh-HK"?"å½±åƒè¨ºæ–·":"Imaging"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(e=>e.category==="imaging").map(e=>a.jsx("button",{onClick:()=>p(e.key),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${l.has(e.key)?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:border-red-400 hover:text-red-600"}`,"data-testid":`filter-${e.key}`,children:t==="zh-HK"?e.labelZh:e.labelEn},e.key))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:t==="zh-HK"?"æ€¥ç—‡è­·ç†":"Emergency Care"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(e=>e.category==="emergency").map(e=>a.jsx("button",{onClick:()=>p(e.key),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${l.has(e.key)?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:border-red-400 hover:text-red-600"}`,"data-testid":`filter-${e.key}`,children:t==="zh-HK"?e.labelZh:e.labelEn},e.key))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:t==="zh-HK"?"æ‰‹è¡“":"Surgery"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(e=>e.category==="surgery").map(e=>a.jsx("button",{onClick:()=>p(e.key),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${l.has(e.key)?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:border-red-400 hover:text-red-600"}`,"data-testid":`filter-${e.key}`,children:t==="zh-HK"?e.labelZh:e.labelEn},e.key))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:t==="zh-HK"?"å…¶ä»–è¨­æ–½":"Other Facilities"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(e=>e.category==="other").map(e=>a.jsx("button",{onClick:()=>p(e.key),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${l.has(e.key)?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:border-red-400 hover:text-red-600"}`,"data-testid":`filter-${e.key}`,children:t==="zh-HK"?e.labelZh:e.labelEn},e.key))})]})]}),l.size>0&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3 italic","data-testid":"text-filter-note",children:t==="zh-HK"?"åªé¡¯ç¤ºå·²ç¢ºèªå…·å‚™æ‰€é¸è¨­æ–½çš„é†«é™¢ã€‚å¦‚éœ€æ›´å¤šé¸é …ï¼Œå¯æ¸›å°‘ç¯©é¸æ¢ä»¶ã€‚":"Only showing hospitals with confirmed facilities. Remove filters for more options."})]})})]})]})]})}),a.jsx("div",{className:"container mx-auto px-4 py-6",children:V?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>a.jsxs(H,{children:[a.jsxs(F,{children:[a.jsx(E,{className:"h-6 w-3/4"}),a.jsx(E,{className:"h-4 w-1/2"})]}),a.jsx(z,{children:a.jsx(E,{className:"h-20"})})]},e))}):h&&h.length>0?a.jsx("div",{className:"space-y-4",children:h.map(e=>{const s=e.open247,n=s?"hover:shadow-lg transition-shadow border-l-4 border-l-red-500":"hover:shadow-lg transition-shadow border-l-4 border-l-gray-200 dark:border-l-gray-700";return a.jsxs(H,{className:n,"data-testid":`card-hospital-${e.slug}`,children:[a.jsx(F,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[e.distance!==void 0&&a.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-bold text-lg mb-2 ${s?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"}`,"data-testid":`text-distance-${e.slug}`,children:[a.jsx(pe,{className:"h-5 w-5"}),e.distance.toFixed(1)," km ",t==="zh-HK"?"è·é›¢":"away"]}),e.open247&&a.jsxs(o,{className:"bg-red-600 hover:bg-red-700 text-white font-bold px-3 py-1 text-sm mb-2 animate-pulse","data-testid":`badge-emergency-247-${e.slug}`,children:["ğŸš¨ ",t==="zh-HK"?"24å°æ™‚æ€¥ç—‡":"24/7 EMERGENCY"]}),a.jsx(oe,{className:"text-lg font-bold mb-1","data-testid":`text-hospital-name-${e.slug}`,children:t==="zh-HK"?e.nameZh:e.nameEn}),e.lastVerifiedAt&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mb-2","data-testid":`text-verified-${e.slug}`,children:[a.jsx(fe,{className:"h-3 w-3"}),a.jsxs("span",{children:[t==="zh-HK"?"å·²é©—è­‰ ":"Verified ",new Date(e.lastVerifiedAt).toLocaleDateString(t==="zh-HK"?"zh-HK":"en-HK",{year:"numeric",month:"short",day:"numeric"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[a.jsx(P,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{"data-testid":`text-hospital-address-${e.slug}`,children:t==="zh-HK"?e.addressZh:e.addressEn})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.isPartner&&a.jsxs(o,{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold","data-testid":`badge-partner-${e.slug}`,children:["â­ ",t==="zh-HK"?"åˆä½œå¤¥ä¼´":"Partner"]}),e.icuLevel&&a.jsxs(o,{variant:"outline",className:"font-medium","data-testid":`badge-icu-${e.slug}`,children:[a.jsx(je,{className:"h-3 w-3 mr-1"}),"ICU"]}),e.imagingCT&&a.jsx(o,{variant:"outline","data-testid":`badge-ct-${e.slug}`,children:"CT"}),e.whatsappTriage&&a.jsxs(o,{variant:"outline",className:"text-green-600 border-green-600","data-testid":`badge-whatsapp-triage-${e.slug}`,children:[a.jsx(R,{className:"h-3 w-3 mr-1"}),t==="zh-HK"?"WhatsAppåˆ†æµ":"WhatsApp Triage"]}),e.parking&&a.jsx(o,{variant:"outline","data-testid":`badge-parking-${e.slug}`,children:t==="zh-HK"?"åœè»Šå ´":"Parking"}),e.wheelchairAccess&&a.jsx(o,{variant:"outline","data-testid":`badge-wheelchair-${e.slug}`,children:"â™¿"})]})]})})}),a.jsx(z,{children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(_,{href:`/hospitals/${e.slug}`,children:a.jsx(m,{variant:"default",size:"sm","data-testid":`button-view-${e.slug}`,children:t==="zh-HK"?"æŸ¥çœ‹è©³æƒ…":"View Details"})}),e.phone&&a.jsxs(m,{variant:"outline",size:"sm",onClick:()=>q(e),"data-testid":`button-call-${e.slug}`,children:[a.jsx(ce,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"è‡´é›»":"Call"]}),e.whatsapp&&a.jsxs(m,{variant:"outline",size:"sm",onClick:()=>W(e),className:"text-green-600 border-green-600 hover:bg-green-50 dark:hover:bg-green-950","data-testid":`button-whatsapp-${e.slug}`,children:[a.jsx(R,{className:"h-4 w-4 mr-1"}),"WhatsApp"]}),a.jsxs(m,{variant:"outline",size:"sm",onClick:()=>X(e),"data-testid":`button-maps-${e.slug}`,children:[a.jsx(P,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"åœ°åœ–":"Maps"]})]})})]},e.id)})}):a.jsx(H,{children:a.jsx(z,{className:"py-12 text-center",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400","data-testid":"text-no-results",children:t==="zh-HK"?"æœªæ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„é†«é™¢":"No hospitals found matching your criteria"})})})})]})]})}export{Ie as default};
