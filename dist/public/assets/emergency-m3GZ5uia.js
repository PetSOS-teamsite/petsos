import{c as ae,u as ge,a as he,r as l,j as e,C as ee,b as te,d as se,B as W,L as Ne,o as D,s as u,n as V,e as Pe,f as Ce,g as ze,h as B,S as _e,i as R,k as Ie,l as Oe,m as Ae,p as qe,q as Te,t as Ee,v as Le,w as He,x as Ke,y as Ve,F as Re,z as C,A as z,D as _,E as q,G as I,H as Me,I as Z,M as $e,J as We,K as De,N as Be,O as Ue,P as Ge,Q as Ye,R as Fe,Z as Je,T as Qe,U as Ze,V as Xe}from"./index-yGPiJpIr.js";import{u as et}from"./useMutation-g6oReyS0.js";import{T as tt}from"./textarea-B-COFCfx.js";import{B as st}from"./BreedCombobox-3ClCF4Op.js";import{C as at,a as rt,b as nt}from"./collapsible-OjD99U5Y.js";import{C as it}from"./circle-check-D4zmYIzY.js";import{I as ot}from"./info-B9MvCwJ7.js";import{T as ct}from"./triangle-alert-DBRIKIPj.js";import{C as lt}from"./circle-check-big-BsKdr8iG.js";import{C as dt}from"./chevron-right-D3II215K.js";import"./search-DPDD1EGd.js";import"./index-C-LwW-wl.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ae("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=ae("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),gt={critical:{en:["unconscious","not breathing","stopped breathing","no breath","cant breathe","cannot breathe","not responsive","unresponsive","passed out","fainted","collapsed","choking","choked","something stuck","stuck in throat","cant swallow","bleeding heavily","massive bleeding","blood everywhere","wont stop bleeding","bleeding out","hemorrhaging","massive blood loss","spurting blood","gushing blood","seizure","seizing","convulsion","convulsing","fitting","spasms","poisoned","ate poison","toxic","ingested","swallowed something","hit by car","hit by vehicle","run over","car accident","vehicle accident","attacked","bitten","mauled","fight","attacked by dog","attacked by animal","fell from height","fell down stairs","fell from window","not moving","limp","lifeless","critical condition","dying","emergency"],zh:["æ˜è¿·","ä¸å‘¼å¸","åœæ­¢å‘¼å¸","å¤±å»æ„è­˜","æ˜å€’","æšˆå€’","å€’ä¸‹","çª’æ¯","å“½ä½","å¡ä½","å–‰åš¨å¡ä½","å¤§å‡ºè¡€","æµè¡€ä¸æ­¢","å¤§é‡å‡ºè¡€","è¡€æµä¸åœ","å™´è¡€","æŠ½æ","ç—™æ”£","æŠ½ç­‹","å…¨èº«æŠ½æ","ä¸­æ¯’","é£ŸéŒ¯å˜¢","é£Ÿå’—æ¯’","èª¤é£Ÿ","è»Šæ’","è¢«è»Šæ’","æ’è»Š","äº¤é€šæ„å¤–","è¢«è¥²æ“Š","è¢«å’¬","è¢«æ‰“","è¢«ç‹—å’¬","è¢«æ”»æ“Š","è·Œè½","å¾é«˜è™•è·Œè½","è·Œè½æ¨“æ¢¯","ä¸å‹•","å†‡åæ‡‰","ç€•æ­»","å±æ€¥","æ²¡å‘¼å¸","åœæ­¢å‘¼å¸","å¤±å»æ„è¯†","æ˜å€’","æ™•å€’","çª’æ¯","å¡ä½","å–‰å’™å¡ä½","å¤§å‡ºè¡€","æµè¡€ä¸æ­¢","å¤§é‡å‡ºè¡€","æŠ½æ","ç—‰æŒ›","æŠ½ç­‹","ä¸­æ¯’","åƒé”™ä¸œè¥¿","åƒäº†æ¯’","è¯¯é£Ÿ","è¢«è½¦æ’","æ’è½¦","äº¤é€šæ„å¤–","è¢«è¢­å‡»","è¢«å’¬","è¢«ç‹—å’¬","è¢«æ”»å‡»","è·Œè½","æ‘”ä¸‹æ¥","ä¸åŠ¨","æ²¡ååº”","æ¿’æ­»","å±æ€¥"]},breathing:{en:["difficulty breathing","trouble breathing","hard to breathe","struggling to breathe","gasping","gasping for air","cant get air","panting heavily","panting hard","breathing fast","rapid breathing","blue gums","purple gums","pale gums","grey gums","wheezing","whistling sound","noisy breathing","coughing","coughing up blood","hacking","persistent cough","labored breathing","shallow breathing","irregular breathing","open mouth breathing","extended neck","flared nostrils"],zh:["å‘¼å¸å›°é›£","å‘¼å¸å””åˆ°","å””å¤ æ°£","æ°£ä¿ƒ","é€å””åˆ°æ°£","å–˜æ°£","å–˜","å¤§åŠ›å–˜","å–˜å¾—å¥½å²å®³","ç‰™é½¦ç™¼è—","ç‰™è‚‰ç™¼ç´«","ç‰™é½¦è®Šè‰²","æ°£å–˜","æœ‰é›œéŸ³","å‘¼å¸æœ‰è²","å’³å—½","å’³è¡€","ä¸€ç›´å’³","æŒçºŒå’³","å¼µå£å‘¼å¸","é ¸ä¼¸é•·","é¼»å­”å¼µå¤§","å‘¼å¸å›°éš¾","å‘¼å¸ä¸åˆ°","ä¸å¤Ÿæ°”","æ°”ä¿ƒ","å–˜æ°”","å–˜","å–˜å¾—å¾ˆå‰å®³","ç‰™é¾ˆå‘è“","ç‰™é¾ˆå‘ç´«","æ°”å–˜","å‘¼å¸æœ‰å£°","å’³å—½","å’³è¡€","ä¸€ç›´å’³","å¼ å£å‘¼å¸","é¢ˆä¼¸é•¿","é¼»å­”å¼ å¤§"]},injury:{en:["bleeding","blood","bloody","blood coming out","wound","open wound","deep wound","laceration","gash","cut","slash","broken leg","broken bone","fractured","broken limb","broken paw","limping","cant put weight","not using leg","holding leg up","favoring leg","injured","hurt","trauma","injured leg","injured paw","swollen","swelling","lump","bump","bruise","bruised","puncture wound","bite wound","scratch","dislocated","out of place","joint problem","exposed bone","bone sticking out"],zh:["æµè¡€","å‡ºè¡€","æœ‰è¡€","æµç·Šè¡€","è¡€æµå‡ºä¾†","å‚·å£","é–‹æ”¾æ€§å‚·å£","æ·±å‚·å£","åˆ€å‚·","å‰²å‚·","æ–·è…¿","éª¨æŠ˜","éª¨è£‚","æ–·éª¨","çˆªæ–·","è·›è¡Œ","å””æ•¢è¸©","å””ç”¨éš»è…³","æŠ¬ä½è…³","å—å‚·","æ•´è¦ª","å‰µå‚·","è…³å—å‚·","çˆªå—å‚·","è…«","è…«è„¹","è…«èµ·","ç˜€","ç˜€å‚·","å’¬å‚·","æŠ“å‚·","ç©¿åˆºå‚·","è„«è‡¼","ç§»ä½","é—œç¯€å•é¡Œ","éª¨é ­éœ²å‡º","éª¨é ­çªå‡º","æµè¡€","å‡ºè¡€","æœ‰è¡€","ä¼¤å£","å¼€æ”¾æ€§ä¼¤å£","æ·±ä¼¤å£","åˆ€ä¼¤","å‰²ä¼¤","æ–­è…¿","éª¨æŠ˜","éª¨è£‚","æ–­éª¨","è·›è¡Œ","ä¸æ•¢è¸©","ä¸ç”¨è„š","æŠ¬ç€è„š","å—ä¼¤","åˆ›ä¼¤","è„šå—ä¼¤","è‚¿","è‚¿èƒ€","è‚¿èµ·","ç˜€ä¼¤","å’¬ä¼¤","æŠ“ä¼¤","è„±è‡¼","ç§»ä½","å…³èŠ‚é—®é¢˜","éª¨å¤´éœ²å‡º"]},digestive:{en:["vomiting","throwing up","puking","vomit","sick","retching","vomiting blood","blood in vomit","dark vomit","diarrhea","loose stool","watery stool","bloody stool","blood in stool","not eating","wont eat","refusing food","no appetite","stopped eating","bloated","swollen belly","distended stomach","tight belly","hard stomach","stomach pain","abdominal pain","belly pain","tummy pain","drooling","excessive drooling","salivating","constipated","cant poop","straining","trying to poop","eating grass","eating strange things"],zh:["å˜”å","å˜”","ä½œå˜”","æƒ³å˜”","åèƒƒ","å˜”è¡€","åè¡€","å˜”å•¡è‰²","è…¹ç€‰","å±™å˜”","å±™æ°´","å±™è¡€","ä¾¿è¡€","ä¸åƒ","å””é£Ÿ","æ‹’é£Ÿ","å†‡èƒƒå£","åœæ­¢é€²é£Ÿ","è…¹è„¹","è‚šè„¹","è‚šå­è„¹","è‚šå­ç¡¬","è‚šå­å¤§","è‚šå­ç—›","è‚šç—›","è…¹ç—›","èƒƒç—›","æµå£æ°´","å£æ°´å¤š","ä¸åœæµå£æ°´","ä¾¿ç§˜","å±™å””å‡º","ç”¨åŠ›å±™","å¥½è¾›è‹¦å±™","é£Ÿè‰","é£Ÿæ€ªå˜¢","å‘•å","å‘•","ä½œå‘•","æƒ³å","åèƒƒ","å‘•è¡€","åè¡€","è…¹æ³»","æ‹‰è‚šå­","æ‹‰æ°´","æ‹‰è¡€","ä¾¿è¡€","ä¸åƒ","ä¸åƒä¸œè¥¿","æ‹’é£Ÿ","æ²¡èƒƒå£","è…¹èƒ€","è‚šå­èƒ€","è‚šå­ç¡¬","è‚šå­å¤§","è‚šå­ç–¼","è‚šå­ç—›","è…¹ç—›","èƒƒç–¼","æµå£æ°´","å£æ°´å¤š","ä¾¿ç§˜","æ‹‰ä¸å‡º","ç”¨åŠ›æ‹‰","åƒè‰","åƒå¥‡æ€ªçš„ä¸œè¥¿"]},neurological:{en:["seizure","seizing","convulsion","convulsing","fit","fitting","shaking","trembling","tremors","shivering","twitching","paralyzed","cant move","cant stand","cant walk","legs gave out","disoriented","confused","dazed","lost","wandering","walking in circles","head tilt","tilting head","head pressing","blind","cant see","bumping into things","circling","pacing","restless","weakness","weak","wobbly","unsteady","staggering","loss of balance","falling over","tilting"],zh:["æŠ½æ","æŠ½ç­‹","ç—™æ”£","ç™¼ä½œ","ç™¼æŠ–","éœ‡","é¡«æŠ–","æŠ–","ä¸åœæŠ–","ç™±ç˜“","ä¸èƒ½å‹•","ä¸èƒ½ä¼","ä¸èƒ½èµ°","è…³è»Ÿ","è¿·å¤±æ–¹å‘","æ··äº‚","ç³Šå¡—","å¤±æ–¹å‘","äº‚è¡Œ","è¡Œåœˆ","é ­å´","é ­æ­ª","é ­æ’ç‰†","ç›²","çœ‹ä¸è¦‹","æ’åˆ°å˜¢","è¡Œä¾†è¡Œå»","ä¸åœè¡Œ","ä¸å®‰","ç„¡åŠ›","è»Ÿå¼±","æ–æ™ƒ","ä¼å””ç©©","è¡Œå””ç©©","å¤±å¹³è¡¡","è·Œå€’","å´","æŠ½æ","æŠ½ç­‹","ç—‰æŒ›","å‘ä½œ","å‘æŠ–","éœ‡","é¢¤æŠ–","æŠ–","ç˜«ç—ª","ä¸èƒ½åŠ¨","ä¸èƒ½ç«™","ä¸èƒ½èµ°","è…¿è½¯","è¿·å¤±æ–¹å‘","æ··ä¹±","ç³Šæ¶‚","å¤±æ–¹å‘","èµ°åœˆ","å¤´ä¾§","å¤´æ­ª","å¤´æ’å¢™","ç›²","çœ‹ä¸è§","æ’åˆ°ä¸œè¥¿","èµ°æ¥èµ°å»","ä¸åœèµ°","ä¸å®‰","æ— åŠ›","è½¯å¼±","æ‘‡æ™ƒ","ç«™ä¸ç¨³","èµ°ä¸ç¨³","å¤±å¹³è¡¡","è·Œå€’"]},pain:{en:["crying","whimpering","whining","yelping","howling","pain","in pain","painful","hurts","hurt","sore","screaming","screeching","shrieking","aggressive","biting","snapping","growling when touched","sensitive","touchy","flinches","pulls away","restless","cant settle","pacing","cant get comfortable","hiding","withdrawn","acting strange","licking","biting at","chewing at area"],zh:["å“­æ³£","å—šå’½","å“€é³´","å“€å«","å—¥å«","ç—›","å¥½ç—›","ç—›è‹¦","ç–¼","ç—›æ¥š","å°–å«","æ…˜å«","å«","æ”»æ“Šæ€§","å’¬","æƒ³å’¬","æ‘¸å°±å˜ˆ","æ•æ„Ÿ","ä¸€æ‘¸å°±ç¸®","é¿é–‹","ä¸å®‰","å®‰å®šå””åˆ°","è¡Œä¾†è¡Œå»","å””èˆ’æœ","æ”¶åŸ‹","èº²è—","è¡Œç‚ºæ€ª","èˆ”","å’¬ä½","å•ƒ","å“­æ³£","å‘œå’½","å“€é¸£","å“€å«","åšå«","ç—›","å¥½ç—›","ç—›è‹¦","ç–¼","ç—›æ¥š","å°–å«","æƒ¨å«","å«","æ”»å‡»æ€§","å’¬","æƒ³å’¬","æ‘¸å°±å«","æ•æ„Ÿ","ä¸€æ‘¸å°±ç¼©","é¿å¼€","ä¸å®‰","å®‰å®šä¸äº†","èµ°æ¥èµ°å»","ä¸èˆ’æœ","èº²è—","è¡Œä¸ºæ€ª","èˆ”","å’¬ç€","å•ƒ"]}};function U(t){const o=t.toLowerCase(),r=[],g=[];return Object.entries(gt).forEach(([k,h])=>{const O=[...h.en,...h.zh].filter(n=>o.includes(n.toLowerCase()));O.length>0&&(r.push(k),g.push(...O))}),r.length===0?"General emergency":r.includes("critical")?`CRITICAL: ${g.slice(0,3).join(", ")}`:g.slice(0,3).join(", ")}async function ht(t,o="en",r){try{const g=new AbortController,k=setTimeout(()=>g.abort(),12e3),h=await fetch("/api/voice/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:t,language:o}),signal:g.signal});if(clearTimeout(k),h.ok){const d=await h.json();if(d.success&&d.analysis){const{severity:O,primarySymptoms:n,confidence:T}=d.analysis,N=O.toUpperCase(),y=Math.round(T*100);if(n&&n.length>0){const A=n.slice(0,3).map(E=>E.symptom).join(", ");return`${N} (${y}%): ${A}`}return`${N} (${y}%)`}}return h.status===503?r==null||r("AI service not configured"):h.status===429?r==null||r("Rate limit exceeded"):h.status===504?r==null||r("AI analysis timeout"):r==null||r("AI service unavailable"),console.log("DeepSeek not available, using keyword-based analysis"),U(t)}catch(g){return g instanceof Error&&g.name==="AbortError"?r==null||r("AI analysis timeout"):r==null||r("Network error"),console.error("AI analysis error, using fallback:",g),U(t)}}function pt({onTranscriptComplete:t,language:o="en"}){const{t:r}=ge(),{toast:g}=he(),[k,h]=l.useState(!1),[d,O]=l.useState(""),[n,T]=l.useState(!0),[N,y]=l.useState(null),[A,E]=l.useState(!1),j=l.useRef(null);l.useEffect(()=>{const x=window.SpeechRecognition||window.webkitSpeechRecognition;if(!x){T(!1),y("Voice recording is not supported in this browser. Please use Chrome, Safari, or Edge.");return}const p=new x;return p.continuous=!0,p.interimResults=!0,o==="zh-HK"||o==="zh"?p.lang="zh-HK":o==="zh-CN"?p.lang="zh-CN":p.lang="en-US",p.onstart=()=>{h(!0),y(null)},p.onresult=S=>{let L="",H="";for(let f=S.resultIndex;f<S.results.length;f++){const K=S.results[f][0].transcript;S.results[f].isFinal?H+=K+" ":L+=K}O(f=>f+H||L)},p.onerror=S=>{console.error("Speech recognition error:",S.error),S.error==="not-allowed"?y("Microphone access denied. Please allow microphone access and try again."):S.error==="no-speech"?y("No speech detected. Please speak clearly and try again."):y(`Error: ${S.error}`),h(!1)},p.onend=()=>{h(!1)},j.current=p,()=>{j.current&&j.current.stop()}},[o]);const M=()=>{if(j.current){O(""),y(null);try{j.current.start()}catch(x){console.error("Failed to start recording:",x),y("Failed to start recording. Please try again.")}}},G=async()=>{if(j.current)if(j.current.stop(),h(!1),d.trim()){E(!0);try{const x=await ht(d,o,p=>{g({title:r("voice_recorder.using_offline_analysis","Using offline analysis"),description:r("voice_recorder.fallback_message","AI analysis unavailable. Using enhanced keyword detection."),variant:"default"})});t(d,x),g({title:r("voice_recorder.success","Voice recording complete"),description:r("voice_recorder.success_description","Your symptoms have been analyzed successfully")})}catch(x){console.error("Analysis failed:",x);const p=U(d);t(d,p),g({title:r("voice_recorder.analysis_error","Analysis completed"),description:r("voice_recorder.fallback_used","Using offline symptom detection."),variant:"default"})}finally{E(!1)}}else y(r("voice_recorder.no_transcript","No speech detected. Please try again.")),g({title:r("voice_recorder.error_no_speech","No speech detected"),description:r("voice_recorder.error_no_speech_description","Please speak clearly and try recording again."),variant:"destructive"})};return n?e.jsx(ee,{className:k?"border-red-500 bg-red-50 dark:bg-red-950":"",children:e.jsx(te,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("span",{className:"absolute -right-1 -top-1 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),e.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:r("voice_recorder.recording","Recording... Speak now")})]}):d?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:r("voice_recorder.recorded","Voice recorded successfully")})]}):null}),k?e.jsxs(W,{onClick:G,variant:"destructive","data-testid":"button-stop-recording",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),r("voice_recorder.stop","Stop")]}):e.jsxs(W,{onClick:M,variant:"default",className:"bg-red-600 hover:bg-red-700","data-testid":"button-start-recording",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),r("voice_recorder.start","Start Recording")]})]}),!d&&!k&&e.jsxs(at,{children:[e.jsxs(rt,{className:"flex items-center gap-1.5 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx(ot,{className:"h-3.5 w-3.5"}),r("voice_recorder.tip_short","Speak clearly â€” we'll analyze and guide you automatically")]}),e.jsx(nt,{className:"pt-1.5",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:["ğŸ’¡ ",r("voice_recorder.tip","Tip: Speak clearly and describe your pet's symptoms. The system will automatically analyze and categorize the emergency.")]})})})]}),d&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3","data-testid":"voice-transcript",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:r("voice_recorder.transcript","Transcript:")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:d}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:A?e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:r("voice_recorder.analyzing","Analyzing with AI...")})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r("voice_recorder.analyzed","Analyzed symptoms:")," ",e.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:U(d)})]})})]}),N&&e.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 dark:text-red-400 text-xs",children:[e.jsx(se,{className:"h-3.5 w-3.5"}),e.jsx("p",{children:N})]})]})})}):e.jsx(ee,{className:"border-red-200 dark:border-red-800",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("p",{className:"text-sm",children:N})]})})})}const X=[{key:"unconscious",en:"Unconscious / Unresponsive",zh:"æ˜è¿· / å¤±å»æ„è­˜"},{key:"breathing",en:"Not breathing / Severe difficulty breathing",zh:"å‘¼å¸åœæ­¢ / åš´é‡å‘¼å¸å›°é›£"},{key:"seizure",en:"Seizure / Convulsions",zh:"ç™²ç™‡ç™¼ä½œ / æŠ½æ"},{key:"choking",en:"Choking / Airway blocked",zh:"å“½å¡ / æ°£é“é˜»å¡"},{key:"bleeding",en:"Severe bleeding / Hemorrhage",zh:"åš´é‡å‡ºè¡€ / æµè¡€ä¸æ­¢"},{key:"trauma",en:"Hit by vehicle / Major trauma",zh:"è»Šç¦æ’æ“Š / åš´é‡å¤–å‚·"},{key:"poisoning",en:"Poisoning / Toxic ingestion",zh:"ä¸­æ¯’ / èª¤é£Ÿæ¯’ç‰©"},{key:"unable_stand",en:"Collapse / Cannot stand",zh:"å€’ä¸‹ / ç„¡æ³•ç«™ç«‹"},{key:"swollen",en:"Bloated abdomen / Distended",zh:"è…¹éƒ¨è…«è„¹ / è…¹è„¹"},{key:"pain",en:"Severe pain / Distress",zh:"åŠ‡çƒˆç–¼ç—› / ç—›è‹¦ä¸å®‰"},{key:"vomiting",en:"Repeated vomiting",zh:"æŒçºŒå˜”å"},{key:"diarrhea",en:"Severe diarrhea / Blood in stool",zh:"åš´é‡è…¹ç€‰ / ä¾¿è¡€"},{key:"broken_bone",en:"Fracture / Cannot move limb",zh:"éª¨æŠ˜ / è‚¢é«”ç„¡æ³•ç§»å‹•"},{key:"eye_injury",en:"Eye injury / Sudden blindness",zh:"çœ¼éƒ¨å—å‚· / çªç„¶å¤±æ˜"},{key:"not_eating",en:"Not eating/drinking for 24+ hours",zh:"24å°æ™‚ä»¥ä¸Šæ‹’çµ•é€²é£Ÿé£²æ°´"},{key:"other",en:"Other concerning symptoms",zh:"å…¶ä»–ä»¤äººæ“”æ†‚ç—‡ç‹€"}];function _t(){var de,me;const{t,language:o}=ge(),r=D({symptom:u().min(1,t("validation.symptom_required","Please select at least one symptom")),petId:u().optional(),petSpecies:u().optional(),petBreed:u().optional(),petAge:V().optional(),userId:u().optional()}).refine(s=>s.petId?!0:!!s.petSpecies,{message:t("validation.pet_required","Please select a pet or provide pet details"),path:["petSpecies"]}),g=D({locationLatitude:V().optional(),locationLongitude:V().optional(),manualLocation:u().optional(),regionId:u().optional()}).refine(s=>s.locationLatitude!==void 0&&s.locationLongitude!==void 0||s.manualLocation&&s.manualLocation.length>0||s.regionId&&s.regionId.length>0,{message:t("validation.location_required","Please provide a location (GPS, manual entry, or select a district)"),path:["manualLocation"]}),k=D({contactName:u().min(2,t("validation.name_required","Contact name is required")),contactPhone:u().min(6,t("validation.phone_required","Please enter a valid phone number"))}),h=D({symptom:u().min(1,t("validation.symptom_required","Please select at least one symptom")),locationLatitude:V().optional(),locationLongitude:V().optional(),manualLocation:u().optional(),regionId:u().optional(),contactName:u().min(2,t("validation.name_required","Contact name is required")),contactPhone:u().min(6,t("validation.phone_required","Please enter a valid phone number")),petId:u().optional(),petSpecies:u().optional(),petBreed:u().optional(),petAge:V().optional(),userId:u().optional()}),{user:d,isLoading:O}=Pe(),[n,T]=l.useState(1),[N,y]=l.useState([]),[A,E]=l.useState(""),[j,M]=l.useState(!1),[G,x]=l.useState(null),[p,S]=l.useState(0),[L,H]=l.useState(!1),[f,K]=l.useState(null),[re,pe]=l.useState(""),[ye,xe]=l.useState(""),[be,fe]=l.useState(!1),[ne,ie]=l.useState("+852"),{toast:Y}=he(),[,ve]=Ce(),w=d==null?void 0:d.id,i=ze({shouldUnregister:!1,defaultValues:{symptom:"",manualLocation:"",regionId:void 0,contactName:"",contactPhone:"",userId:w,petSpecies:void 0,petBreed:void 0,petAge:void 0}});l.useEffect(()=>{w&&i.setValue("userId",w)},[w,i]);const{data:P,isSuccess:oe,isFetching:ce}=B({queryKey:[`/api/users/${w}`],refetchOnMount:"always",refetchOnWindowFocus:!0,enabled:!!w}),{data:F=[],isLoading:yt}=B({queryKey:[`/api/users/${w}/pets`],enabled:n===1&&!!w});l.useEffect(()=>{n===2&&!j&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(s=>{i.setValue("locationLatitude",s.coords.latitude),i.setValue("locationLongitude",s.coords.longitude),M(!0),x(null)},s=>{x(t("emergency.gps.error","Unable to detect location")),M(!1)}):x(t("emergency.gps.not_supported","Geolocation is not supported by this browser")))},[n,j,p,i,t]);const{data:le=[]}=B({queryKey:["/api/regions"],enabled:n===2}),{data:J=[]}=B({queryKey:["/api/countries"],enabled:n===3});l.useEffect(()=>{if(n===3&&oe&&!ce&&P&&!L&&J.length>0&&(!f||f.username!==P.username||f.phone!==P.phone)){const a=P.name||P.username||"";if(i.setValue("contactName",a),P.phone){const c=P.phone.trim();if(c.startsWith("+")){const b=J.map(m=>m.phonePrefix).filter(Boolean).sort((m,$)=>$.length-m.length).find(m=>c.startsWith(m));b?(ie(b),i.setValue("contactPhone",c.substring(b.length).trim())):i.setValue("contactPhone",c)}else i.setValue("contactPhone",c)}K({username:P.username,phone:P.phone})}n!==3&&(L&&H(!1),f&&K(null))},[n,i,P,oe,ce,L,f,J]);const Q=et({mutationFn:async s=>await(await Qe("POST","/api/emergency-requests",s)).json(),onSuccess:(s,a)=>{Ze.invalidateQueries({queryKey:[`/api/users/${w}/emergency-requests`]}),Xe.trackEmergencyRequest({petType:a.petSpecies||"unknown",region:s.regionId}),Y({title:t("emergency.submit.success","Emergency request submitted!"),description:t("emergency.submit.finding","Finding nearby clinics...")}),ve(`/emergency-results/${s.id}`)},onError:s=>{Y({title:t("error","Error"),description:s.message,variant:"destructive"})}}),je=s=>{y(a=>{const c=a.includes(s)?a.filter(b=>b!==s):[...a,s];let v=c.filter(b=>b!=="other").map(b=>{const m=X.find($=>$.key===b);return o==="zh-HK"?m==null?void 0:m.zh:m==null?void 0:m.en}).join(", ");return c.includes("other")&&A&&(v=v?`${v}, ${A}`:A),i.setValue("symptom",v||""),c})},Se=async s=>{try{if(n===1)await r.parseAsync(s),T(2);else if(n===2)await g.parseAsync(s),T(3);else if(n===3){await k.parseAsync(s);const a=i.getValues(),c=a.contactPhone?`${ne}${a.contactPhone}`:a.contactPhone,v={...a,contactPhone:c,voiceTranscript:re||void 0,aiAnalyzedSymptoms:ye||void 0,isVoiceRecording:be};await h.parseAsync(v),Q.mutate(v)}}catch(a){a instanceof Je&&a.errors.forEach(c=>{c.path[0]&&i.setError(c.path[0],{message:c.message})})}},we=()=>{n>1&&T(n-1)},ke=o==="zh-HK"?[{question:"å¯µç‰©ç·Šæ€¥æƒ…æ³æ™‚æ‡‰è©²æ€éº¼è¾¦ï¼Ÿ",answer:"å¦‚æœæ‚¨çš„å¯µç‰©å‡ºç¾ç·Šæ€¥æƒ…æ³ï¼Œè«‹ä½¿ç”¨PetSOSç«‹å³è¯ç¹«24å°æ™‚å‹•ç‰©é†«é™¢ã€‚æˆ‘å€‘çš„ç³»çµ±å¯ä»¥åœ¨3å€‹æ­¥é©Ÿå…§é€šçŸ¥å¤šå®¶è¨ºæ‰€ï¼ŒåŒ…æ‹¬é¸æ“‡ç—‡ç‹€ã€æä¾›ä½ç½®å’Œè¯çµ¡æ–¹å¼ã€‚"},{question:"PetSOSå¦‚ä½•é‹ä½œï¼Ÿ",answer:"PetSOSé€šé3æ­¥é©Ÿå¹«åŠ©æ‚¨å¿«é€Ÿè¯ç¹«24å°æ™‚ç¸é†«è¨ºæ‰€ï¼š1) é¸æ“‡ç—‡ç‹€æˆ–ä½¿ç”¨AIèªéŸ³è¼¸å…¥ 2) åˆ†äº«æ‚¨çš„GPSä½ç½® 3) æä¾›è¯çµ¡è³‡è¨Šã€‚æˆ‘å€‘æœƒé€éWhatsAppå³æ™‚å»£æ’­æ‚¨çš„æ±‚åŠ©è¨Šæ¯çµ¦é™„è¿‘çš„è¨ºæ‰€ã€‚"},{question:"ä½¿ç”¨PetSOSéœ€è¦ç™»å…¥å—ï¼Ÿ",answer:"ä¸éœ€è¦ï¼ç·Šæ€¥æƒ…æ³ä¸‹å¯ä»¥åŒ¿åä½¿ç”¨PetSOSã€‚ä½†å¦‚æœæ‚¨å·²ç™»è¨˜å¯µç‰©è³‡æ–™ï¼Œç³»çµ±å¯ä»¥è‡ªå‹•å¡«å¯«è³‡è¨Šï¼Œè®“æ±‚åŠ©éç¨‹æ›´å¿«é€Ÿã€‚"},{question:"PetSOSè¦†è“‹é¦™æ¸¯å“ªäº›åœ°å€ï¼Ÿ",answer:"PetSOSè¦†è“‹é¦™æ¸¯æ‰€æœ‰åœ°å€ï¼ŒåŒ…æ‹¬é¦™æ¸¯å³¶ã€ä¹é¾å’Œæ–°ç•Œã€‚æˆ‘å€‘çš„GPSç³»çµ±æœƒè‡ªå‹•æ‰¾å‡ºè·é›¢æ‚¨æœ€è¿‘çš„24å°æ™‚å‹•ç‰©é†«é™¢ã€‚"},{question:"å¦‚ä½•çŸ¥é“å“ªäº›ç—‡ç‹€æ˜¯ç·Šæ€¥æƒ…æ³ï¼Ÿ",answer:"åš´é‡ç—‡ç‹€åŒ…æ‹¬ï¼šæ˜è¿·æˆ–å¤±å»æ„è­˜ã€å‘¼å¸å›°é›£ã€ç™²ç™‡ç™¼ä½œã€åš´é‡å‡ºè¡€ã€ä¸­æ¯’ç­‰ã€‚å¦‚æœæ‚¨ä¸ç¢ºå®šï¼Œè«‹ç«‹å³è¯ç¹«ç¸é†«ã€‚PetSOSå¯ä»¥å¹«åŠ©æ‚¨å¿«é€Ÿè¯çµ¡å¤šå®¶24å°æ™‚è¨ºæ‰€ã€‚"},{question:"ä»€éº¼æ™‚å€™æ‡‰è©²ä½¿ç”¨PetSOSï¼Ÿ",answer:"ç•¶æ‚¨çš„å¯µç‰©å‡ºç¾ç·Šæ€¥æƒ…æ³éœ€è¦å³æ™‚ç¸é†«è­·ç†æ™‚ï¼Œç‰¹åˆ¥æ˜¯åœ¨æ·±å¤œã€å‡æœŸæˆ–é¢±é¢¨æœŸé–“é›£ä»¥è¯ç¹«è¨ºæ‰€æ™‚ï¼ŒPetSOSå¯ä»¥å¹«åŠ©æ‚¨åŒæ™‚è¯ç¹«å¤šé–“24å°æ™‚å‹•ç‰©é†«é™¢ã€‚"},{question:"PetSOSæ˜¯å¦24å°æ™‚é‹ä½œï¼Ÿ",answer:"æ˜¯çš„ï¼PetSOSå…¨å¤©å€™é‹ä½œï¼Œ24/7éš¨æ™‚å¯ç”¨ã€‚ç„¡è«–ä½•æ™‚ç™¼ç”Ÿç·Šæ€¥æƒ…æ³ï¼Œæ‚¨éƒ½å¯ä»¥ä½¿ç”¨æˆ‘å€‘çš„æœå‹™è¯ç¹«é¦™æ¸¯çš„24å°æ™‚å‹•ç‰©é†«é™¢ã€‚"},{question:"ä½¿ç”¨PetSOSéœ€è¦æ”¶è²»å—ï¼Ÿ",answer:"PetSOSæ˜¯å®Œå…¨å…è²»çš„æœå‹™ã€‚æˆ‘å€‘ä¸æ”¶å–ä»»ä½•è²»ç”¨ã€‚ç¸é†«è¨ºæ‰€çš„è¨ºç™‚è²»ç”¨å‰‡æŒ‰å„è¨ºæ‰€æ”¶è²»æ¨™æº–ã€‚"},{question:"PetSOSèƒ½ä¿è­‰æ²»ç™‚å—ï¼Ÿ",answer:"PetSOSæ˜¯ä¸€å€‹ç·Šæ€¥å”èª¿å·¥å…·ï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿè¯ç¹«å¤šé–“è¨ºæ‰€ã€‚æˆ‘å€‘ç„¡æ³•ä¿è­‰ä»»ä½•ç‰¹å®šè¨ºæ‰€èƒ½æ¥æ”¶æ‚¨çš„å€‹æ¡ˆï¼Œä½†é€šéåŒæ™‚å»£æ’­çµ¦å¤šé–“è¨ºæ‰€ï¼Œå¯ä»¥å¤§å¤§å¢åŠ æ‰¾åˆ°å¯ç”¨è¨ºæ‰€çš„æ©Ÿæœƒã€‚"},{question:"å¦‚æœæ²’æœ‰é†«é™¢å›è¦†æ€éº¼è¾¦ï¼Ÿ",answer:"å¦‚æœæ²’æœ‰é†«é™¢å›è¦†ï¼Œè«‹ç›´æ¥è‡´é›»å„è¨ºæ‰€ã€‚PetSOSæœƒé¡¯ç¤ºé™„è¿‘è¨ºæ‰€çš„é›»è©±è™Ÿç¢¼ã€‚åœ¨ç·Šæ€¥æƒ…æ³ä¸‹ï¼Œå»ºè­°åŒæ™‚ä½¿ç”¨é›»è©±å’ŒPetSOSå»£æ’­åŠŸèƒ½ã€‚"}]:[{question:"What should I do in a pet emergency?",answer:"If your pet is experiencing an emergency, use PetSOS to immediately contact 24-hour animal hospitals. Our system notifies multiple clinics in 3 simple steps: select symptoms, provide location, and share contact information."},{question:"How does PetSOS work?",answer:"PetSOS helps you connect with 24-hour veterinary clinics in 3 steps: 1) Select symptoms or use AI voice input 2) Share your GPS location 3) Provide contact details. We instantly broadcast your emergency request to nearby clinics via WhatsApp."},{question:"Do I need to login to use PetSOS?",answer:"No! You can use PetSOS anonymously during emergencies. However, if you have registered pet profiles, the system can auto-fill information to make the process even faster."},{question:"Which areas does PetSOS cover in Hong Kong?",answer:"PetSOS covers all regions of Hong Kong including Hong Kong Island, Kowloon, and New Territories. Our GPS system automatically finds the nearest 24-hour animal hospitals to your location."},{question:"How do I know if a symptom is an emergency?",answer:"Critical symptoms include: unconsciousness, difficulty breathing, seizures, severe bleeding, poisoning, and trauma. If unsure, contact a vet immediately. PetSOS can help you quickly reach multiple 24-hour clinics."},{question:"When should I use PetSOS?",answer:"Use PetSOS when your pet has an emergency requiring immediate veterinary care, especially during late nights, holidays, or typhoons when it's difficult to reach clinics. PetSOS helps you contact multiple 24-hour animal hospitals simultaneously."},{question:"Is PetSOS available 24/7?",answer:"Yes! PetSOS operates around the clock, 24/7. Whenever an emergency occurs, you can use our service to contact 24-hour animal hospitals in Hong Kong."},{question:"Does PetSOS charge a fee?",answer:"PetSOS is completely free to use. We do not charge any fees. Veterinary clinic consultation fees are charged according to each clinic's own pricing."},{question:"Can PetSOS guarantee treatment?",answer:"PetSOS is an emergency coordination tool that helps you quickly contact multiple clinics. We cannot guarantee that any specific clinic will accept your case, but by broadcasting to multiple clinics simultaneously, we greatly increase your chances of finding an available clinic."},{question:"What if no hospital replies?",answer:"If no hospital replies, please call the clinics directly. PetSOS displays phone numbers for nearby clinics. In emergencies, we recommend using both phone calls and PetSOS broadcast feature simultaneously."}];return e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:o==="zh-HK"?"ç·Šæ€¥æ±‚åŠ© - PetSOS | å³æ™‚è¯çµ¡24å°æ™‚å‹•ç‰©é†«é™¢":"Emergency Pet Care - PetSOS | Connect with 24-Hour Vets Instantly",description:o==="zh-HK"?"æ¯›å­©ç·Šæ€¥æƒ…æ³ï¼Ÿ3æ­¥é©Ÿå³æ™‚é€šçŸ¥é¦™æ¸¯24å°æ™‚ç¸é†«è¨ºæ‰€ã€‚æ”¯æ´èªéŸ³è¼¸å…¥ã€AIåˆ†æç—‡ç‹€ã€WhatsAppå»£æ’­æ±‚åŠ©ã€‚æ¸¯å³¶ã€ä¹é¾ã€æ–°ç•Œå…¨è¦†è“‹ï¼Œæœ€å¿«ç²å¾—å°ˆæ¥­å”åŠ©ã€‚":"Pet emergency? Connect with 24-hour veterinary clinics in Hong Kong in 3 simple steps. Voice input, AI symptom analysis, instant WhatsApp broadcast. Fast professional help across Hong Kong Island, Kowloon, and New Territories.",keywords:o==="zh-HK"?"å¯µç‰©ç·Šæ€¥, ç·Šæ€¥æ±‚åŠ©è¡¨æ ¼, èªéŸ³è¼¸å…¥, AIåˆ†æ, WhatsAppå»£æ’­, 24å°æ™‚ç¸é†«, é¦™æ¸¯å‹•ç‰©é†«é™¢":"pet emergency form, voice input, AI symptom analysis, WhatsApp broadcast, 24-hour vet Hong Kong, emergency animal hospital",canonical:"https://petsos.site/emergency",language:o}),e.jsx(R,{data:Ie(o),id:"schema-emergency-service"}),e.jsx(R,{data:Oe(o),id:"schema-software-application"}),e.jsx(R,{data:Ae(ke),id:"schema-faq"}),e.jsx(R,{data:qe(o),id:"schema-howto-emergency"}),e.jsx(R,{data:Te([{name:o==="zh-HK"?"ä¸»é ":"Home",url:"https://petsos.site/"},{name:o==="zh-HK"?"ç·Šæ€¥æ±‚åŠ©":"Emergency",url:"https://petsos.site/emergency"}]),id:"schema-breadcrumb-emergency"}),e.jsx(R,{data:Ee(o),id:"schema-medical-web-page"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto pt-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t("emergency.step_indicator","Step {step} of 3").replace("{step}",String(n))}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n===1&&t("emergency.time_step1","~30s"),n===2&&t("emergency.time_step2","~15s"),n===3&&t("emergency.time_step3","~10s")]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/3*100}%`}})})]}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mb-4","data-testid":"medical-disclaimer",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 flex items-start gap-2",children:[e.jsx(ct,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),o==="zh-HK"?"âš ï¸ æœ¬é è³‡æ–™åªä¾›ç·Šæ€¥åƒè€ƒï¼Œä¸¦éç¸é†«è¨ºæ–·æˆ–å»ºè­°ã€‚è«‹ç›¡å¿«è«®è©¢è¨»å†Šç¸é†«ã€‚":"âš ï¸ This information is for emergency guidance only and not veterinary advice. Always consult a licensed veterinarian as soon as possible."]})}),e.jsxs("div",{className:"sr-only","aria-hidden":"true","data-ai-summary":"true",children:[e.jsx("p",{lang:"en",children:"PetSOS is a free emergency coordination tool for Hong Kong pet owners. It allows users to broadcast urgent pet medical situations to multiple 24-hour animal hospitals at once, helping owners identify which hospitals may be able to take the case during late nights, holidays, or typhoons. No login required. Available 24/7."}),e.jsx("p",{lang:"zh-HK",children:"PetSOS æ˜¯é¦™æ¸¯å¯µç‰©ä¸»äººçš„å…è²»ç·Šæ€¥å”èª¿å·¥å…·ã€‚ç”¨æˆ¶å¯ä¸€æ¬¡éå°‡ç·Šæ€¥å¯µç‰©é†«ç™‚æƒ…æ³å»£æ’­è‡³å¤šé–“24å°æ™‚å‹•ç‰©é†«é™¢ï¼Œå¹«åŠ©ä¸»äººåœ¨æ·±å¤œã€å‡æœŸæˆ–é¢±é¢¨æœŸé–“æ‰¾åˆ°èƒ½æ¥æ”¶å€‹æ¡ˆçš„é†«é™¢ã€‚ç„¡éœ€ç™»å…¥ã€‚å…¨å¤©å€™é‹ä½œã€‚"})]}),e.jsxs(ee,{className:"border-red-200 dark:border-red-900",children:[e.jsxs(Le,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-6 w-6 text-red-600"}),e.jsx(He,{className:"text-2xl",children:t("emergency.title","Emergency Pet Care")})]}),e.jsx(Ke,{})]}),e.jsxs(Ve,{children:[n===1&&t("emergency.step1.title","What's happening?"),n===2&&t("emergency.step2.title","Where are you?"),n===3&&t("emergency.step3.title","How can clinics reach you?")]})]}),e.jsx(te,{children:e.jsx(Re,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(Se),className:"space-y-6",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[w&&F.length>0&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:e.jsx(C,{control:i.control,name:"petId",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:t("emergency.select_pet","Which pet is this for?")}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:t("emergency.select_pet_desc","Select your pet for faster emergency help")}),e.jsx(q,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:F.map(a=>{const c=s.value===a.id;return e.jsxs("button",{type:"button",onClick:()=>s.onChange(c?void 0:a.id),className:`
                                          p-3 rounded-lg border-2 transition-all text-left text-sm
                                          ${c?"border-blue-600 bg-blue-100 dark:bg-blue-900 shadow-md":"border-blue-200 dark:border-blue-700 hover:border-blue-400 bg-white dark:bg-gray-800"}
                                        `,"data-testid":`pet-card-${a.id}`,children:[e.jsx("div",{className:"font-semibold truncate",children:a.name}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:a.breed||a.species})]},a.id)})})}),e.jsx(I,{})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["ğŸ¤ ",t("emergency.voice_option","Too panicked to type? Use voice instead")]})}),e.jsx(pt,{language:o,onTranscriptComplete:(s,a)=>{pe(s),xe(a),fe(!0),i.setValue("symptom",a),Y({title:t("emergency.voice_recorded","Voice recorded successfully"),description:t("emergency.voice_analyzed","Your symptoms have been analyzed and will be sent to clinics")})}})]}),re&&e.jsxs("div",{className:"flex items-center gap-4 my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("emergency.or_select_manually","Or select symptoms manually")}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsx(C,{control:i.control,name:"symptom",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-xl font-bold text-red-700 dark:text-red-400",children:t("symptoms.urgent","What's happening to your pet right now?")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("symptoms.select_all","Tap all symptoms that apply")}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:X.map(a=>{const c=N.includes(a.key),v=o==="zh-HK"?a.zh:a.en;return e.jsx("button",{type:"button",onClick:()=>je(a.key),className:`
                                      px-4 py-3 text-left rounded-lg border-2 transition-all
                                      ${c?"border-red-500 bg-red-50 dark:bg-red-950 text-red-900 dark:text-red-100":"border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700"}
                                    `,"data-testid":`symptom-${a.key}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`
                                        w-5 h-5 rounded-full border-2 flex items-center justify-center
                                        ${c?"border-red-500 bg-red-500":"border-gray-300 dark:border-gray-600"}
                                      `,children:c&&e.jsx(lt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:v})]})},a.key)})}),N.includes("other")&&e.jsx("div",{children:e.jsx(tt,{value:A,onChange:a=>{E(a.target.value);const c=N.filter(b=>b!=="other").map(b=>{const m=X.find($=>$.key===b);return o==="zh-HK"?m==null?void 0:m.zh:m==null?void 0:m.en}).join(", "),v=c?`${c}, ${a.target.value}`:a.target.value;i.setValue("symptom",v)},placeholder:t("symptoms.describe","Describe the symptoms..."),className:"min-h-[80px] text-base","data-testid":"input-other-symptom"})}),e.jsx("input",{type:"hidden",...s})]}),e.jsx(I,{})]})}),(!w||F.length===0||!i.watch("petId"))&&e.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t("emergency.pet_details","Pet Information")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("emergency.pet_details_desc","Tell us about your pet so clinics can prepare")})]}),e.jsx(C,{control:i.control,name:"petSpecies",render:({field:s})=>e.jsxs(z,{children:[e.jsxs(_,{children:[t("pets.species","Species")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(q,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>s.onChange("dog"),className:`
                                      p-4 rounded-lg border-2 transition-all font-medium text-base
                                      ${s.value==="dog"?"border-blue-500 bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"}
                                    `,"data-testid":"button-species-dog",children:["ğŸ• ",t("pets.dog","Dog")]}),e.jsxs("button",{type:"button",onClick:()=>s.onChange("cat"),className:`
                                      p-4 rounded-lg border-2 transition-all font-medium text-base
                                      ${s.value==="cat"?"border-blue-500 bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"}
                                    `,"data-testid":"button-species-cat",children:["ğŸ± ",t("pets.cat","Cat")]})]})}),e.jsx(I,{})]})}),e.jsx(C,{control:i.control,name:"petBreed",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{children:t("pets.breed","Breed")}),e.jsx(q,{children:e.jsx(st,{species:i.watch("petSpecies")||"",value:s.value??"",onChange:s.onChange,placeholder:t("pets.breed_placeholder","Select or type breed..."),testId:"combobox-pet-breed"})}),e.jsx(Me,{className:"text-xs text-muted-foreground",children:o==="en"?"ğŸ’¡ Can't find your pet's breed? No worries! Just type it in and press Enter.":"ğŸ’¡ æ‰¾ä¸åˆ°å“ç¨®ï¼Ÿæ²’é—œä¿‚ï¼ç›´æ¥è¼¸å…¥ç„¶å¾ŒæŒ‰Enterå³å¯ã€‚"}),e.jsx(I,{})]})}),e.jsx(C,{control:i.control,name:"petAge",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{children:t("pets.age","Age (years)")}),e.jsx(q,{children:e.jsx(Z,{...s,type:"number",value:s.value??"",onChange:a=>s.onChange(a.target.value?parseInt(a.target.value):void 0),placeholder:t("pets.age_placeholder","e.g., 3"),"data-testid":"input-pet-age"})}),e.jsx(I,{})]})})]})]}),n===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx($e,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsx("div",{className:"flex-1",children:j?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:t("emergency.step2.detected","Location detected")}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300","data-testid":"text-gps-status",children:[(de=i.watch("locationLatitude"))==null?void 0:de.toFixed(4),", ",(me=i.watch("locationLongitude"))==null?void 0:me.toFixed(4)]})]}):G?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900 dark:text-red-100",children:t("emergency.gps.unavailable","GPS unavailable")}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:t("emergency.gps.manual","Please enter location manually below")}),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:()=>{x(null),M(!1),S(s=>s+1)},className:"mt-2","data-testid":"button-retry-gps",children:t("emergency.step2.retry","Retry GPS")})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:t("emergency.step2.detecting","Detecting your location...")}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:t("emergency.step2.nearest","We'll find the nearest 24-hour clinics")})]})})]}),e.jsx(C,{control:i.control,name:"regionId",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step2.select_district","Select District")}),le.length>0?e.jsxs(We,{onValueChange:s.onChange,value:s.value||"",children:[e.jsx(q,{children:e.jsx(De,{className:"text-lg","data-testid":"select-region",children:e.jsx(Be,{placeholder:t("emergency.step2.district_placeholder","Choose your district...")})})}),e.jsx(Ue,{children:le.map(a=>e.jsx(Ge,{value:a.id,"data-testid":`region-option-${a.id}`,children:o==="zh-HK"?a.nameZh:a.nameEn},a.id))})]}):e.jsx("div",{className:"h-10 flex items-center px-3 border rounded-md bg-muted text-muted-foreground text-sm",children:t("emergency.step2.loading_districts","Loading districts...")}),e.jsx(I,{})]})}),e.jsxs("div",{className:"relative flex items-center my-4",children:[e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"flex-shrink mx-4 text-gray-500 dark:text-gray-400 text-sm",children:t("common.or","OR")}),e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"})]}),e.jsx(C,{control:i.control,name:"manualLocation",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg",children:t("emergency.step2.manual_label","Enter specific location")}),e.jsx(q,{children:e.jsx(Z,{...s,value:s.value||"",placeholder:t("emergency.step2.placeholder","e.g., Central, Hong Kong Island"),className:"text-lg","data-testid":"input-manual-location"})}),e.jsx(I,{})]})})]}),n===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{control:i.control,name:"contactName",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step3.name","Your Name")}),e.jsx(q,{children:e.jsx(Z,{...s,onChange:a=>{s.onChange(a),H(!0)},placeholder:t("emergency.step3.name_placeholder","Full name"),className:"text-lg","data-testid":"input-contact-name",autoFocus:!0})}),e.jsx(I,{})]})}),e.jsx(C,{control:i.control,name:"contactPhone",render:({field:s})=>e.jsxs(z,{children:[e.jsx(_,{className:"text-lg font-semibold",children:t("emergency.step3.phone","Phone Number")}),e.jsx(q,{children:e.jsx(Ye,{value:s.value,onChange:a=>{s.onChange(a),H(!0)},countryCode:ne,onCountryCodeChange:ie,placeholder:t("emergency.step3.phone_placeholder","1234 5678"),testId:"input-contact-phone"})}),e.jsx(I,{})]})}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:t("emergency.step3.clinic_contact","Clinics will contact you at this number to confirm availability")})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[n>1&&e.jsxs(W,{type:"button",variant:"outline",size:"lg",onClick:we,className:"flex-1","data-testid":"button-back",children:[e.jsx(mt,{className:"mr-2 h-5 w-5"}),t("button.previous","Back")]}),e.jsx(W,{type:"submit",size:"lg",className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-lg font-semibold py-6",disabled:Q.isPending,"data-testid":"button-next",children:n===3?Q.isPending?t("button.submitting","Submitting..."):t("button.submit","Find Clinics"):e.jsxs(e.Fragment,{children:[t("button.next","Next"),e.jsx(dt,{className:"ml-2 h-5 w-5"})]})})]})]})})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("app.disclaimer","âš ï¸ PetSOS provides emergency guidance only and is not medical advice. If in doubt, contact a vet immediately.")})}),e.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 mt-8 pb-4",children:o==="zh-HK"?"ç”±ç¸é†«å°ˆæ¥­äººå“¡å¯©é–± â€” 2026å¹´1æœˆ":"Reviewed by veterinary professionals â€” January 2026"})]})})]})}export{_t as default};
