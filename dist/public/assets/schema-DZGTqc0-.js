var ga=Object.defineProperty;var _a=(t,e,n)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var s=(t,e,n)=>_a(t,typeof e!="symbol"?e+"":e,n);import{br as ha,bs as ya,bt as Na,bu as ba,bv as wa,bw as Sa,bx as Ta,by as ne,bz as va,bA as xa,bB as Ia,bC as Aa,bD as Pa,bE as Ca,bF as Da,bG as Ba,bH as Va,bI as _e,bJ as za,Z as Ea,bK as Fa,bL as Ma,bM as qa,bN as La,bO as Qa,bP as Za,bQ as Ua,bR as Oa,bS as Ka,bT as $a,bU as ja,bV as Ra,bW as Xa,bX as Ga,bY as Ja,bZ as Ha,b_ as Wa,b$ as Ya,c0 as ka,c1 as eo,c2 as to,c3 as no,c4 as io,c5 as ro,c6 as so,c7 as ao,c8 as oo,c9 as lo,ca as uo,b6 as G,aW as pr,cb as co,b5 as L,an as po,cc as mr,cd as mo,ce as fo,cf as go,cg as _o,ch as he,ag as ho,ci as yo,cj as No,ck as bo,cl as wo,cm as So,cn as To,co as vo,cp as xo,cq as Io,cr as Ao,cs as Po,af as Co,ct as Do,cu as Bo,cv as Vo,cw as zo,cx as Eo,cy as fr,cz as Fo,n as le,o as ue,cA as Mo,cB as qo,cC as Lo,cD as Qo,cE as Zo,cF as Uo,cG as Oo,cH as Ko,cI as $o,cJ as gr,cK as jo,cL as Ro,cM as Xo,s as _r,cN as Go,cO as Jo,cP as Ho,cQ as de,cR as Wo,cS as Yo,cT as ko}from"./index-yGPiJpIr.js";const el=Object.freeze(Object.defineProperty({__proto__:null,BRAND:ha,DIRTY:ya,EMPTY_PATH:Na,INVALID:ba,NEVER:wa,OK:Sa,ParseStatus:Ta,Schema:ne,ZodAny:va,ZodArray:xa,ZodBigInt:Ia,ZodBoolean:Aa,ZodBranded:Pa,ZodCatch:Ca,ZodDate:Da,ZodDefault:Ba,ZodDiscriminatedUnion:Va,ZodEffects:_e,ZodEnum:za,ZodError:Ea,get ZodFirstPartyTypeKind(){return Fa},ZodFunction:Ma,ZodIntersection:qa,ZodIssueCode:La,ZodLazy:Qa,ZodLiteral:Za,ZodMap:Ua,ZodNaN:Oa,ZodNativeEnum:Ka,ZodNever:$a,ZodNull:ja,ZodNullable:Ra,ZodNumber:Xa,ZodObject:Ga,ZodOptional:Ja,ZodParsedType:Ha,ZodPipeline:Wa,ZodPromise:Ya,ZodReadonly:ka,ZodRecord:eo,ZodSchema:ne,ZodSet:to,ZodString:no,ZodSymbol:io,ZodTransformer:_e,ZodTuple:ro,ZodType:ne,ZodUndefined:so,ZodUnion:ao,ZodUnknown:oo,ZodVoid:lo,addIssueToContext:uo,any:G,array:pr,bigint:co,boolean:L,coerce:po,custom:mr,date:mo,datetimeRegex:fo,defaultErrorMap:go,discriminatedUnion:_o,effect:he,enum:ho,function:yo,getErrorMap:No,getParsedType:bo,instanceof:wo,intersection:So,isAborted:To,isAsync:vo,isDirty:xo,isValid:Io,late:Ao,lazy:Po,literal:Co,makeIssue:Do,map:Bo,nan:Vo,nativeEnum:zo,never:Eo,null:fr,nullable:Fo,number:le,object:ue,get objectUtil(){return Mo},oboolean:qo,onumber:Lo,optional:Qo,ostring:Zo,pipeline:Uo,preprocess:Oo,promise:Ko,quotelessJson:$o,record:gr,set:jo,setErrorMap:Ro,strictObject:Xo,string:_r,symbol:Go,transformer:he,tuple:Jo,undefined:Ho,union:de,unknown:Wo,get util(){return Yo},void:ko},Symbol.toStringTag,{value:"Module"})),a=Symbol.for("drizzle:entityKind");function P(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(a in n&&n[a]===e[a])return!0;n=Object.getPrototypeOf(n)}return!1}var xe;xe=a;class O{constructor(e,n){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(O,xe,"Column");var Ie;Ie=a;class hr{constructor(e,n,i){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(hr,Ie,"ColumnBuilder");const Z=Symbol.for("drizzle:Name");var Ae;Ae=a;class yr{constructor(e,n){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:o,foreignColumns:d}=e();return{name:i,columns:o,foreignTable:d[0].table,foreignColumns:d}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Nr(e,this)}}s(yr,Ae,"PgForeignKeyBuilder");var Pe;Pe=a;class Nr{constructor(e,n){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:i}=this.reference(),o=n.map(w=>w.name),d=i.map(w=>w.name),f=[this.table[Z],...o,i[0].table[Z],...d];return e??`${f.join("_")}_fk`}}s(Nr,Pe,"PgForeignKey");function tl(t,...e){return t(...e)}function nl(t,e){return`${t[Z]}_${e.join("_")}_unique`}function ye(t,e,n){for(let i=e;i<t.length;i++){const o=t[i];if(o==="\\"){i++;continue}if(o==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!n&&(o===","||o==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function br(t,e=0){const n=[];let i=e,o=!1;for(;i<t.length;){const d=t[i];if(d===","){(o||i===e)&&n.push(""),o=!0,i++;continue}if(o=!1,d==="\\"){i+=2;continue}if(d==='"'){const[b,T]=ye(t,i+1,!0);n.push(b),i=T;continue}if(d==="}")return[n,i+1];if(d==="{"){const[b,T]=br(t,i+1);n.push(b),i=T;continue}const[f,w]=ye(t,i,!1);n.push(f),i=w}return[n,i]}function il(t){const[e]=br(t,1);return e}function wr(t){return`{${t.map(e=>Array.isArray(e)?wr(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Ce,De;class h extends(De=hr,Ce=a,De){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(n){return new Tr(this.config.name,this,n)}references(n,i={}){return this.foreignKeyConfigs.push({ref:n,actions:i}),this}unique(n,i){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,i){return this.foreignKeyConfigs.map(({ref:o,actions:d})=>tl((f,w)=>{const b=new yr(()=>{const T=f();return{columns:[n],foreignColumns:[T]}});return w.onUpdate&&b.onUpdate(w.onUpdate),w.onDelete&&b.onDelete(w.onDelete),b.build(i)},o,d))}buildExtraConfigColumn(n){return new Sr(n,this.config)}}s(h,Ce,"PgColumnBuilder");var Be,Ve;class g extends(Ve=O,Be=a,Ve){constructor(e,n){n.uniqueName||(n.uniqueName=nl(e,[n.name])),super(e,n),this.table=e}}s(g,Be,"PgColumn");var ze,Ee;class Sr extends(Ee=g,ze=a,Ee){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}s(Sr,ze,"ExtraConfigColumn");var Fe;Fe=a;class R{constructor(e,n,i,o){s(this,"name");s(this,"keyAsName");s(this,"type");s(this,"indexConfig");this.name=e,this.keyAsName=n,this.type=i,this.indexConfig=o}}s(R,Fe,"IndexedColumn");var Me,qe;class Tr extends(qe=h,Me=a,qe){constructor(e,n,i){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=i}build(e){const n=this.config.baseBuilder.build(e);return new ae(e,this.config,n)}}s(Tr,Me,"PgArrayBuilder");var Le,Qe;const Y=class Y extends(Qe=g,Le=a,Qe){constructor(n,i,o,d){super(n,i);s(this,"size");this.baseColumn=o,this.range=d,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=il(n)),n.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(n,i=!1){const o=n.map(d=>d===null?null:P(this.baseColumn,Y)?this.baseColumn.mapToDriverValue(d,!0):this.baseColumn.mapToDriverValue(d));return i?o:wr(o)}};s(Y,Le,"PgArray");let ae=Y;const Ne=Symbol.for("drizzle:isPgEnum");function rl(t){return!!t&&typeof t=="function"&&Ne in t&&t[Ne]===!0}var Ze;Ze=a;class ce{constructor(e,n,i,o=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:i,isWith:o}}}s(ce,Ze,"Subquery");const sl={startActiveSpan(t,e){return e()}},U=Symbol.for("drizzle:ViewBaseConfig"),ie=Symbol.for("drizzle:Schema"),be=Symbol.for("drizzle:Columns"),we=Symbol.for("drizzle:ExtraConfigColumns"),re=Symbol.for("drizzle:OriginalName"),se=Symbol.for("drizzle:BaseName"),J=Symbol.for("drizzle:IsAlias"),Se=Symbol.for("drizzle:ExtraConfigBuilder"),vr=Symbol.for("drizzle:IsDrizzleTable");var Ue,Oe,Ke,$e,je,Re,Xe,Ge,Je,He;He=a,Je=Z,Ge=re,Xe=ie,Re=be,je=we,$e=se,Ke=J,Oe=vr,Ue=Se;class V{constructor(e,n,i){s(this,Je);s(this,Ge);s(this,Xe);s(this,Re);s(this,je);s(this,$e);s(this,Ke,!1);s(this,Oe,!0);s(this,Ue);this[Z]=this[re]=e,this[ie]=n,this[se]=i}}s(V,He,"Table"),s(V,"Symbol",{Name:Z,Schema:ie,OriginalName:re,Columns:be,ExtraConfigColumns:we,BaseName:se,IsAlias:J,ExtraConfigBuilder:Se});function xr(t){return typeof t=="object"&&t!==null&&vr in t}function al(t){return t!=null&&typeof t.getSQL=="function"}function ol(t){var n;const e={sql:"",params:[]};for(const i of t)e.sql+=i.sql,e.params.push(...i.params),(n=i.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...i.typings));return e}var We;We=a;class z{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}}s(z,We,"StringChunk");var Ye;Ye=a;const Q=class Q{constructor(e){s(this,"decoder",Ir);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return sl.startActiveSpan("drizzle.buildSQL",n=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,n){const i=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:o,escapeName:d,escapeParam:f,prepareTyping:w,inlineParams:b,paramStartIndex:T}=i;return ol(e.map(c=>{var E;if(P(c,z))return{sql:c.value.join(""),params:[]};if(P(c,H))return{sql:d(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const S=[new z("(")];for(const[C,fa]of c.entries())S.push(fa),C<c.length-1&&S.push(new z(", "));return S.push(new z(")")),this.buildQueryFromSourceParams(S,i)}if(P(c,Q))return this.buildQueryFromSourceParams(c.queryChunks,{...i,inlineParams:b||c.shouldInlineParams});if(P(c,V)){const S=c[V.Symbol.Schema],C=c[V.Symbol.Name];return{sql:S===void 0||c[J]?d(C):d(S)+"."+d(C),params:[]}}if(P(c,O)){const S=o.getColumnCasing(c);if(n.invokeSource==="indexes")return{sql:d(S),params:[]};const C=c.table[V.Symbol.Schema];return{sql:c.table[J]||C===void 0?d(c.table[V.Symbol.Name])+"."+d(S):d(C)+"."+d(c.table[V.Symbol.Name])+"."+d(S),params:[]}}if(P(c,Cr)){const S=c[U].schema,C=c[U].name;return{sql:S===void 0||c[U].isAlias?d(C):d(S)+"."+d(C),params:[]}}if(P(c,pe)){if(P(c.value,W))return{sql:f(T.value++,c),params:[c],typings:["none"]};const S=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(P(S,Q))return this.buildQueryFromSourceParams([S],i);if(b)return{sql:this.mapInlineParam(S,i),params:[]};let C=["none"];return w&&(C=[w(c.encoder)]),{sql:f(T.value++,S),params:[S],typings:C}}return P(c,W)?{sql:f(T.value++,c),params:[c],typings:["none"]}:P(c,Q.Aliased)&&c.fieldAlias!==void 0?{sql:d(c.fieldAlias),params:[]}:P(c,ce)?c._.isWith?{sql:d(c._.alias),params:[]}:this.buildQueryFromSourceParams([new z("("),c._.sql,new z(") "),new H(c._.alias)],i):rl(c)?c.schema?{sql:d(c.schema)+"."+d(c.enumName),params:[]}:{sql:d(c.enumName),params:[]}:al(c)?(E=c.shouldOmitSQLParens)!=null&&E.call(c)?this.buildQueryFromSourceParams([c.getSQL()],i):this.buildQueryFromSourceParams([new z("("),c.getSQL(),new z(")")],i):b?{sql:this.mapInlineParam(c,i),params:[]}:{sql:f(T.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const i=e.toString();return n(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Q.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(Q,Ye,"SQL");let I=Q;var ke;ke=a;class H{constructor(e){s(this,"brand");this.value=e}getSQL(){return new I([this])}}s(H,ke,"Name");const Ir={mapFromDriverValue:t=>t},Ar={mapToDriverValue:t=>t};({...Ir,...Ar});var et;et=a;class pe{constructor(e,n=Ar){s(this,"brand");this.value=e,this.encoder=n}getSQL(){return new I([this])}}s(pe,et,"Param");function _(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new z(t[0]));for(const[i,o]of e.entries())n.push(o,new z(t[i+1]));return new I(n)}(t=>{function e(){return new I([])}t.empty=e;function n(b){return new I(b)}t.fromList=n;function i(b){return new I([new z(b)])}t.raw=i;function o(b,T){const c=[];for(const[E,S]of b.entries())E>0&&T!==void 0&&c.push(T),c.push(S);return new I(c)}t.join=o;function d(b){return new H(b)}t.identifier=d;function f(b){return new W(b)}t.placeholder=f;function w(b,T){return new pe(b,T)}t.param=w})(_||(_={}));(t=>{var n;n=a;const i=class i{constructor(d,f){s(this,"isSelectionField",!1);this.sql=d,this.fieldAlias=f}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};s(i,n,"SQL.Aliased");let e=i;t.Aliased=e})(I||(I={}));var tt;tt=a;class W{constructor(e){this.name=e}getSQL(){return new I([this])}}s(W,tt,"Placeholder");const Pr=Symbol.for("drizzle:IsDrizzleView");var nt,it,rt;rt=a,it=U,nt=Pr;class Cr{constructor({name:e,schema:n,selectedFields:i,query:o}){s(this,it);s(this,nt,!0);this[U]={name:e,originalName:e,schema:n,selectedFields:i,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new I([this])}}s(Cr,rt,"View");function ll(t){return typeof t=="object"&&t!==null&&Pr in t}O.prototype.getSQL=function(){return new I([this])};V.prototype.getSQL=function(){return new I([this])};ce.prototype.getSQL=function(){return new I([this])};function ul(t){return t[V.Symbol.Columns]}function dl(t){return t[U].selectedFields}function D(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var st,at;class j extends(at=h,st=a,at){generatedAlwaysAsIdentity(e){if(e){const{name:n,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(j,st,"PgIntColumnBaseBuilder");var ot,lt;class Dr extends(lt=j,ot=a,lt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Br(e,this.config)}}s(Dr,ot,"PgBigInt53Builder");var ut,dt;class Br extends(dt=g,ut=a,dt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Br,ut,"PgBigInt53");var ct,pt;class Vr extends(pt=j,ct=a,pt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new zr(e,this.config)}}s(Vr,ct,"PgBigInt64Builder");var mt,ft;class zr extends(ft=g,mt=a,ft){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(zr,mt,"PgBigInt64");function cl(t,e){const{name:n,config:i}=D(t,e);return i.mode==="number"?new Dr(n):new Vr(n)}var gt,_t;class Er extends(_t=h,gt=a,_t){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Fr(e,this.config)}}s(Er,gt,"PgBigSerial53Builder");var ht,yt;class Fr extends(yt=g,ht=a,yt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Fr,ht,"PgBigSerial53");var Nt,bt;class Mr extends(bt=h,Nt=a,bt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new qr(e,this.config)}}s(Mr,Nt,"PgBigSerial64Builder");var wt,St;class qr extends(St=g,wt=a,St){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(qr,wt,"PgBigSerial64");function pl(t,e){const{name:n,config:i}=D(t,e);return i.mode==="number"?new Er(n):new Mr(n)}var Tt,vt;class Lr extends(vt=h,Tt=a,vt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Qr(e,this.config)}}s(Lr,Tt,"PgBooleanBuilder");var xt,It;class Qr extends(It=g,xt=a,It){getSQLType(){return"boolean"}}s(Qr,xt,"PgBoolean");function p(t){return new Lr(t??"")}var At,Pt;class Zr extends(Pt=h,At=a,Pt){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Ur(e,this.config)}}s(Zr,At,"PgCharBuilder");var Ct,Dt;class Ur extends(Dt=g,Ct=a,Dt){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(Ur,Ct,"PgChar");function ml(t,e={}){const{name:n,config:i}=D(t,e);return new Zr(n,i)}var Bt,Vt;class Or extends(Vt=h,Bt=a,Vt){constructor(e){super(e,"string","PgCidr")}build(e){return new Kr(e,this.config)}}s(Or,Bt,"PgCidrBuilder");var zt,Et;class Kr extends(Et=g,zt=a,Et){getSQLType(){return"cidr"}}s(Kr,zt,"PgCidr");function fl(t){return new Or(t??"")}var Ft,Mt;class $r extends(Mt=h,Ft=a,Mt){constructor(e,n,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=i}build(e){return new jr(e,this.config)}}s($r,Ft,"PgCustomColumnBuilder");var qt,Lt;class jr extends(Lt=g,qt=a,Lt){constructor(n,i){super(n,i);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}s(jr,qt,"PgCustomColumn");function Rr(t){return(e,n)=>{const{name:i,config:o}=D(e,n);return new $r(i,o,t)}}var Qt,Zt;class K extends(Zt=h,Qt=a,Zt){defaultNow(){return this.default(_`now()`)}}s(K,Qt,"PgDateColumnBaseBuilder");var Ut,Ot;class Xr extends(Ot=K,Ut=a,Ot){constructor(e){super(e,"date","PgDate")}build(e){return new Gr(e,this.config)}}s(Xr,Ut,"PgDateBuilder");var Kt,$t;class Gr extends($t=g,Kt=a,$t){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Gr,Kt,"PgDate");var jt,Rt;class Jr extends(Rt=K,jt=a,Rt){constructor(e){super(e,"string","PgDateString")}build(e){return new Hr(e,this.config)}}s(Jr,jt,"PgDateStringBuilder");var Xt,Gt;class Hr extends(Gt=g,Xt=a,Gt){getSQLType(){return"date"}}s(Hr,Xt,"PgDateString");function gl(t,e){const{name:n,config:i}=D(t,e);return(i==null?void 0:i.mode)==="date"?new Xr(n):new Jr(n)}var Jt,Ht;class Wr extends(Ht=h,Jt=a,Ht){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Yr(e,this.config)}}s(Wr,Jt,"PgDoublePrecisionBuilder");var Wt,Yt;class Yr extends(Yt=g,Wt=a,Yt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Yr,Wt,"PgDoublePrecision");function _l(t){return new Wr(t??"")}var kt,en;class kr extends(en=h,kt=a,en){constructor(e){super(e,"string","PgInet")}build(e){return new es(e,this.config)}}s(kr,kt,"PgInetBuilder");var tn,nn;class es extends(nn=g,tn=a,nn){getSQLType(){return"inet"}}s(es,tn,"PgInet");function hl(t){return new kr(t??"")}var rn,sn;class ts extends(sn=j,rn=a,sn){constructor(e){super(e,"number","PgInteger")}build(e){return new ns(e,this.config)}}s(ts,rn,"PgIntegerBuilder");var an,on;class ns extends(on=g,an=a,on){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(ns,an,"PgInteger");function v(t){return new ts(t??"")}var ln,un;class is extends(un=h,ln=a,un){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new rs(e,this.config)}}s(is,ln,"PgIntervalBuilder");var dn,cn;class rs extends(cn=g,dn=a,cn){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${n}${i}`}}s(rs,dn,"PgInterval");function yl(t,e={}){const{name:n,config:i}=D(t,e);return new is(n,i)}var pn,mn;class ss extends(mn=h,pn=a,mn){constructor(e){super(e,"json","PgJson")}build(e){return new as(e,this.config)}}s(ss,pn,"PgJsonBuilder");var fn,gn;class as extends(gn=g,fn=a,gn){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(as,fn,"PgJson");function Nl(t){return new ss(t??"")}var _n,hn;class os extends(hn=h,_n=a,hn){constructor(e){super(e,"json","PgJsonb")}build(e){return new ls(e,this.config)}}s(os,_n,"PgJsonbBuilder");var yn,Nn;class ls extends(Nn=g,yn=a,Nn){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(ls,yn,"PgJsonb");function F(t){return new os(t??"")}var bn,wn;class us extends(wn=h,bn=a,wn){constructor(e){super(e,"array","PgLine")}build(e){return new ds(e,this.config)}}s(us,bn,"PgLineBuilder");var Sn,Tn;class ds extends(Tn=g,Sn=a,Tn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,i,o]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(ds,Sn,"PgLine");var vn,xn;class cs extends(xn=h,vn=a,xn){constructor(e){super(e,"json","PgLineABC")}build(e){return new ps(e,this.config)}}s(cs,vn,"PgLineABCBuilder");var In,An;class ps extends(An=g,In=a,An){getSQLType(){return"line"}mapFromDriverValue(e){const[n,i,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(i),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(ps,In,"PgLineABC");function bl(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new us(n):new cs(n)}var Pn,Cn;class ms extends(Cn=h,Pn=a,Cn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new fs(e,this.config)}}s(ms,Pn,"PgMacaddrBuilder");var Dn,Bn;class fs extends(Bn=g,Dn=a,Bn){getSQLType(){return"macaddr"}}s(fs,Dn,"PgMacaddr");function wl(t){return new ms(t??"")}var Vn,zn;class gs extends(zn=h,Vn=a,zn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new _s(e,this.config)}}s(gs,Vn,"PgMacaddr8Builder");var En,Fn;class _s extends(Fn=g,En=a,Fn){getSQLType(){return"macaddr8"}}s(_s,En,"PgMacaddr8");function Sl(t){return new gs(t??"")}var Mn,qn;class hs extends(qn=h,Mn=a,qn){constructor(e,n,i){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=i}build(e){return new ys(e,this.config)}}s(hs,Mn,"PgNumericBuilder");var Ln,Qn;class ys extends(Qn=g,Ln=a,Qn){constructor(n,i){super(n,i);s(this,"precision");s(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(ys,Ln,"PgNumeric");function Ns(t,e){const{name:n,config:i}=D(t,e);return new hs(n,i==null?void 0:i.precision,i==null?void 0:i.scale)}const M=Ns;var Zn,Un;class bs extends(Un=h,Zn=a,Un){constructor(e){super(e,"array","PgPointTuple")}build(e){return new ws(e,this.config)}}s(bs,Zn,"PgPointTupleBuilder");var On,Kn;class ws extends(Kn=g,On=a,Kn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(ws,On,"PgPointTuple");var $n,jn;class Ss extends(jn=h,$n=a,jn){constructor(e){super(e,"json","PgPointObject")}build(e){return new Ts(e,this.config)}}s(Ss,$n,"PgPointObjectBuilder");var Rn,Xn;class Ts extends(Xn=g,Rn=a,Xn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(Ts,Rn,"PgPointObject");function Tl(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new bs(n):new Ss(n)}function vl(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function Te(t,e){const n=new ArrayBuffer(8),i=new DataView(n);for(let o=0;o<8;o++)i.setUint8(o,t[e+o]);return i.getFloat64(0,!0)}function vs(t){const e=vl(t);let n=0;const i=e[n];n+=1;const o=new DataView(e.buffer),d=o.getUint32(n,i===1);if(n+=4,d&536870912&&(o.getUint32(n,i===1),n+=4),(d&65535)===1){const f=Te(e,n);n+=8;const w=Te(e,n);return n+=8,[f,w]}throw new Error("Unsupported geometry type")}var Gn,Jn;class xs extends(Jn=h,Gn=a,Jn){constructor(e){super(e,"array","PgGeometry")}build(e){return new Is(e,this.config)}}s(xs,Gn,"PgGeometryBuilder");var Hn,Wn;class Is extends(Wn=g,Hn=a,Wn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return vs(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(Is,Hn,"PgGeometry");var Yn,kn;class As extends(kn=h,Yn=a,kn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Ps(e,this.config)}}s(As,Yn,"PgGeometryObjectBuilder");var ei,ti;class Ps extends(ti=g,ei=a,ti){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=vs(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(Ps,ei,"PgGeometryObject");function xl(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new xs(n):new As(n)}var ni,ii;class Cs extends(ii=h,ni=a,ii){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new Ds(e,this.config)}}s(Cs,ni,"PgRealBuilder");var ri,si;class Ds extends(si=g,ri=a,si){constructor(n,i){super(n,i);s(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}s(Ds,ri,"PgReal");function Il(t){return new Cs(t??"")}var ai,oi;class Bs extends(oi=h,ai=a,oi){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Vs(e,this.config)}}s(Bs,ai,"PgSerialBuilder");var li,ui;class Vs extends(ui=g,li=a,ui){getSQLType(){return"serial"}}s(Vs,li,"PgSerial");function Al(t){return new Bs(t??"")}var di,ci;class zs extends(ci=j,di=a,ci){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Es(e,this.config)}}s(zs,di,"PgSmallIntBuilder");var pi,mi;class Es extends(mi=g,pi=a,mi){constructor(){super(...arguments);s(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}s(Es,pi,"PgSmallInt");function Pl(t){return new zs(t??"")}var fi,gi;class Fs extends(gi=h,fi=a,gi){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ms(e,this.config)}}s(Fs,fi,"PgSmallSerialBuilder");var _i,hi;class Ms extends(hi=g,_i=a,hi){getSQLType(){return"smallserial"}}s(Ms,_i,"PgSmallSerial");function Cl(t){return new Fs(t??"")}var yi,Ni;class qs extends(Ni=h,yi=a,Ni){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new Ls(e,this.config)}}s(qs,yi,"PgTextBuilder");var bi,wi;class Ls extends(wi=g,bi=a,wi){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(Ls,bi,"PgText");function r(t,e={}){const{name:n,config:i}=D(t,e);return new qs(n,i)}var Si,Ti;class Qs extends(Ti=K,Si=a,Ti){constructor(e,n,i){super(e,"string","PgTime"),this.withTimezone=n,this.precision=i,this.config.withTimezone=n,this.config.precision=i}build(e){return new Zs(e,this.config)}}s(Qs,Si,"PgTimeBuilder");var vi,xi;class Zs extends(xi=g,vi=a,xi){constructor(n,i){super(n,i);s(this,"withTimezone");s(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Zs,vi,"PgTime");function Dl(t,e={}){const{name:n,config:i}=D(t,e);return new Qs(n,i.withTimezone??!1,i.precision)}var Ii,Ai;class Us extends(Ai=K,Ii=a,Ai){constructor(e,n,i){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=i}build(e){return new Os(e,this.config)}}s(Us,Ii,"PgTimestampBuilder");var Pi,Ci;class Os extends(Ci=g,Pi=a,Ci){constructor(n,i){super(n,i);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));s(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Os,Pi,"PgTimestamp");var Di,Bi;class Ks extends(Bi=K,Di=a,Bi){constructor(e,n,i){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=i}build(e){return new $s(e,this.config)}}s(Ks,Di,"PgTimestampStringBuilder");var Vi,zi;class $s extends(zi=g,Vi=a,zi){constructor(n,i){super(n,i);s(this,"withTimezone");s(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s($s,Vi,"PgTimestampString");function l(t,e={}){const{name:n,config:i}=D(t,e);return(i==null?void 0:i.mode)==="string"?new Ks(n,i.withTimezone??!1,i.precision):new Us(n,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var Ei,Fi;class js extends(Fi=h,Ei=a,Fi){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(_`gen_random_uuid()`)}build(e){return new Rs(e,this.config)}}s(js,Ei,"PgUUIDBuilder");var Mi,qi;class Rs extends(qi=g,Mi=a,qi){getSQLType(){return"uuid"}}s(Rs,Mi,"PgUUID");function Bl(t){return new js(t??"")}var Li,Qi;class Xs extends(Qi=h,Li=a,Qi){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Gs(e,this.config)}}s(Xs,Li,"PgVarcharBuilder");var Zi,Ui;class Gs extends(Ui=g,Zi=a,Ui){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Gs,Zi,"PgVarchar");function u(t,e={}){const{name:n,config:i}=D(t,e);return new Xs(n,i)}var Oi,Ki;class Js extends(Ki=h,Oi=a,Ki){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Hs(e,this.config)}}s(Js,Oi,"PgBinaryVectorBuilder");var $i,ji;class Hs extends(ji=g,$i=a,ji){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Hs,$i,"PgBinaryVector");function Vl(t,e){const{name:n,config:i}=D(t,e);return new Js(n,i)}var Ri,Xi;class Ws extends(Xi=h,Ri=a,Xi){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Ys(e,this.config)}}s(Ws,Ri,"PgHalfVectorBuilder");var Gi,Ji;class Ys extends(Ji=g,Gi=a,Ji){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}s(Ys,Gi,"PgHalfVector");function zl(t,e){const{name:n,config:i}=D(t,e);return new Ws(n,i)}var Hi,Wi;class ks extends(Wi=h,Hi=a,Wi){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new ea(e,this.config)}}s(ks,Hi,"PgSparseVectorBuilder");var Yi,ki;class ea extends(ki=g,Yi=a,ki){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(ea,Yi,"PgSparseVector");function El(t,e){const{name:n,config:i}=D(t,e);return new ks(n,i)}var er,tr;class ta extends(tr=h,er=a,tr){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new na(e,this.config)}}s(ta,er,"PgVectorBuilder");var nr,ir;class na extends(ir=g,nr=a,ir){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}s(na,nr,"PgVector");function Fl(t,e){const{name:n,config:i}=D(t,e);return new ta(n,i)}function Ml(){return{bigint:cl,bigserial:pl,boolean:p,char:ml,cidr:fl,customType:Rr,date:gl,doublePrecision:_l,inet:hl,integer:v,interval:yl,json:Nl,jsonb:F,line:bl,macaddr:wl,macaddr8:Sl,numeric:Ns,point:Tl,geometry:xl,real:Il,serial:Al,smallint:Pl,smallserial:Cl,text:r,time:Dl,timestamp:l,uuid:Bl,varchar:u,bit:Vl,halfvec:zl,sparsevec:El,vector:Fl}}const oe=Symbol.for("drizzle:PgInlineForeignKeys"),ve=Symbol.for("drizzle:EnableRLS");var rr,sr,ar,or,lr;class $ extends(lr=V,or=a,ar=oe,sr=ve,rr=V.Symbol.ExtraConfigBuilder,lr){constructor(){super(...arguments);s(this,ar,[]);s(this,sr,!1);s(this,rr)}}s($,or,"PgTable"),s($,"Symbol",Object.assign({},V.Symbol,{InlineForeignKeys:oe,EnableRLS:ve}));function ql(t,e,n,i,o=t){const d=new $(t,i,o),f=typeof e=="function"?e(Ml()):e,w=Object.fromEntries(Object.entries(f).map(([c,E])=>{const S=E;S.setName(c);const C=S.build(d);return d[oe].push(...S.buildForeignKeys(C,d)),[c,C]})),b=Object.fromEntries(Object.entries(f).map(([c,E])=>{const S=E;S.setName(c);const C=S.buildExtraConfigColumn(d);return[c,C]})),T=Object.assign(d,w);return T[V.Symbol.Columns]=w,T[V.Symbol.ExtraConfigColumns]=b,n&&(T[$.Symbol.ExtraConfigBuilder]=n),Object.assign(T,{enableRLS:()=>(T[$.Symbol.EnableRLS]=!0,T)})}const y=(t,e,n)=>ql(t,e,n,void 0);var ur;ur=a;class me{constructor(e,n){this.unique=e,this.name=n}on(...e){return new X(e.map(n=>{if(P(n,I))return n;n=n;const i=new R(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new X(e.map(n=>{if(P(n,I))return n;n=n;const i=new R(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,i}),this.unique,!0,this.name)}using(e,...n){return new X(n.map(i=>{if(P(i,I))return i;i=i;const o=new R(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),o}),this.unique,!0,this.name,e)}}s(me,ur,"PgIndexBuilderOn");var dr;dr=a;class X{constructor(e,n,i,o,d="btree"){s(this,"config");this.config={name:o,columns:e,unique:n,only:i,method:d}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ia(this.config,e)}}s(X,dr,"PgIndexBuilder");var cr;cr=a;class ia{constructor(e,n){s(this,"config");this.config={...e,table:n}}}s(ia,cr,"PgIndex");function m(t){return new me(!1,t)}function k(t){return new me(!0,t)}const x={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function A(t,e){return e.includes(t.columnType)}function Ll(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Ql=de([_r(),le(),L(),fr()]),Zl=de([Ql,gr(G()),pr(G())]),Ul=mr(t=>t instanceof Buffer);function ra(t,e){const n=(e==null?void 0:e.zodInstance)??el,i=(e==null?void 0:e.coerce)??{};let o;return Ll(t)&&(o=t.enumValues.length?n.enum(t.enumValues):n.string()),o||(A(t,["PgGeometry","PgPointTuple"])?o=n.tuple([n.number(),n.number()]):A(t,["PgGeometryObject","PgPointObject"])?o=n.object({x:n.number(),y:n.number()}):A(t,["PgHalfVector","PgVector"])?(o=n.array(n.number()),o=t.dimensions?o.length(t.dimensions):o):A(t,["PgLine"])?o=n.tuple([n.number(),n.number(),n.number()]):A(t,["PgLineABC"])?o=n.object({a:n.number(),b:n.number(),c:n.number()}):A(t,["PgArray"])?(o=n.array(ra(t.baseColumn,n)),o=t.size?o.length(t.size):o):t.dataType==="array"?o=n.array(n.any()):t.dataType==="number"?o=Ol(t,n,i):t.dataType==="bigint"?o=Kl(t,n,i):t.dataType==="boolean"?o=i===!0||i.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?o=i===!0||i.date?n.coerce.date():n.date():t.dataType==="string"?o=$l(t,n,i):t.dataType==="json"?o=Zl:t.dataType==="custom"?o=n.any():t.dataType==="buffer"&&(o=Ul)),o||(o=n.any()),o}function Ol(t,e,n){let i=t.getSQLType().includes("unsigned"),o,d,f=!1;A(t,["MySqlTinyInt","SingleStoreTinyInt"])?(o=i?0:x.INT8_MIN,d=i?x.INT8_UNSIGNED_MAX:x.INT8_MAX,f=!0):A(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=i?0:x.INT16_MIN,d=i?x.INT16_UNSIGNED_MAX:x.INT16_MAX,f=!0):A(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=i?0:x.INT24_MIN,d=i?x.INT24_UNSIGNED_MAX:x.INT24_MAX,f=A(t,["MySqlMediumInt","SingleStoreMediumInt"])):A(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=i?0:x.INT32_MIN,d=i?x.INT32_UNSIGNED_MAX:x.INT32_MAX,f=!0):A(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=i?0:x.INT48_MIN,d=i?x.INT48_UNSIGNED_MAX:x.INT48_MAX):A(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||A(t,["MySqlSerial","SingleStoreSerial"]),o=i?0:Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,f=!0):A(t,["MySqlYear","SingleStoreYear"])?(o=1901,d=2155,f=!0):(o=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER);let w=n===!0||n!=null&&n.number?e.coerce.number():e.number();return w=w.min(o).max(d),f?w.int():w}function Kl(t,e,n){const i=t.getSQLType().includes("unsigned"),o=i?0n:x.INT64_MIN,d=i?x.INT64_UNSIGNED_MAX:x.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(o).max(d)}function $l(t,e,n){if(A(t,["PgUUID"]))return e.string().uuid();let i,o,d=!1;A(t,["PgVarchar","SQLiteText"])?i=t.length:A(t,["MySqlVarChar","SingleStoreVarChar"])?i=t.length??x.INT16_UNSIGNED_MAX:A(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?i=x.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?i=x.INT24_UNSIGNED_MAX:t.textType==="text"?i=x.INT16_UNSIGNED_MAX:i=x.INT8_UNSIGNED_MAX),A(t,["PgChar","MySqlChar","SingleStoreChar"])&&(i=t.length,d=!0),A(t,["PgBinaryVector"])&&(o=/^[01]+$/,i=t.dimensions);let f=n===!0||n!=null&&n.string?e.coerce.string():e.string();return f=o?f.regex(o):f,i&&d?f.length(i):i?f.max(i):f}function sa(t){return xr(t)?ul(t):dl(t)}function aa(t,e,n,i){const o={};for(const[d,f]of Object.entries(t)){if(!P(f,O)&&!P(f,I)&&!P(f,I.Aliased)&&typeof f=="object"){const E=xr(f)||ll(f)?sa(f):f;o[d]=aa(E,e[d]??{},n,i);continue}const w=e[d];if(w!==void 0&&typeof w!="function"){o[d]=w;continue}const b=P(f,O)?f:void 0,T=b?ra(b,i):G(),c=typeof w=="function"?w(T):T;n.never(b)||(o[d]=c,b&&(n.nullable(b)&&(o[d]=o[d].nullable()),n.optional(b)&&(o[d]=o[d].optional())))}return ue(o)}const jl={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},N=(t,e)=>{const n=sa(t);return aa(n,{},jl)},oa=Rr({dataType(){return"geography"}});y("sessions",{sid:u("sid").primaryKey(),sess:F("sess").notNull(),expire:l("expire").notNull()});ue({emergencyAlerts:L().default(!0),generalUpdates:L().default(!0),promotions:L().default(!1),systemAlerts:L().default(!0),vetTips:L().default(!0)});const B=y("users",{id:u("id").primaryKey().default(_`gen_random_uuid()`),username:r("username"),password:r("password"),email:u("email").unique(),phone:r("phone"),passwordHash:r("password_hash"),googleId:r("google_id").unique(),openidSub:r("openid_sub").unique(),role:r("role").notNull().default("user"),name:u("name"),avatar:r("avatar"),profileImageUrl:u("profile_image_url"),language:r("language").default("en"),languagePreference:r("language_preference"),region:r("region"),regionPreference:r("region_preference"),clinicId:u("clinic_id").references(()=>fe.id,{onDelete:"set null"}),notificationPreferences:F("notification_preferences").$type(),twoFactorSecret:r("two_factor_secret"),twoFactorEnabled:p("two_factor_enabled").notNull().default(!1),twoFactorBackupCodes:r("two_factor_backup_codes").array(),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_user_email").on(t.email),m("idx_user_phone").on(t.phone)]);N(B).omit({id:!0,createdAt:!0,updatedAt:!0});const ee=y("pets",{id:u("id").primaryKey().default(_`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),name:r("name").notNull(),species:r("species").notNull(),breed:r("breed"),breedId:u("breed_id").references(()=>la.id),age:v("age"),weight:r("weight"),medicalNotes:r("medical_notes"),createdAt:l("created_at").notNull().defaultNow(),lastVisitHospitalId:u("last_visit_hospital_id").references(()=>q.id,{onDelete:"set null"}),lastVisitDate:l("last_visit_date"),type:r("type"),color:r("color"),medicalHistory:r("medical_history"),microchipId:r("microchip_id"),photoUrl:r("photo_url")});N(ee).omit({id:!0,createdAt:!0});const Rl=y("countries",{id:u("id").primaryKey().default(_`gen_random_uuid()`),code:r("code").notNull().unique(),nameEn:r("name_en").notNull(),nameZh:r("name_zh"),region:r("region"),active:p("active"),phonePrefix:r("phone_prefix"),flag:r("flag")}),gu=N(Rl).omit({id:!0}),te=y("regions",{id:u("id").primaryKey().default(_`gen_random_uuid()`),countryCode:r("country_code").notNull(),code:r("code").notNull(),nameEn:r("name_en").notNull(),nameZh:r("name_zh"),coordinates:F("coordinates"),active:p("active").notNull().default(!0)},t=>[m("idx_region_country_code").on(t.countryCode)]),_u=N(te).omit({id:!0}),la=y("pet_breeds",{id:u("id").primaryKey().default(_`gen_random_uuid()`),species:r("species").notNull(),breedEn:r("breed_en").notNull(),breedZh:r("breed_zh"),countryCode:r("country_code"),isCommon:p("is_common").default(!1),active:p("active").notNull().default(!0)}),hu=N(la).omit({id:!0}),fe=y("clinics",{id:u("id").primaryKey().default(_`gen_random_uuid()`),name:r("name").notNull(),nameZh:r("name_zh"),address:r("address").notNull(),addressZh:r("address_zh"),phone:r("phone").notNull(),whatsapp:r("whatsapp"),email:r("email"),lineUserId:r("line_user_id"),regionId:u("region_id").notNull().references(()=>te.id),is24Hour:p("is_24_hour").notNull().default(!1),isAvailable:p("is_available").notNull().default(!0),isSupportHospital:p("is_support_hospital").notNull().default(!1),latitude:M("latitude"),longitude:M("longitude"),location:oa("location"),status:r("status").notNull().default("active"),services:r("services").array(),ownerVerificationCode:r("owner_verification_code"),ownerVerificationCodeExpiresAt:l("owner_verification_code_expires_at"),averageRating:M("average_rating"),reviewCount:v("review_count").notNull().default(0),createdAt:l("created_at").notNull().defaultNow()}),yu=N(fe).omit({id:!0,location:!0,createdAt:!0}),ua=y("emergency_requests",{id:u("id").primaryKey().default(_`gen_random_uuid()`),userId:u("user_id").references(()=>B.id,{onDelete:"set null"}),petId:u("pet_id").references(()=>ee.id,{onDelete:"set null"}),symptom:r("symptom").notNull(),locationLatitude:M("location_latitude"),locationLongitude:M("location_longitude"),manualLocation:r("manual_location"),contactName:r("contact_name").notNull(),contactPhone:r("contact_phone").notNull(),status:r("status").notNull().default("pending"),regionId:u("region_id").references(()=>te.id),createdAt:l("created_at").notNull().defaultNow(),petSpecies:r("pet_species"),petBreed:r("pet_breed"),petAge:v("pet_age"),voiceTranscript:r("voice_transcript"),aiAnalyzedSymptoms:r("ai_analyzed_symptoms"),isVoiceRecording:p("is_voice_recording").notNull().default(!1)});N(ua).omit({id:!0,createdAt:!0});const q=y("hospitals",{id:u("id").primaryKey().default(_`gen_random_uuid()`),slug:r("slug").notNull().unique(),nameEn:r("name_en").notNull(),nameZh:r("name_zh").notNull(),addressEn:r("address_en").notNull(),addressZh:r("address_zh").notNull(),regionId:u("region_id").notNull().references(()=>te.id),latitude:M("latitude"),longitude:M("longitude"),location:oa("location"),phone:r("phone"),whatsapp:r("whatsapp"),email:r("email"),websiteUrl:r("website_url"),open247:p("open_247").notNull().default(!0),isAvailable:p("is_available").notNull().default(!0),isPartner:p("is_partner").notNull().default(!1),liveStatus:r("live_status"),photos:F("photos"),lastVerifiedAt:l("last_verified_at"),verifiedById:u("verified_by_id").references(()=>B.id,{onDelete:"set null"}),onSiteVet247:p("on_site_vet_247"),triagePolicy:r("triage_policy"),typicalWaitBand:r("typical_wait_band"),isolationWard:p("isolation_ward"),ambulanceSupport:p("ambulance_support"),icuLevel:r("icu_level"),nurse24h:p("nurse_24h"),ownerVisitPolicy:r("owner_visit_policy"),eolSupport:p("eol_support"),imagingXray:p("imaging_xray"),imagingUS:p("imaging_us"),imagingCT:p("imaging_ct"),sameDayCT:p("same_day_ct"),inHouseLab:p("in_house_lab"),extLabCutoff:r("ext_lab_cutoff"),bloodBankAccess:r("blood_bank_access"),sxEmergencySoft:p("sx_emergency_soft"),sxEmergencyOrtho:p("sx_emergency_ortho"),anaesMonitoring:r("anaes_monitoring"),specialistAvail:r("specialist_avail"),oxygenTherapy:p("oxygen_therapy"),ventilator:p("ventilator"),bloodTransfusion:p("blood_transfusion"),imagingMRI:p("imaging_mri"),endoscopy:p("endoscopy"),dialysis:p("dialysis"),defibrillator:p("defibrillator"),speciesAccepted:r("species_accepted").array(),whatsappTriage:p("whatsapp_triage"),languages:r("languages").array(),parking:p("parking"),wheelchairAccess:p("wheelchair_access"),payMethods:r("pay_methods").array(),admissionDeposit:p("admission_deposit"),depositBand:r("deposit_band"),insuranceSupport:r("insurance_support").array(),recheckWindow:r("recheck_window"),refundPolicy:r("refund_policy"),ownerVerificationCode:r("owner_verification_code"),ownerVerificationCodeExpiresAt:l("owner_verification_code_expires_at"),verified:p("verified").notNull().default(!1),bloodBankCanine:p("blood_bank_canine"),bloodBankFeline:p("blood_bank_feline"),bloodTypesAvailable:r("blood_types_available").array(),consultFeeDay:v("consult_fee_day"),consultFeeEvening:v("consult_fee_evening"),consultFeeMidnight:v("consult_fee_midnight"),eveningSurchargeStart:r("evening_surcharge_start"),midnightSurchargeStart:r("midnight_surcharge_start"),holidaySurchargePercent:v("holiday_surcharge_percent"),oxygenCageCount:v("oxygen_cage_count"),icuBedCount:v("icu_bed_count"),icuNurseCount:v("icu_nurse_count"),overnightVetNurseRatio:r("overnight_vet_nurse_ratio"),exoticVet247:p("exotic_vet_247"),exoticSpecies247:r("exotic_species_247").array(),imagingTech247:p("imaging_tech_247"),ctScanOnSite:p("ct_scan_on_site"),mriOnSite:p("mri_on_site"),antivenomStock:p("antivenom_stock"),ratPoisonAntidote:p("rat_poison_antidote"),gastricLavageKit:p("gastric_lavage_kit"),activatedCharcoal:p("activated_charcoal"),surgeon247:r("surgeon_247"),surgeonCalloutTime:r("surgeon_callout_time"),cctvMonitoring:p("cctv_monitoring"),visitationHours:r("visitation_hours"),emergencyEntranceEn:r("emergency_entrance_en"),emergencyEntranceZh:r("emergency_entrance_zh"),parkingDetailsEn:r("parking_details_en"),parkingDetailsZh:r("parking_details_zh"),taxiDropoffEn:r("taxi_dropoff_en"),taxiDropoffZh:r("taxi_dropoff_zh"),openT8:p("open_t8"),openT10:p("open_t10"),openBlackRainstorm:p("open_black_rainstorm"),lunarNewYearOpen:p("lunar_new_year_open"),lunarNewYearSurcharge:v("lunar_new_year_surcharge"),christmasOpen:p("christmas_open"),accessCode:u("access_code",{length:8}).unique(),lastConfirmedAt:l("last_confirmed_at"),confirmedByName:r("confirmed_by_name"),inviteSentAt:l("invite_sent_at"),feeSource:r("fee_source"),waitTimeSource:r("wait_time_source"),statusSource:r("status_source"),dataConfidenceScore:v("data_confidence_score"),lastReplyAt:l("last_reply_at"),replyChannel:r("reply_channel"),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_hospital_location").using("gist",t.location),m("idx_hospital_region").on(t.regionId),k("idx_hospital_access_code").on(t.accessCode)]),Nu=N(q).omit({id:!0,location:!0,createdAt:!0,updatedAt:!0}),Xl=y("messages",{id:u("id").primaryKey().default(_`gen_random_uuid()`),emergencyRequestId:u("emergency_request_id").notNull().references(()=>ua.id,{onDelete:"cascade"}),hospitalId:u("hospital_id").notNull().references(()=>q.id,{onDelete:"cascade"}),messageType:r("message_type").notNull(),recipient:r("recipient").notNull(),content:r("content").notNull(),status:r("status").notNull().default("queued"),whatsappMessageId:r("whatsapp_message_id"),templateName:r("template_name"),templateVariables:F("template_variables").$type(),templateLanguage:r("template_language"),sentAt:l("sent_at"),deliveredAt:l("delivered_at"),readAt:l("read_at"),failedAt:l("failed_at"),errorMessage:r("error_message"),retryCount:v("retry_count").notNull().default(0),createdAt:l("created_at").notNull().defaultNow()});N(Xl).omit({id:!0,createdAt:!0});const Gl=y("feature_flags",{id:u("id").primaryKey().default(_`gen_random_uuid()`),key:r("key").notNull().unique(),enabled:p("enabled").notNull().default(!1),value:F("value"),description:r("description"),updatedAt:l("updated_at").notNull().defaultNow()});N(Gl).omit({id:!0,updatedAt:!0});const Jl=y("audit_logs",{id:u("id").primaryKey().default(_`gen_random_uuid()`),entityType:r("entity_type").notNull(),entityId:r("entity_id").notNull(),action:r("action").notNull(),userId:u("user_id").references(()=>B.id,{onDelete:"set null"}),changes:F("changes"),ipAddress:r("ip_address"),userAgent:r("user_agent"),createdAt:l("created_at").notNull().defaultNow()});N(Jl).omit({id:!0,createdAt:!0});const Hl=y("privacy_consents",{id:u("id").primaryKey().default(_`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),consentType:r("consent_type").notNull(),accepted:p("accepted").notNull(),consentedAt:l("consented_at").notNull().defaultNow()});N(Hl).omit({id:!0,consentedAt:!0});const Wl=y("translations",{id:u("id").primaryKey().default(_`gen_random_uuid()`),key:r("key").notNull(),language:r("language").notNull(),value:r("value").notNull(),namespace:r("namespace").notNull().default("common"),updatedAt:l("updated_at").notNull().defaultNow()});N(Wl).omit({id:!0,updatedAt:!0});const Yl=y("hospital_consult_fees",{id:u("id").primaryKey().default(_`gen_random_uuid()`),hospitalId:u("hospital_id").notNull().references(()=>q.id,{onDelete:"cascade"}),feeType:r("fee_type").notNull(),species:r("species").notNull(),minFee:M("min_fee"),maxFee:M("max_fee"),currency:r("currency").notNull().default("HKD"),notes:r("notes"),lastUpdated:l("last_updated").notNull().defaultNow()},t=>[m("idx_consult_fees_hospital").on(t.hospitalId),k("idx_consult_fees_unique").on(t.hospitalId,t.feeType,t.species)]);N(Yl).omit({id:!0});const kl=y("hospital_updates",{id:u("id").primaryKey().default(_`gen_random_uuid()`),hospitalId:u("hospital_id").notNull().references(()=>q.id,{onDelete:"cascade"}),submittedById:u("submitted_by_id").references(()=>B.id,{onDelete:"set null"}),updateType:r("update_type").notNull(),fieldName:r("field_name"),oldValue:r("old_value"),newValue:r("new_value"),status:r("status").notNull().default("pending"),reviewedById:u("reviewed_by_id").references(()=>B.id,{onDelete:"set null"}),reviewedAt:l("reviewed_at"),notes:r("notes"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_hospital_updates_hospital").on(t.hospitalId)]);N(kl).omit({id:!0,createdAt:!0});const eu=y("pet_medical_records",{id:u("id").primaryKey().default(_`gen_random_uuid()`),petId:u("pet_id").notNull().references(()=>ee.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>B.id),documentType:r("document_type").notNull(),title:r("title").notNull(),description:r("description"),filePath:r("file_path").notNull(),fileSize:v("file_size").notNull(),mimeType:r("mime_type").notNull(),isConfidential:p("is_confidential").notNull().default(!1),uploadedAt:l("uploaded_at").notNull().defaultNow(),expiresAt:l("expires_at")},t=>[m("idx_pet_medical_records_pet").on(t.petId),m("idx_pet_medical_records_user").on(t.userId)]);N(eu).omit({id:!0,uploadedAt:!0});const tu=y("pet_medical_sharing_consents",{id:u("id").primaryKey().default(_`gen_random_uuid()`),petId:u("pet_id").notNull().references(()=>ee.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),consentType:r("consent_type").notNull(),enabled:p("enabled").notNull().default(!1),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_pet_medical_sharing_consent_pet").on(t.petId),m("idx_pet_medical_sharing_consent_user").on(t.userId)]);N(tu).omit({id:!0,updatedAt:!0});const nu=y("push_subscriptions",{id:u("id").primaryKey().default(_`gen_random_uuid()`),userId:u("user_id").references(()=>B.id,{onDelete:"cascade"}),token:r("token").notNull().unique(),provider:r("provider").notNull().default("fcm"),platform:r("platform").notNull(),browserInfo:r("browser_info"),language:r("language").default("en"),isActive:p("is_active").notNull().default(!0),createdAt:l("created_at").notNull().defaultNow(),lastActiveAt:l("last_active_at").notNull().defaultNow()},t=>[m("idx_push_subscriptions_user").on(t.userId),m("idx_push_subscriptions_token").on(t.token)]);N(nu).omit({id:!0,createdAt:!0,lastActiveAt:!0});const iu=y("notification_broadcasts",{id:u("id").primaryKey().default(_`gen_random_uuid()`),adminId:u("admin_id").notNull().references(()=>B.id),title:r("title").notNull(),message:r("message").notNull(),targetLanguage:r("target_language"),targetAudience:r("target_audience").notNull().default("all"),targetRole:r("target_role"),url:r("url"),recipientCount:v("recipient_count"),status:r("status").notNull().default("pending"),scheduledFor:l("scheduled_for"),providerResponse:F("provider_response"),createdAt:l("created_at").notNull().defaultNow(),sentAt:l("sent_at")},t=>[m("idx_notification_broadcasts_admin").on(t.adminId),m("idx_notification_broadcasts_status").on(t.status),m("idx_notification_broadcasts_scheduled").on(t.scheduledFor)]);N(iu).omit({id:!0,createdAt:!0,sentAt:!0,recipientCount:!0,providerResponse:!0});const ru=y("clinic_reviews",{id:u("id").primaryKey().default(_`gen_random_uuid()`),clinicId:u("clinic_id").notNull().references(()=>fe.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),rating:v("rating").notNull(),reviewText:r("review_text"),status:r("status").notNull().default("pending"),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_clinic_reviews_clinic").on(t.clinicId),m("idx_clinic_reviews_user").on(t.userId),m("idx_clinic_reviews_status").on(t.status)]);N(ru).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({rating:le().min(1).max(5)});const da=y("whatsapp_conversations",{id:u("id").primaryKey().default(_`gen_random_uuid()`),hospitalId:u("hospital_id").references(()=>q.id,{onDelete:"set null"}),phoneNumber:r("phone_number").notNull(),displayName:r("display_name"),lastMessageAt:l("last_message_at").notNull().defaultNow(),lastMessagePreview:r("last_message_preview"),unreadCount:v("unread_count").notNull().default(0),isArchived:p("is_archived").notNull().default(!1),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_whatsapp_conversations_phone").on(t.phoneNumber),m("idx_whatsapp_conversations_hospital").on(t.hospitalId),m("idx_whatsapp_conversations_last_message").on(t.lastMessageAt)]);N(da).omit({id:!0,createdAt:!0,updatedAt:!0});const su=y("whatsapp_chat_messages",{id:u("id").primaryKey().default(_`gen_random_uuid()`),conversationId:u("conversation_id").notNull().references(()=>da.id,{onDelete:"cascade"}),direction:r("direction").notNull(),content:r("content").notNull(),messageType:r("message_type").notNull().default("text"),mediaUrl:r("media_url"),whatsappMessageId:r("whatsapp_message_id"),status:r("status").notNull().default("sent"),sentAt:l("sent_at"),deliveredAt:l("delivered_at"),readAt:l("read_at"),errorMessage:r("error_message"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_whatsapp_chat_messages_conversation").on(t.conversationId),m("idx_whatsapp_chat_messages_created").on(t.createdAt),m("idx_whatsapp_chat_messages_whatsapp_id").on(t.whatsappMessageId)]);N(su).omit({id:!0,createdAt:!0});const ca=y("typhoon_alerts",{id:u("id").primaryKey().default(_`gen_random_uuid()`),signalCode:r("signal_code").notNull(),signalNameEn:r("signal_name_en").notNull(),signalNameZh:r("signal_name_zh").notNull(),issuedAt:l("issued_at").notNull(),liftedAt:l("lifted_at"),isActive:p("is_active").notNull().default(!0),observatoryBulletinId:r("observatory_bulletin_id"),severityLevel:v("severity_level").notNull(),notes:r("notes"),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_typhoon_alerts_active").on(t.isActive),m("idx_typhoon_alerts_issued").on(t.issuedAt)]);N(ca).omit({id:!0,createdAt:!0,updatedAt:!0});const pa=y("hk_holidays",{id:u("id").primaryKey().default(_`gen_random_uuid()`),date:l("date").notNull(),nameEn:r("name_en").notNull(),nameZh:r("name_zh").notNull(),holidayType:r("holiday_type").notNull(),year:v("year").notNull(),isGazetted:p("is_gazetted").notNull().default(!0),notes:r("notes")},t=>[m("idx_hk_holidays_date").on(t.date),m("idx_hk_holidays_year").on(t.year),k("idx_hk_holidays_unique").on(t.date,t.nameEn)]);N(pa).omit({id:!0});const au=y("hospital_emergency_status",{id:u("id").primaryKey().default(_`gen_random_uuid()`),hospitalId:u("hospital_id").notNull().references(()=>q.id,{onDelete:"cascade"}),statusType:r("status_type").notNull(),referenceId:u("reference_id"),isOpen:p("is_open").notNull(),openingTime:r("opening_time"),closingTime:r("closing_time"),confirmedAt:l("confirmed_at").notNull().defaultNow(),confirmedBy:u("confirmed_by").references(()=>B.id,{onDelete:"set null"}),confirmationMethod:r("confirmation_method"),notes:r("notes"),expiresAt:l("expires_at"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_hospital_emergency_status_hospital").on(t.hospitalId),m("idx_hospital_emergency_status_type").on(t.statusType),m("idx_hospital_emergency_status_reference").on(t.referenceId)]);N(au).omit({id:!0,createdAt:!0});const ou=y("typhoon_notification_queue",{id:u("id").primaryKey().default(_`gen_random_uuid()`),typhoonAlertId:u("typhoon_alert_id").references(()=>ca.id,{onDelete:"cascade"}),holidayId:u("holiday_id").references(()=>pa.id,{onDelete:"cascade"}),notificationType:r("notification_type").notNull(),targetAudience:r("target_audience").notNull(),channel:r("channel").notNull(),titleEn:r("title_en").notNull(),titleZh:r("title_zh").notNull(),bodyEn:r("body_en").notNull(),bodyZh:r("body_zh").notNull(),status:r("status").notNull().default("pending"),retryCount:v("retry_count").notNull().default(0),scheduledFor:l("scheduled_for"),sentAt:l("sent_at"),recipientCount:v("recipient_count"),errorMessage:r("error_message"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_typhoon_notification_queue_status").on(t.status),m("idx_typhoon_notification_queue_scheduled").on(t.scheduledFor)]);N(ou).omit({id:!0,createdAt:!0,sentAt:!0,recipientCount:!0});const lu=y("user_emergency_subscriptions",{id:u("id").primaryKey().default(_`gen_random_uuid()`),userId:u("user_id").references(()=>B.id,{onDelete:"cascade"}),email:r("email"),phone:r("phone"),pushToken:r("push_token"),subscriptionType:r("subscription_type").notNull(),notifyChannels:r("notify_channels").array().notNull().default(_`ARRAY['push']::text[]`),preferredLanguage:r("preferred_language").notNull().default("en"),isActive:p("is_active").notNull().default(!0),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_user_emergency_subscriptions_user").on(t.userId),m("idx_user_emergency_subscriptions_active").on(t.isActive)]);N(lu).omit({id:!0,createdAt:!0,updatedAt:!0});const ge=y("vet_consultants",{id:u("id").primaryKey().default(_`gen_random_uuid()`),fullName:r("full_name").notNull(),nameEn:r("name_en"),nameZh:r("name_zh"),role:r("role").notNull().default("vet"),vetType:r("vet_type"),clinicName:r("clinic_name"),educationBackground:r("education_background"),specialtyOrInterest:r("specialty_or_interest"),titleEn:r("title_en"),titleZh:r("title_zh"),specialtyEn:r("specialty_en"),specialtyZh:r("specialty_zh"),bioEn:r("bio_en"),bioZh:r("bio_zh"),photoUrl:r("photo_url"),licenseNumber:r("license_number"),hospitalAffiliationEn:r("hospital_affiliation_en"),hospitalAffiliationZh:r("hospital_affiliation_zh"),yearsExperience:v("years_experience"),visibilityPreference:r("visibility_preference").notNull().default("name_role"),internalNotes:r("internal_notes"),isActive:p("is_active").notNull().default(!0),isPublic:p("is_public").notNull().default(!0),joinedAt:l("joined_at").notNull().defaultNow(),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_vet_consultants_active").on(t.isActive),m("idx_vet_consultants_public").on(t.isPublic),m("idx_vet_consultants_role").on(t.role)]);N(ge).omit({id:!0,createdAt:!0,updatedAt:!0});const ma=y("verified_content_items",{id:u("id").primaryKey().default(_`gen_random_uuid()`),contentType:r("content_type").notNull(),contentSlug:r("content_slug").notNull().unique(),titleEn:r("title_en").notNull(),titleZh:r("title_zh"),descriptionEn:r("description_en"),descriptionZh:r("description_zh"),url:r("url"),isPublished:p("is_published").notNull().default(!0),publishedAt:l("published_at"),lastUpdatedAt:l("last_updated_at").notNull().defaultNow(),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_verified_content_type").on(t.contentType),m("idx_verified_content_slug").on(t.contentSlug),m("idx_verified_content_published").on(t.isPublished)]);N(ma).omit({id:!0,createdAt:!0});const uu=y("content_verifications",{id:u("id").primaryKey().default(_`gen_random_uuid()`),consultantId:u("consultant_id").notNull().references(()=>ge.id,{onDelete:"cascade"}),contentId:u("content_id").notNull().references(()=>ma.id,{onDelete:"cascade"}),verificationScope:r("verification_scope").notNull().default("clarity"),verifiedAt:l("verified_at").notNull().defaultNow(),verificationNotes:r("verification_notes"),adminNote:r("admin_note"),isVisible:p("is_visible").notNull().default(!0),contentVersion:r("content_version"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_content_verifications_consultant").on(t.consultantId),m("idx_content_verifications_content").on(t.contentId),k("idx_content_verifications_unique").on(t.consultantId,t.contentId)]);N(uu).omit({id:!0,createdAt:!0});const du=y("vet_applications",{id:u("id").primaryKey().default(_`gen_random_uuid()`),fullName:r("full_name").notNull(),role:r("role").notNull(),vetType:r("vet_type"),clinicName:r("clinic_name").notNull(),phoneWhatsapp:r("phone_whatsapp").notNull(),email:r("email"),educationBackground:r("education_background"),verificationScope:r("verification_scope").array(),futureContactInterest:r("future_contact_interest").array(),additionalComments:r("additional_comments"),consentAcknowledged:p("consent_acknowledged").notNull().default(!1),consentVersion:r("consent_version").notNull().default("v1"),nameEn:r("name_en"),nameZh:r("name_zh"),phone:r("phone"),licenseNumber:r("license_number"),titleEn:r("title_en"),titleZh:r("title_zh"),specialtyEn:r("specialty_en"),specialtyZh:r("specialty_zh"),hospitalAffiliationEn:r("hospital_affiliation_en"),hospitalAffiliationZh:r("hospital_affiliation_zh"),yearsExperience:v("years_experience"),motivationEn:r("motivation_en"),motivationZh:r("motivation_zh"),cvUrl:r("cv_url"),status:r("status").notNull().default("pending"),reviewedBy:u("reviewed_by").references(()=>B.id,{onDelete:"set null"}),reviewedAt:l("reviewed_at"),reviewNotes:r("review_notes"),createdConsultantId:u("created_consultant_id").references(()=>ge.id,{onDelete:"set null"}),submittedAt:l("submitted_at").notNull().defaultNow(),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()},t=>[m("idx_vet_applications_status").on(t.status),m("idx_vet_applications_role").on(t.role)]);N(du).omit({id:!0,status:!0,reviewedBy:!0,reviewedAt:!0,reviewNotes:!0,createdConsultantId:!0,submittedAt:!0,createdAt:!0,updatedAt:!0,nameEn:!0,nameZh:!0,phone:!0,licenseNumber:!0,titleEn:!0,titleZh:!0,specialtyEn:!0,specialtyZh:!0,hospitalAffiliationEn:!0,hospitalAffiliationZh:!0,yearsExperience:!0,motivationEn:!0,motivationZh:!0,cvUrl:!0});const cu=y("hospital_ping_state",{hospitalId:u("hospital_id").primaryKey().references(()=>q.id,{onDelete:"cascade"}),pingEnabled:p("ping_enabled").notNull().default(!0),pingStatus:r("ping_status").notNull().default("active"),lastPingSentAt:l("last_ping_sent_at"),lastPingMessageId:r("last_ping_message_id"),lastInboundReplyAt:l("last_inbound_reply_at"),lastReplyLatencySeconds:v("last_reply_latency_seconds"),noReplySince:l("no_reply_since"),createdAt:l("created_at").notNull().defaultNow(),updatedAt:l("updated_at").notNull().defaultNow()});N(cu).omit({createdAt:!0,updatedAt:!0});const pu=y("hospital_ping_logs",{id:u("id").primaryKey().default(_`gen_random_uuid()`),hospitalId:u("hospital_id").notNull().references(()=>q.id,{onDelete:"cascade"}),direction:r("direction").notNull(),providerMessageId:r("provider_message_id"),eventType:r("event_type").notNull(),sentAt:l("sent_at"),receivedAt:l("received_at"),payload:F("payload"),createdAt:l("created_at").notNull().defaultNow()},t=>[m("idx_ping_logs_hospital").on(t.hospitalId),m("idx_ping_logs_created").on(t.createdAt)]);N(pu).omit({id:!0,createdAt:!0});export{gu as a,_u as b,hu as c,yu as d,Nu as i};
