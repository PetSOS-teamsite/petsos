import{a as je,r as l,h as oe,g as be,j as e,a3 as ye,B as d,I as N,ao as fe,N as we,a1 as Ne,C as Ce,b as ve,a6 as L,a7 as V,a8 as Z,a9 as F,aa as q,a5 as ke,ab as W,o as Se,s as g,aU as Ae,F as De,w as x,x as h,y as m,z as p,A as u,E as Ee,G as $e,H as Ie,J as Te,K as Oe,O as S,Q as H,ad as Pe}from"./index-B6B5-wqG.js";import{u as z}from"./useMutation-DUKQItlV.js";import{A as Le,a as Ve,b as Ze,c as Fe,d as qe,e as He,f as ze,g as Re}from"./alert-dialog-DGaBQvry.js";import{T as re}from"./textarea-B8jmdzpK.js";import{S as Me}from"./switch-7TT_84Ex.js";import{B}from"./badge-BCk9M62I.js";import{f as ie}from"./dateFormat-B3M36iqg.js";import{A as Qe}from"./arrow-left-BpE3PuIj.js";import{B as Ue}from"./building-2-BRlfl8Dq.js";import{S as Ke}from"./search-DTxsAJDX.js";import{P as de}from"./plus-DnjqSZ24.js";import{L as ne}from"./loader-circle-BzrSke9v.js";import{M as Be}from"./message-circle-Bdx785iQ.js";import{P as Ge}from"./pencil-xD7zwg5A.js";import{C as G}from"./copy-DCH70_rv.js";import{T as We}from"./trash-2-CgsLVNDK.js";const Je=Se({name:g().min(1,"Clinic name (English) is required"),nameZh:g().min(1,"Clinic name (Chinese) is required"),address:g().min(1,"Address (English) is required"),addressZh:g().min(1,"Address (Chinese) is required"),phone:g().min(1,"Phone is required"),whatsapp:g().optional(),email:g().optional(),regionId:g().min(1,"Region is required"),is24Hour:Ae().default(!1)});function le({form:s,onSubmit:o,submitLabel:A}){const{data:c}=oe({queryKey:["/api/regions"]});return e.jsx(De,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[e.jsx("strong",{children:"Essential Information:"})," Help pet owners contact you quickly during emergencies."]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:s.control,name:"name",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Clinic Name (English) *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"Central Animal Clinic","data-testid":"input-name-en"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"nameZh",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Clinic Name (Chinese) *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"中環動物診所","data-testid":"input-name-zh"})}),e.jsx(u,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:s.control,name:"address",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Address (English) *"}),e.jsx(p,{children:e.jsx(re,{...a,placeholder:"123 Queen's Road Central",rows:2,"data-testid":"input-address-en"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"addressZh",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Address (Chinese) *"}),e.jsx(p,{children:e.jsx(re,{...a,placeholder:"皇后大道中123號",rows:2,"data-testid":"input-address-zh"})}),e.jsx(u,{})]})})]}),e.jsx(x,{control:s.control,name:"regionId",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Region *"}),e.jsxs(Ee,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(p,{children:e.jsx($e,{"data-testid":"select-region",children:e.jsx(Ie,{placeholder:"Select region"})})}),e.jsx(Te,{children:c==null?void 0:c.map(b=>e.jsx(Oe,{value:b.id,"data-testid":`region-${b.code}`,children:b.nameEn},b.id))})]}),e.jsx(u,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(x,{control:s.control,name:"phone",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Phone *"}),e.jsx(p,{children:e.jsx(N,{...a,placeholder:"+852 1234 5678","data-testid":"input-phone"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"whatsapp",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"WhatsApp"}),e.jsx(p,{children:e.jsx(N,{...a,value:a.value||"",placeholder:"+852 1234 5678","data-testid":"input-whatsapp"})}),e.jsx(u,{})]})}),e.jsx(x,{control:s.control,name:"email",render:({field:a})=>e.jsxs(h,{children:[e.jsx(m,{children:"Email"}),e.jsx(p,{children:e.jsx(N,{...a,value:a.value||"",placeholder:"info@clinic.com",type:"email","data-testid":"input-email"})}),e.jsx(u,{})]})})]}),e.jsx(x,{control:s.control,name:"is24Hour",render:({field:a})=>e.jsxs(h,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(m,{className:"text-base",children:"24-Hour Operation"})}),e.jsx(p,{children:e.jsx(Me,{checked:a.value||!1,onCheckedChange:a.onChange,"data-testid":"switch-24hour"})})]})}),e.jsx(W,{children:e.jsx(d,{type:"submit","data-testid":"button-submit-clinic",children:A})})]})})}function mt(){const{toast:s}=je(),[o,A]=l.useState(""),[c,a]=l.useState(null),[b,R]=l.useState(!1),[ce,J]=l.useState(!1),[C,X]=l.useState(null),[xe,D]=l.useState(!1),[E,$]=l.useState(""),[_,Y]=l.useState(!1),[j,ee]=l.useState(null),[r,M]=l.useState(null),[Q,I]=l.useState(null),[y,U]=l.useState(null),{data:f,isLoading:he,refetch:T}=oe({queryKey:["/api/clinics"]}),w=be({resolver:Pe(Je),defaultValues:{name:"",nameZh:"",address:"",addressZh:"",phone:"",whatsapp:"",email:"",regionId:"",is24Hour:!1}}),te=z({mutationFn:async t=>S("POST","/api/clinics",t),onSuccess:()=>{s({title:"Clinic created successfully"}),R(!1),w.reset(),H.invalidateQueries({queryKey:["/api/clinics"]}),T()},onError:t=>{s({title:"Error creating clinic",description:t.message,variant:"destructive"})}}),se=z({mutationFn:async t=>{if(!(c!=null&&c.id))throw new Error("No clinic selected");return S("PATCH",`/api/clinics/${c.id}`,t)},onSuccess:()=>{s({title:"Clinic updated successfully"}),a(null),w.reset(),H.invalidateQueries({queryKey:["/api/clinics"]}),T()},onError:t=>{s({title:"Error updating clinic",description:t.message,variant:"destructive"})}}),ae=z({mutationFn:async t=>S("DELETE",`/api/clinics/${t}`,{}),onSuccess:()=>{s({title:"Clinic deleted successfully"}),X(null),H.invalidateQueries({queryKey:["/api/clinics"]}),T()},onError:t=>{s({title:"Error deleting clinic",description:t.message,variant:"destructive"})}}),K=z({mutationFn:async t=>{const n=await(await S("POST",`/api/clinics/${t}/generate-code`,{})).json();return{code:n.code,expiresAt:n.expiresAt}},onSuccess:t=>{I(t.code),U(t.expiresAt),s({title:"Code generated successfully"})},onError:t=>{s({title:"Error generating code",description:t.message,variant:"destructive"})}}),O=f==null?void 0:f.filter(t=>{var n,v,P,k;return!o||((n=t.name)==null?void 0:n.toLowerCase().includes(o.toLowerCase()))||((v=t.nameZh)==null?void 0:v.includes(o))||((P=t.address)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))||((k=t.addressZh)==null?void 0:k.includes(o))}),me=t=>{a(t),w.reset({name:t.name||"",nameZh:t.nameZh||"",address:t.address||"",addressZh:t.addressZh||"",phone:t.phone||"",whatsapp:t.whatsapp||"",email:t.email||"",regionId:t.regionId||"",is24Hour:t.is24Hour||!1})},pe=()=>{w.reset({name:"",nameZh:"",address:"",addressZh:"",phone:"",whatsapp:"",email:"",regionId:"",is24Hour:!1}),R(!0)},ge=async()=>{var t,i;if(!E.trim()){s({title:"Error",description:"Please paste CSV data",variant:"destructive"});return}Y(!0);try{const n=await S("POST","/api/clinics/import",{csvData:E});ee(n),s({title:"Import Complete",description:`Created/Updated: ${((t=n.summary)==null?void 0:t.createdOrUpdated)||0}, Errors: ${((i=n.summary)==null?void 0:i.errors)||0}`}),$(""),H.invalidateQueries({queryKey:["/api/clinics"]}),T(),setTimeout(()=>D(!1),1e3)}catch(n){s({title:"Import Failed",description:n.message,variant:"destructive"})}finally{Y(!1)}},ue=t=>{var v;const i=(v=t.target.files)==null?void 0:v[0];if(!i)return;const n=new FileReader;n.onload=P=>{var k;$((k=P.target)==null?void 0:k.result)},n.readAsText(i)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{href:"/admin",children:e.jsx(d,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(Qe,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2","data-testid":"text-page-title",children:[e.jsx(Ue,{className:"h-6 w-6 text-red-500"}),"Manage Clinics"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Edit and manage all veterinary clinics"})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{type:"text",placeholder:"Search clinic name or address...",value:o,onChange:t=>A(t.target.value),className:"pl-9 pr-9","data-testid":"input-search"}),o&&e.jsx("button",{onClick:()=>A(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-testid":"button-clear-search",children:e.jsx(fe,{className:"h-4 w-4"})})]}),e.jsxs(d,{variant:"outline",onClick:()=>D(!0),"data-testid":"button-import-csv",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),e.jsxs(d,{onClick:pe,"data-testid":"button-create-clinic",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Clinic"]})]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:he?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading clinics..."})]}):O&&O.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white min-w-[300px]",children:"Clinic Name & Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"WhatsApp"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Verification Code"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx("tbody",{children:O.map(t=>e.jsxs("tr",{"data-testid":`row-clinic-${t.id}`,className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm","data-testid":`text-clinic-name-${t.id}`,children:t.name}),t.nameZh&&e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.nameZh})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight","data-testid":`text-clinic-address-${t.id}`,children:[e.jsx("div",{children:t.address}),t.addressZh&&e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:t.addressZh})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap","data-testid":`text-clinic-phone-${t.id}`,children:t.phone||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap","data-testid":`text-clinic-whatsapp-${t.id}`,children:t.whatsapp||"—"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.is24Hour?e.jsx(B,{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium","data-testid":`badge-24h-${t.id}`,children:"24-Hour"}):e.jsx(B,{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs","data-testid":`badge-standard-${t.id}`,children:"Standard"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.ownerVerificationCode?e.jsx(B,{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-mono font-bold tracking-wide","data-testid":`badge-code-${t.id}`,children:t.ownerVerificationCode}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[t.phone&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>window.location.href=`tel:${t.phone}`,"data-testid":`button-call-${t.id}`,className:"h-8 w-8 p-0",title:"Call",children:e.jsx(we,{className:"h-4 w-4"})}),t.whatsapp&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{const i=(t.whatsapp||"").replace(/[^\d]/g,"");window.open(`https://wa.me/${i}`,"_blank")},"data-testid":`button-whatsapp-${t.id}`,className:"h-8 w-8 p-0 text-green-600 dark:text-green-400 hover:text-green-700",title:"WhatsApp",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>me(t),"data-testid":`button-edit-${t.id}`,className:"h-8 w-8 p-0",title:"Edit",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{M(t),I(null),K.mutate(t.id)},"data-testid":`button-generate-code-${t.id}`,className:"h-8 w-8 p-0",title:"Generate Access Code",disabled:K.isPending,children:K.isPending?e.jsx(ne,{className:"h-4 w-4 animate-spin"}):e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{const i=`${window.location.origin}/clinic/edit/${t.id}`;navigator.clipboard.writeText(i),s({title:"Link copied",description:t.name})},"data-testid":`button-copy-link-${t.id}`,className:"h-8 w-8 p-0",title:"Copy Share Link",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{X(t),J(!0)},"data-testid":`button-delete-${t.id}`,className:"h-8 w-8 p-0 text-red-600 dark:text-red-400 hover:text-red-700",title:"Delete",children:e.jsx(We,{className:"h-4 w-4"})})]})})]},t.id))})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 px-4",children:["Showing ",O.length," of ",(f==null?void 0:f.length)||0," clinics"]})]}):e.jsx(Ce,{children:e.jsx(ve,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400","data-testid":"text-no-results",children:"No clinics found"})})})})]}),e.jsx(L,{open:b,onOpenChange:R,children:e.jsxs(V,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-create-clinic",children:[e.jsxs(Z,{children:[e.jsx(F,{children:"Add New Clinic"}),e.jsx(q,{children:"Create a new veterinary clinic listing"})]}),e.jsx(le,{form:w,onSubmit:t=>te.mutate(t),submitLabel:te.isPending?"Creating...":"Create Clinic"})]})}),e.jsx(L,{open:!!c,onOpenChange:t=>!t&&a(null),children:e.jsxs(V,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-edit-clinic",children:[e.jsxs(Z,{children:[e.jsx(F,{children:"Edit Clinic"}),e.jsx(q,{children:"Update clinic information"})]}),e.jsx(le,{form:w,onSubmit:t=>se.mutate(t),submitLabel:se.isPending?"Saving...":"Save Changes"})]})}),e.jsx(Le,{open:ce,onOpenChange:J,children:e.jsxs(Ve,{"data-testid":"dialog-delete-confirm",children:[e.jsxs(Ze,{children:[e.jsx(Fe,{children:"Delete Clinic?"}),e.jsxs(qe,{children:["Are you sure you want to delete ",C==null?void 0:C.name,"? This action cannot be undone."]})]}),e.jsxs(He,{children:[e.jsx(ze,{"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsx(Re,{onClick:()=>C&&ae.mutate(C.id),className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",children:ae.isPending?"Deleting...":"Delete"})]})]})}),e.jsx(L,{open:!!r&&!!Q,onOpenChange:t=>{t||(M(null),I(null),U(null))},children:e.jsxs(V,{"data-testid":"dialog-generated-code",children:[e.jsxs(Z,{children:[e.jsx(F,{children:"Access Code Generated"}),e.jsxs(q,{children:["Share this 6-digit code with ",r==null?void 0:r.name," clinic owners to let them edit their clinic information"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-900/30 border-2 border-red-300 dark:border-red-700 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mb-2",children:"VERIFICATION CODE"}),e.jsx("p",{className:"text-5xl font-bold text-red-600 dark:text-red-400 tracking-widest font-mono","data-testid":"text-generated-code",children:Q}),y&&e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3","data-testid":"text-code-expiry",children:[e.jsx(ke,{className:"inline h-3 w-3 mr-1"}),"Expires: ",ie(new Date(y))," (",new Date(y).toLocaleTimeString(),")"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.jsx("strong",{children:"Share link:"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-900 text-sm text-gray-600 dark:text-gray-400","data-testid":"input-share-link"}),e.jsx(d,{size:"sm",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`),s({title:"Link copied"})},"data-testid":"button-copy-link-dialog",children:e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md",children:e.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-300",children:[e.jsx("strong",{children:"Important:"})," This code expires in 48 hours. After expiration, a new code must be generated."]})}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"How to share:"})," Send both the link and the 6-digit code to the clinic owner. They'll need both to access the edit form."]})})]}),e.jsxs(W,{children:[e.jsx(d,{variant:"outline",onClick:()=>{M(null),I(null),U(null)},"data-testid":"button-close-code-dialog",children:"Close"}),e.jsxs(d,{onClick:()=>{const t=y?`
Expires: ${ie(new Date(y))} ${new Date(y).toLocaleTimeString()}`:"",i=`PetSOS Clinic Edit Access

Clinic: ${r==null?void 0:r.name}
Access Code: ${Q}${t}

Link: ${window.location.origin}/clinic/edit/${r==null?void 0:r.id}`;navigator.clipboard.writeText(i),s({title:"Access info copied",description:"Ready to send to clinic owner"})},"data-testid":"button-copy-all",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Copy All Info"]})]})]})}),e.jsx(L,{open:xe,onOpenChange:D,children:e.jsxs(V,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-import-csv",children:[e.jsxs(Z,{children:[e.jsx(F,{children:"Import Clinics from CSV"}),e.jsx(q,{children:"Upload or paste CSV data to create or update clinic records"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"CSV Format:"})," Name of Vet Clinic (English), 獸醫診所名稱 (Chinese), Address, 營業地址, Call Phone Number, WhatsApp Number, 24 hours, District"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Upload CSV File"}),e.jsx("input",{type:"file",accept:".csv,.xlsx",onChange:ue,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300","data-testid":"input-csv-file"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"Or paste CSV data"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"CSV Data"}),e.jsx("textarea",{value:E,onChange:t=>$(t.target.value),placeholder:"Paste your CSV data here...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","data-testid":"textarea-csv-data"})]}),j&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[e.jsx("strong",{children:"Import Results:"})," ",j.summary.createdOrUpdated," created/updated, ",j.summary.errors," errors"]}),j.errors.length>0&&e.jsxs("div",{className:"mt-2 max-h-32 overflow-y-auto",children:[e.jsx("p",{className:"text-xs text-green-700 dark:text-green-400 font-semibold mb-1",children:"Errors:"}),j.errors.slice(0,5).map((t,i)=>e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:t},i)),j.errors.length>5&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["... and ",j.errors.length-5," more errors"]})]})]})]}),e.jsxs(W,{children:[e.jsx(d,{variant:"outline",onClick:()=>{D(!1),$(""),ee(null)},"data-testid":"button-cancel-import",children:"Cancel"}),e.jsx(d,{onClick:ge,disabled:!E.trim()||_,"data-testid":"button-import",children:_?"Importing...":"Import Clinics"})]})]})})]})}export{mt as default};
