import{u as J,r as o,h as K,R as X,j as a,S as Y,i as M,aH as ee,p as ae,U as te,B as y,L as se,I as le,aI as re,aJ as ne,aK as A,V as ie,W as I,M as j,C as z,q as v,b as $,t as oe,N as de}from"./index-Dv-87GdI.js";import{B as w}from"./badge-95hAwcnP.js";import{S as u}from"./skeleton-BMaZuR9w.js";import{S as ce}from"./switch-DNY1qyBa.js";import{A as he}from"./arrow-left-BiOU8dRi.js";import{S as me}from"./search-BPoAccfe.js";import{B as E}from"./building-2-CsNomjhz.js";import{E as xe}from"./external-link-BOrLSow_.js";import{S as ge}from"./star-mYvlAq5y.js";import{M as ue}from"./message-circle-DeM5z3Tc.js";import{N as pe}from"./navigation-BW4ViPl5.js";function $e(){var P;const{t:be,language:t}=J(),[d,Z]=o.useState(""),[h,F]=o.useState("all"),[r,R]=o.useState(!0),[n,T]=o.useState(null),[G,f]=o.useState(null),{data:N,isLoading:q}=K({queryKey:["/api/regions"]}),{data:p,isLoading:B}=K({queryKey:["/api/hospitals"]}),{data:b,isLoading:V}=K({queryKey:["/api/clinics"]}),W=o.useMemo(()=>(p==null?void 0:p.filter(e=>e.isAvailable===!0).map(e=>({id:e.id,type:"hospital",nameEn:e.nameEn,nameZh:e.nameZh,addressEn:e.addressEn,addressZh:e.addressZh,phone:e.phone,whatsapp:e.whatsapp,regionId:e.regionId,latitude:e.latitude,longitude:e.longitude,is24Hour:e.open247===!0,isPartner:e.isPartner===!0,isAvailable:e.isAvailable===!0,slug:e.slug})))||[],[p]),D=o.useMemo(()=>(b==null?void 0:b.filter(e=>e.isAvailable===!0&&e.status==="active").map(e=>({id:e.id,type:"clinic",nameEn:e.name,nameZh:e.nameZh,addressEn:e.address,addressZh:e.addressZh,phone:e.phone,whatsapp:e.whatsapp,regionId:e.regionId,latitude:e.latitude,longitude:e.longitude,is24Hour:e.is24Hour===!0,isPartner:e.isSupportHospital===!0,isAvailable:e.isAvailable===!0,slug:null,averageRating:e.averageRating,reviewCount:e.reviewCount??0})))||[],[b]),k=r?W:D,L=B||V;o.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{T({lat:e.coords.latitude,lng:e.coords.longitude}),f(null)},e=>{console.error("Error getting location:",e),f(e.message)}):f("Geolocation not supported")},[]);const H=(e,s,i,c)=>{const m=(i-e)*Math.PI/180,x=(c-s)*Math.PI/180,g=Math.sin(m/2)*Math.sin(m/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(x/2)*Math.sin(x/2);return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))},l=(P=k==null?void 0:k.filter(e=>{var c,S,m,x,g,C;const s=!d||((S=(c=e.nameEn)==null?void 0:c.toLowerCase())==null?void 0:S.includes(d.toLowerCase()))||((m=e.nameZh)==null?void 0:m.includes(d))||((g=(x=e.addressEn)==null?void 0:x.toLowerCase())==null?void 0:g.includes(d.toLowerCase()))||((C=e.addressZh)==null?void 0:C.includes(d)),i=h==="all"||e.regionId===h;return s&&i}))==null?void 0:P.sort((e,s)=>{if(e.isPartner&&!s.isPartner)return-1;if(!e.isPartner&&s.isPartner)return 1;if(!n)return 0;const i=e.latitude&&e.longitude?H(n.lat,n.lng,parseFloat(e.latitude),parseFloat(e.longitude)):1/0,c=s.latitude&&s.longitude?H(n.lat,n.lng,parseFloat(s.latitude),parseFloat(s.longitude)):1/0;return i-c});o.useEffect(()=>{l&&(d||h!=="all")&&X.trackClinicSearch({region:h!=="all"?h:void 0,directoryType:r?"hospital":"clinic",resultsCount:l.length})},[d,h,r,l==null?void 0:l.length]);const O=e=>{window.location.href=`tel:${e}`},U=e=>{window.open(`https://wa.me/${e.replace(/[^0-9+]/g,"")}`,"_blank")},_=(e,s,i)=>{const c=`https://www.google.com/maps/search/?api=1&query=${e},${s}&query_place_id=${encodeURIComponent(i)}`;window.open(c,"_blank")},Q=(e,s)=>{s.target.closest("button")||e.type==="hospital"&&e.slug&&(window.location.href=`/hospitals/${e.slug}`)};return a.jsxs(a.Fragment,{children:[a.jsx(Y,{title:t==="zh-HK"?"å‹•ç‰©è¨ºæ‰€ç›®éŒ„ - PetSOS | GPSè·é›¢é¡¯ç¤º":"Veterinary Clinics Directory - PetSOS | GPS Distance Tracking",description:t==="zh-HK"?"æœå°‹é¦™æ¸¯å‹•ç‰©è¨ºæ‰€åŠ24å°æ™‚å‹•ç‰©é†«é™¢ã€‚GPSè‡ªå‹•é¡¯ç¤ºè·é›¢ï¼ŒæŒ‰æœ€è¿‘è¨ºæ‰€æ’åºã€‚è¦†è“‹æ¸¯å³¶ã€ä¹é¾ã€æ–°ç•Œæ‰€æœ‰åœ°å€ã€‚ä¸€éµè‡´é›»æˆ–WhatsAppè¯çµ¡ï¼Œæ¯›å­©ç·Šæ€¥æƒ…æ³æœ€å¿«æ‰¾åˆ°å”åŠ©ã€‚":"Search veterinary clinics and 24-hour animal hospitals in Hong Kong. GPS-powered distance tracking, sorted by nearest clinics. Coverage across Hong Kong Island, Kowloon, and New Territories. One-tap call or WhatsApp contact for fast emergency help.",keywords:t==="zh-HK"?"ç¸é†«è¨ºæ‰€, 24å°æ™‚ç¸é†«, å‹•ç‰©é†«é™¢ç›®éŒ„, GPSå°‹æ‰¾è¨ºæ‰€, æœ€è¿‘ç¸é†«, é¦™æ¸¯å³¶, ä¹é¾, æ–°ç•Œ, WhatsAppè¯çµ¡":"vet clinic, 24-hour vet directory, animal hospital finder, GPS clinic search, nearest vet, Hong Kong Island, Kowloon, New Territories, WhatsApp contact",canonical:"https://petsos.site/clinics",language:t}),a.jsx(M,{data:ee(t),id:"schema-veterinary-directory"}),a.jsx(M,{data:ae([{name:t==="zh-HK"?"ä¸»é ":"Home",url:"https://petsos.site/"},{name:t==="zh-HK"?"å‹•ç‰©è¨ºæ‰€":"Veterinary Clinics",url:"https://petsos.site/clinics"}]),id:"schema-breadcrumb-clinics"}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",children:[a.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 sticky top-0 z-10",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(te,{href:"/",children:a.jsx(y,{variant:"ghost",size:"icon","data-testid":"button-back",children:a.jsx(he,{className:"h-5 w-5"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t==="zh-HK"?"å‹•ç‰©è¨ºæ‰€":"Veterinary Clinics"})]}),a.jsx(se,{})]})})}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"max-w-4xl mx-auto mb-8 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(le,{type:"text",placeholder:t==="zh-HK"?"æœå°‹å‹•ç‰©è¨ºæ‰€åç¨±æˆ–åœ°å€...":"Search clinics by name or address...",value:d,onChange:e=>Z(e.target.value),className:"pl-10 h-12 text-base","data-testid":"input-search"})]}),q?a.jsx(u,{className:"h-12 w-full"}):a.jsx(re,{value:h,onValueChange:F,children:a.jsxs(ne,{className:"inline-flex w-full h-auto p-1 overflow-x-auto scrollbar-hide","data-testid":"tabs-region",children:[a.jsx(A,{value:"all","data-testid":"tab-all",className:"flex-shrink-0 min-w-[80px] h-10 px-4",children:t==="zh-HK"?"å…¨æ¸¯":"All HK"}),N==null?void 0:N.map(e=>a.jsx(A,{value:e.id,"data-testid":`tab-region-${e.code}`,className:"flex-shrink-0 min-w-[80px] h-10 px-4",children:t==="zh-HK"?e.nameZh:e.nameEn},e.id))]})}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx(ce,{id:"directory-toggle",checked:r,onCheckedChange:e=>{R(e)},"data-testid":"switch-directory-toggle",className:"data-[state=checked]:bg-red-600"}),a.jsx(ie,{htmlFor:"directory-toggle",className:"flex items-center gap-2 cursor-pointer text-sm font-medium text-red-900 dark:text-red-100",children:r?a.jsxs(a.Fragment,{children:[a.jsx(I,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),t==="zh-HK"?"24å°æ™‚å‹•ç‰©é†«é™¢":"24-Hour Hospitals"]}):a.jsxs(a.Fragment,{children:[a.jsx(E,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),t==="zh-HK"?"å‹•ç‰©è¨ºæ‰€":"Veterinary Clinics"]})})]}),G?a.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg","data-testid":"banner-location-error",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:t==="zh-HK"?"ç„¡æ³•å–å¾—ä½ç½® - è«‹å•Ÿç”¨å®šä½ä»¥é¡¯ç¤ºè·é›¢":"Location unavailable - Enable GPS to see distances"})]})}):n?a.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg","data-testid":"banner-location-success",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4 text-red-600 dark:text-red-400 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-900 dark:text-red-100 font-medium",children:t==="zh-HK"?`ğŸ“ å·²æŒ‰è·é›¢æ’åº - æœ€è¿‘çš„${r?"é†«é™¢":"è¨ºæ‰€"}å„ªå…ˆé¡¯ç¤º`:`ğŸ“ Sorted by distance - Nearest ${r?"hospitals":"clinics"} first`})]})}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg","data-testid":"banner-location-loading",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4 text-gray-500 animate-pulse flex-shrink-0"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t==="zh-HK"?"æ­£åœ¨å–å¾—ä½ç½®...":"Getting your location..."})]})})]}),L?a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx(u,{className:"h-6 w-40"})}):a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm","data-testid":"text-results-count",children:t==="zh-HK"?`å·²æ‰¾åˆ° ${(l==null?void 0:l.length)||0} é–“${r?"24å°æ™‚å‹•ç‰©é†«é™¢":"å‹•ç‰©è¨ºæ‰€"}`:`${(l==null?void 0:l.length)||0} ${r?"24-hour hospital":"clinic"}${(l==null?void 0:l.length)!==1?"s":""} found`})}),a.jsx("div",{className:"max-w-4xl mx-auto space-y-3",children:L?a.jsx(a.Fragment,{children:[1,2,3].map(e=>a.jsxs(z,{children:[a.jsxs(v,{children:[a.jsx(u,{className:"h-6 w-3/4"}),a.jsx(u,{className:"h-4 w-1/2 mt-2"})]}),a.jsx($,{children:a.jsx(u,{className:"h-10 w-full"})})]},e))}):l&&l.length>0?l.map(e=>a.jsxs(z,{className:`group hover:shadow-lg transition-all border-l-4 cursor-pointer ${e.type==="hospital"?"hover:border-l-red-700 border-l-red-600":"hover:border-l-blue-700 border-l-blue-600"}`,onClick:s=>Q(e,s),"data-testid":`card-clinic-${e.id}`,children:[a.jsx(v,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.isPartner&&a.jsx(w,{className:"bg-gradient-to-r from-purple-600 to-blue-600 font-bold","data-testid":`badge-partner-${e.id}`,children:"â­ PetSOS Partner"}),e.type==="hospital"?a.jsxs(w,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 font-bold","data-testid":`badge-type-${e.id}`,children:[a.jsx(E,{className:"h-3 w-3 mr-1"}),e.is24Hour?t==="zh-HK"?"24å°æ™‚å‹•ç‰©é†«é™¢":"24-Hour Hospital":t==="zh-HK"?"å‹•ç‰©é†«é™¢":"Animal Hospital"]}):a.jsxs(w,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 font-bold","data-testid":`badge-type-${e.id}`,children:[a.jsx(E,{className:"h-3 w-3 mr-1"}),e.is24Hour?t==="zh-HK"?"24å°æ™‚è¨ºæ‰€":"24-Hour Clinic":t==="zh-HK"?"å‹•ç‰©è¨ºæ‰€":"Veterinary Clinic"]})]}),a.jsxs(oe,{className:"text-lg mb-1 leading-tight",children:[a.jsxs("span",{className:`flex items-center gap-1.5 font-bold text-gray-900 dark:text-white transition-colors ${e.type==="hospital"?"group-hover:text-red-600":"group-hover:text-blue-600"}`,"data-testid":`text-clinic-name-${e.id}`,children:[t==="zh-HK"&&e.nameZh?e.nameZh:e.nameEn,e.type==="hospital"&&e.slug&&a.jsx(xe,{className:`h-4 w-4 text-gray-400 flex-shrink-0 ${e.type==="hospital"?"group-hover:text-red-600":"group-hover:text-blue-600"}`})]}),t==="zh-HK"&&e.nameZh&&a.jsx("span",{className:"block text-sm font-normal text-gray-500 dark:text-gray-400 mt-0.5",children:e.nameEn})]}),n&&e.latitude&&e.longitude&&a.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold mb-2 ${e.type==="hospital"?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"}`,"data-testid":`text-clinic-distance-${e.id}`,children:[a.jsx(j,{className:"h-3 w-3"}),H(n.lat,n.lng,parseFloat(e.latitude),parseFloat(e.longitude)).toFixed(1)," km ",t==="zh-HK"?"è·é›¢":"away"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate","data-testid":`text-clinic-address-${e.id}`,children:t==="zh-HK"&&e.addressZh?e.addressZh:e.addressEn}),e.averageRating&&Number(e.averageRating)>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2","data-testid":`rating-display-${e.id}`,children:[a.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(s=>a.jsx(ge,{className:`h-3.5 w-3.5 ${s<=Math.round(Number(e.averageRating))?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200 dark:fill-gray-600 dark:text-gray-600"}`},s))}),a.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:Number(e.averageRating).toFixed(1)}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",e.reviewCount," ",t==="zh-HK"?"è©•åƒ¹":e.reviewCount===1?"review":"reviews",")"]})]})]}),e.is24Hour&&a.jsxs(w,{className:"bg-red-600 hover:bg-red-700 shrink-0","data-testid":`badge-24hour-${e.id}`,children:[a.jsx(I,{className:"h-3 w-3 mr-1"}),t==="zh-HK"?"24å°æ™‚":"24hrs"]})]})}),a.jsx($,{className:"pt-0",children:a.jsxs("div",{className:"flex gap-2",children:[e.phone&&a.jsxs(y,{onClick:s=>{s.stopPropagation(),O(e.phone)},size:"sm",className:`flex-1 ${e.type==="hospital"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,"data-testid":`button-call-${e.id}`,children:[a.jsx(de,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"è‡´é›»":"Call"]}),e.whatsapp&&a.jsxs(y,{onClick:s=>{s.stopPropagation(),U(e.whatsapp)},variant:"outline",size:"sm",className:`flex-1 ${e.type==="hospital"?"border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"border-blue-600 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,"data-testid":`button-whatsapp-${e.id}`,children:[a.jsx(ue,{className:"h-4 w-4 mr-1"}),"WhatsApp"]}),e.latitude&&e.longitude&&a.jsxs(y,{onClick:s=>{s.stopPropagation(),_(parseFloat(e.latitude),parseFloat(e.longitude),e.nameEn)},variant:"outline",size:"sm",className:`flex-1 ${e.type==="hospital"?"border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"border-blue-600 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,"data-testid":`button-maps-${e.id}`,children:[a.jsx(pe,{className:"h-4 w-4 mr-1"}),t==="zh-HK"?"å°èˆª":"Maps"]})]})})]},e.id)):a.jsx(z,{children:a.jsxs($,{className:"py-12 text-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2","data-testid":"text-no-results",children:t==="zh-HK"?"æœªæ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„å‹•ç‰©è¨ºæ‰€":"No clinics found matching your criteria"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm",children:t==="zh-HK"?"è«‹å˜—è©¦èª¿æ•´æœå°‹æ¢ä»¶":"Try adjusting your search or filters"})]})})})]})]})]})}export{$e as default};
