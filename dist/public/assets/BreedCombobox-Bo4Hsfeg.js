import{c as Je,r as o,ac as F,Q as I,ad as W,j as p,W as _,K as Ye,ae as ye,af as Re,N as Pe,R as U,T as Ee,ag as et,ah as tt,ai as rt,aj as nt,ak as ot,al as at,am as lt,O as st,an as it,ao as ct,ap as ut,a6 as dt,h as pt,B as ft,X as mt}from"./index-DSfXJrMH.js";import{R as vt,P as ht,O as gt,C as xt}from"./index-BKY5CHHC.js";import"./dialog-DVNSF8fN.js";import{S as bt}from"./search-qxig8uw6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Je("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var be=1,wt=.9,yt=.8,Rt=.17,ae=.1,le=.999,Pt=.9999,Et=.99,kt=/[\\\/_+.#"@\[\(\{&]/,St=/[\\\/_+.#"@\[\(\{&]/g,jt=/[\s-]/,ke=/[\s-]/g;function ie(e,r,t,i,a,l,s){if(l===r.length)return a===e.length?be:Et;var u=`${a},${l}`;if(s[u]!==void 0)return s[u];for(var m=i.charAt(l),c=t.indexOf(m,a),v=0,g,w,y,N;c>=0;)g=ie(e,r,t,i,c+1,l+1,s),g>v&&(c===a?g*=be:kt.test(e.charAt(c-1))?(g*=yt,y=e.slice(a,c-1).match(St),y&&a>0&&(g*=Math.pow(le,y.length))):jt.test(e.charAt(c-1))?(g*=wt,N=e.slice(a,c-1).match(ke),N&&a>0&&(g*=Math.pow(le,N.length))):(g*=Rt,a>0&&(g*=Math.pow(le,c-a))),e.charAt(c)!==r.charAt(l)&&(g*=Pt)),(g<ae&&t.charAt(c-1)===i.charAt(l+1)||i.charAt(l+1)===i.charAt(l)&&t.charAt(c-1)!==i.charAt(l))&&(w=ie(e,r,t,i,c+1,l+2,s),w*ae>g&&(g=w*ae)),g>v&&(v=g),c=t.indexOf(m,c+1);return s[u]=v,v}function Ce(e){return e.toLowerCase().replace(ke," ")}function Nt(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ie(e,r,Ce(e),Ce(r),0,0,{})}var H='[cmdk-group=""]',se='[cmdk-group-items=""]',At='[cmdk-group-heading=""]',Se='[cmdk-item=""]',we=`${Se}:not([aria-disabled="true"])`,ce="cmdk-item-select",K="data-value",It=(e,r,t)=>Nt(e,r,t),je=o.createContext(void 0),Z=()=>o.useContext(je),Ne=o.createContext(void 0),ue=()=>o.useContext(Ne),Ae=o.createContext(void 0),Ie=o.forwardRef((e,r)=>{let t=z(()=>{var n,f;return{search:"",value:(f=(n=e.value)!=null?n:e.defaultValue)!=null?f:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=z(()=>new Set),a=z(()=>new Map),l=z(()=>new Map),s=z(()=>new Set),u=Oe(e),{label:m,children:c,value:v,onValueChange:g,filter:w,shouldFilter:y,loop:N,disablePointerSelection:V=!1,vimBindings:O=!0,...$}=e,q=F(),x=F(),A=F(),j=o.useRef(null),C=Bt();L(()=>{if(v!==void 0){let n=v.trim();t.current.value=n,E.emit()}},[v]),L(()=>{C(6,me)},[]);let E=o.useMemo(()=>({subscribe:n=>(s.current.add(n),()=>s.current.delete(n)),snapshot:()=>t.current,setState:(n,f,h)=>{var d,b,R,S;if(!Object.is(t.current[n],f)){if(t.current[n]=f,n==="search")re(),ee(),C(1,te);else if(n==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let P=document.getElementById(A);P?P.focus():(d=document.getElementById(q))==null||d.focus()}if(C(7,()=>{var P;t.current.selectedItemId=(P=T())==null?void 0:P.id,E.emit()}),h||C(5,me),((b=u.current)==null?void 0:b.value)!==void 0){let P=f??"";(S=(R=u.current).onValueChange)==null||S.call(R,P);return}}E.emit()}},emit:()=>{s.current.forEach(n=>n())}}),[]),Y=o.useMemo(()=>({value:(n,f,h)=>{var d;f!==((d=l.current.get(n))==null?void 0:d.value)&&(l.current.set(n,{value:f,keywords:h}),t.current.filtered.items.set(n,fe(f,h)),C(2,()=>{ee(),E.emit()}))},item:(n,f)=>(i.current.add(n),f&&(a.current.has(f)?a.current.get(f).add(n):a.current.set(f,new Set([n]))),C(3,()=>{re(),ee(),t.current.value||te(),E.emit()}),()=>{l.current.delete(n),i.current.delete(n),t.current.filtered.items.delete(n);let h=T();C(4,()=>{re(),(h==null?void 0:h.getAttribute("id"))===n&&te(),E.emit()})}),group:n=>(a.current.has(n)||a.current.set(n,new Set),()=>{l.current.delete(n),a.current.delete(n)}),filter:()=>u.current.shouldFilter,label:m||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:q,inputId:A,labelId:x,listInnerRef:j}),[]);function fe(n,f){var h,d;let b=(d=(h=u.current)==null?void 0:h.filter)!=null?d:It;return n?b(n,t.current.search,f):0}function ee(){if(!t.current.search||u.current.shouldFilter===!1)return;let n=t.current.filtered.items,f=[];t.current.filtered.groups.forEach(d=>{let b=a.current.get(d),R=0;b.forEach(S=>{let P=n.get(S);R=Math.max(P,R)}),f.push([d,R])});let h=j.current;G().sort((d,b)=>{var R,S;let P=d.getAttribute("id"),X=b.getAttribute("id");return((R=n.get(X))!=null?R:0)-((S=n.get(P))!=null?S:0)}).forEach(d=>{let b=d.closest(se);b?b.appendChild(d.parentElement===b?d:d.closest(`${se} > *`)):h.appendChild(d.parentElement===h?d:d.closest(`${se} > *`))}),f.sort((d,b)=>b[1]-d[1]).forEach(d=>{var b;let R=(b=j.current)==null?void 0:b.querySelector(`${H}[${K}="${encodeURIComponent(d[0])}"]`);R==null||R.parentElement.appendChild(R)})}function te(){let n=G().find(h=>h.getAttribute("aria-disabled")!=="true"),f=n==null?void 0:n.getAttribute(K);E.setState("value",f||void 0)}function re(){var n,f,h,d;if(!t.current.search||u.current.shouldFilter===!1){t.current.filtered.count=i.current.size;return}t.current.filtered.groups=new Set;let b=0;for(let R of i.current){let S=(f=(n=l.current.get(R))==null?void 0:n.value)!=null?f:"",P=(d=(h=l.current.get(R))==null?void 0:h.keywords)!=null?d:[],X=fe(S,P);t.current.filtered.items.set(R,X),X>0&&b++}for(let[R,S]of a.current)for(let P of S)if(t.current.filtered.items.get(P)>0){t.current.filtered.groups.add(R);break}t.current.filtered.count=b}function me(){var n,f,h;let d=T();d&&(((n=d.parentElement)==null?void 0:n.firstChild)===d&&((h=(f=d.closest(H))==null?void 0:f.querySelector(At))==null||h.scrollIntoView({block:"nearest"})),d.scrollIntoView({block:"nearest"}))}function T(){var n;return(n=j.current)==null?void 0:n.querySelector(`${Se}[aria-selected="true"]`)}function G(){var n;return Array.from(((n=j.current)==null?void 0:n.querySelectorAll(we))||[])}function ne(n){let f=G()[n];f&&E.setState("value",f.getAttribute(K))}function oe(n){var f;let h=T(),d=G(),b=d.findIndex(S=>S===h),R=d[b+n];(f=u.current)!=null&&f.loop&&(R=b+n<0?d[d.length-1]:b+n===d.length?d[0]:d[b+n]),R&&E.setState("value",R.getAttribute(K))}function ve(n){let f=T(),h=f==null?void 0:f.closest(H),d;for(;h&&!d;)h=n>0?Kt(h,H):zt(h,H),d=h==null?void 0:h.querySelector(we);d?E.setState("value",d.getAttribute(K)):oe(n)}let he=()=>ne(G().length-1),ge=n=>{n.preventDefault(),n.metaKey?he():n.altKey?ve(1):oe(1)},xe=n=>{n.preventDefault(),n.metaKey?ne(0):n.altKey?ve(-1):oe(-1)};return o.createElement(I.div,{ref:r,tabIndex:-1,...$,"cmdk-root":"",onKeyDown:n=>{var f;(f=$.onKeyDown)==null||f.call($,n);let h=n.nativeEvent.isComposing||n.keyCode===229;if(!(n.defaultPrevented||h))switch(n.key){case"n":case"j":{O&&n.ctrlKey&&ge(n);break}case"ArrowDown":{ge(n);break}case"p":case"k":{O&&n.ctrlKey&&xe(n);break}case"ArrowUp":{xe(n);break}case"Home":{n.preventDefault(),ne(0);break}case"End":{n.preventDefault(),he();break}case"Enter":{n.preventDefault();let d=T();if(d){let b=new Event(ce);d.dispatchEvent(b)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:Y.inputId,id:Y.labelId,style:qt},m),J(e,n=>o.createElement(Ne.Provider,{value:E},o.createElement(je.Provider,{value:Y},n))))}),Ot=o.forwardRef((e,r)=>{var t,i;let a=F(),l=o.useRef(null),s=o.useContext(Ae),u=Z(),m=Oe(e),c=(i=(t=m.current)==null?void 0:t.forceMount)!=null?i:s==null?void 0:s.forceMount;L(()=>{if(!c)return u.item(a,s==null?void 0:s.id)},[c]);let v=Me(a,l,[e.value,e.children,l],e.keywords),g=ue(),w=M(C=>C.value&&C.value===v.current),y=M(C=>c||u.filter()===!1?!0:C.search?C.filtered.items.get(a)>0:!0);o.useEffect(()=>{let C=l.current;if(!(!C||e.disabled))return C.addEventListener(ce,N),()=>C.removeEventListener(ce,N)},[y,e.onSelect,e.disabled]);function N(){var C,E;V(),(E=(C=m.current).onSelect)==null||E.call(C,v.current)}function V(){g.setState("value",v.current,!0)}if(!y)return null;let{disabled:O,value:$,onSelect:q,forceMount:x,keywords:A,...j}=e;return o.createElement(I.div,{ref:W(l,r),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!O,"aria-selected":!!w,"data-disabled":!!O,"data-selected":!!w,onPointerMove:O||u.getDisablePointerSelection()?void 0:V,onClick:O?void 0:N},e.children)}),Mt=o.forwardRef((e,r)=>{let{heading:t,children:i,forceMount:a,...l}=e,s=F(),u=o.useRef(null),m=o.useRef(null),c=F(),v=Z(),g=M(y=>a||v.filter()===!1?!0:y.search?y.filtered.groups.has(s):!0);L(()=>v.group(s),[]),Me(s,u,[e.value,e.heading,m]);let w=o.useMemo(()=>({id:s,forceMount:a}),[a]);return o.createElement(I.div,{ref:W(u,r),...l,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},t&&o.createElement("div",{ref:m,"cmdk-group-heading":"","aria-hidden":!0,id:c},t),J(e,y=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?c:void 0},o.createElement(Ae.Provider,{value:w},y))))}),_t=o.forwardRef((e,r)=>{let{alwaysRender:t,...i}=e,a=o.useRef(null),l=M(s=>!s.search);return!t&&!l?null:o.createElement(I.div,{ref:W(a,r),...i,"cmdk-separator":"",role:"separator"})}),Dt=o.forwardRef((e,r)=>{let{onValueChange:t,...i}=e,a=e.value!=null,l=ue(),s=M(c=>c.search),u=M(c=>c.selectedItemId),m=Z();return o.useEffect(()=>{e.value!=null&&l.setState("search",e.value)},[e.value]),o.createElement(I.input,{ref:r,...i,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":m.listId,"aria-labelledby":m.labelId,"aria-activedescendant":u,id:m.inputId,type:"text",value:a?e.value:s,onChange:c=>{a||l.setState("search",c.target.value),t==null||t(c.target.value)}})}),Ft=o.forwardRef((e,r)=>{let{children:t,label:i="Suggestions",...a}=e,l=o.useRef(null),s=o.useRef(null),u=M(c=>c.selectedItemId),m=Z();return o.useEffect(()=>{if(s.current&&l.current){let c=s.current,v=l.current,g,w=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let y=c.offsetHeight;v.style.setProperty("--cmdk-list-height",y.toFixed(1)+"px")})});return w.observe(c),()=>{cancelAnimationFrame(g),w.unobserve(c)}}},[]),o.createElement(I.div,{ref:W(l,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":i,id:m.listId},J(e,c=>o.createElement("div",{ref:W(s,m.listInnerRef),"cmdk-list-sizer":""},c)))}),Lt=o.forwardRef((e,r)=>{let{open:t,onOpenChange:i,overlayClassName:a,contentClassName:l,container:s,...u}=e;return o.createElement(vt,{open:t,onOpenChange:i},o.createElement(ht,{container:s},o.createElement(gt,{"cmdk-overlay":"",className:a}),o.createElement(xt,{"aria-label":e.label,"cmdk-dialog":"",className:l},o.createElement(Ie,{ref:r,...u}))))}),$t=o.forwardRef((e,r)=>M(t=>t.filtered.count===0)?o.createElement(I.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),Tt=o.forwardRef((e,r)=>{let{progress:t,children:i,label:a="Loading...",...l}=e;return o.createElement(I.div,{ref:r,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},J(e,s=>o.createElement("div",{"aria-hidden":!0},s)))}),k=Object.assign(Ie,{List:Ft,Item:Ot,Input:Dt,Group:Mt,Separator:_t,Dialog:Lt,Empty:$t,Loading:Tt});function Kt(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function zt(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function Oe(e){let r=o.useRef(e);return L(()=>{r.current=e}),r}var L=typeof window>"u"?o.useEffect:o.useLayoutEffect;function z(e){let r=o.useRef();return r.current===void 0&&(r.current=e()),r}function M(e){let r=ue(),t=()=>e(r.snapshot());return o.useSyncExternalStore(r.subscribe,t,t)}function Me(e,r,t,i=[]){let a=o.useRef(),l=Z();return L(()=>{var s;let u=(()=>{var c;for(let v of t){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(c=v.current.textContent)==null?void 0:c.trim():a.current}})(),m=i.map(c=>c.trim());l.value(e,u,m),(s=r.current)==null||s.setAttribute(K,u),a.current=u}),a}var Bt=()=>{let[e,r]=o.useState(),t=z(()=>new Map);return L(()=>{t.current.forEach(i=>i()),t.current=new Map},[e]),(i,a)=>{t.current.set(i,a),r({})}};function Vt(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function J({asChild:e,children:r},t){return e&&o.isValidElement(r)?o.cloneElement(Vt(r),{ref:r.ref},t(r.props.children)):t(r)}var qt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const _e=o.forwardRef(({className:e,...r},t)=>p.jsx(k,{ref:t,className:_("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));_e.displayName=k.displayName;const De=o.forwardRef(({className:e,...r},t)=>p.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[p.jsx(bt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(k.Input,{ref:t,className:_("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));De.displayName=k.Input.displayName;const Fe=o.forwardRef(({className:e,...r},t)=>p.jsx(k.List,{ref:t,className:_("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));Fe.displayName=k.List.displayName;const Le=o.forwardRef((e,r)=>p.jsx(k.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));Le.displayName=k.Empty.displayName;const $e=o.forwardRef(({className:e,...r},t)=>p.jsx(k.Group,{ref:t,className:_("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));$e.displayName=k.Group.displayName;const Gt=o.forwardRef(({className:e,...r},t)=>p.jsx(k.Separator,{ref:t,className:_("-mx-1 h-px bg-border",e),...r}));Gt.displayName=k.Separator.displayName;const Te=o.forwardRef(({className:e,...r},t)=>p.jsx(k.Item,{ref:t,className:_("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...r}));Te.displayName=k.Item.displayName;var de="Popover",[Ke,dr]=Ye(de,[ye]),Q=ye(),[Ht,D]=Ke(de),ze=e=>{const{__scopePopover:r,children:t,open:i,defaultOpen:a,onOpenChange:l,modal:s=!1}=e,u=Q(r),m=o.useRef(null),[c,v]=o.useState(!1),[g=!1,w]=st({prop:i,defaultProp:a,onChange:l});return p.jsx(it,{...u,children:p.jsx(Ht,{scope:r,contentId:F(),triggerRef:m,open:g,onOpenChange:w,onOpenToggle:o.useCallback(()=>w(y=>!y),[w]),hasCustomAnchor:c,onCustomAnchorAdd:o.useCallback(()=>v(!0),[]),onCustomAnchorRemove:o.useCallback(()=>v(!1),[]),modal:s,children:t})})};ze.displayName=de;var Be="PopoverAnchor",Ut=o.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=D(Be,t),l=Q(t),{onCustomAnchorAdd:s,onCustomAnchorRemove:u}=a;return o.useEffect(()=>(s(),()=>u()),[s,u]),p.jsx(Re,{...l,...i,ref:r})});Ut.displayName=Be;var Ve="PopoverTrigger",qe=o.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=D(Ve,t),l=Q(t),s=Pe(r,a.triggerRef),u=p.jsx(I.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ze(a.open),...i,ref:s,onClick:U(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:p.jsx(Re,{asChild:!0,...l,children:u})});qe.displayName=Ve;var pe="PopoverPortal",[Wt,Zt]=Ke(pe,{forceMount:void 0}),Ge=e=>{const{__scopePopover:r,forceMount:t,children:i,container:a}=e,l=D(pe,r);return p.jsx(Wt,{scope:r,forceMount:t,children:p.jsx(Ee,{present:t||l.open,children:p.jsx(ct,{asChild:!0,container:a,children:i})})})};Ge.displayName=pe;var B="PopoverContent",He=o.forwardRef((e,r)=>{const t=Zt(B,e.__scopePopover),{forceMount:i=t.forceMount,...a}=e,l=D(B,e.__scopePopover);return p.jsx(Ee,{present:i||l.open,children:l.modal?p.jsx(Xt,{...a,ref:r}):p.jsx(Jt,{...a,ref:r})})});He.displayName=B;var Qt=ut("PopoverContent.RemoveScroll"),Xt=o.forwardRef((e,r)=>{const t=D(B,e.__scopePopover),i=o.useRef(null),a=Pe(r,i),l=o.useRef(!1);return o.useEffect(()=>{const s=i.current;if(s)return et(s)},[]),p.jsx(tt,{as:Qt,allowPinchZoom:!0,children:p.jsx(Ue,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(e.onCloseAutoFocus,s=>{var u;s.preventDefault(),l.current||(u=t.triggerRef.current)==null||u.focus()}),onPointerDownOutside:U(e.onPointerDownOutside,s=>{const u=s.detail.originalEvent,m=u.button===0&&u.ctrlKey===!0,c=u.button===2||m;l.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:U(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),Jt=o.forwardRef((e,r)=>{const t=D(B,e.__scopePopover),i=o.useRef(!1),a=o.useRef(!1);return p.jsx(Ue,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var s,u;(s=e.onCloseAutoFocus)==null||s.call(e,l),l.defaultPrevented||(i.current||(u=t.triggerRef.current)==null||u.focus(),l.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:l=>{var m,c;(m=e.onInteractOutside)==null||m.call(e,l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=l.target;((c=t.triggerRef.current)==null?void 0:c.contains(s))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),Ue=o.forwardRef((e,r)=>{const{__scopePopover:t,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:c,onInteractOutside:v,...g}=e,w=D(B,t),y=Q(t);return rt(),p.jsx(nt,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:l,children:p.jsx(ot,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:v,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:c,onDismiss:()=>w.onOpenChange(!1),children:p.jsx(at,{"data-state":Ze(w.open),role:"dialog",id:w.contentId,...y,...g,ref:r,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),We="PopoverClose",Yt=o.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=D(We,t);return p.jsx(I.button,{type:"button",...i,ref:r,onClick:U(e.onClick,()=>a.onOpenChange(!1))})});Yt.displayName=We;var er="PopoverArrow",tr=o.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=Q(t);return p.jsx(lt,{...a,...i,ref:r})});tr.displayName=er;function Ze(e){return e?"open":"closed"}var rr=ze,nr=qe,or=Ge,Qe=He;const ar=rr,lr=nr,Xe=o.forwardRef(({className:e,align:r="center",sideOffset:t=4,...i},a)=>p.jsx(or,{children:p.jsx(Qe,{ref:a,align:r,sideOffset:t,className:_("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...i})}));Xe.displayName=Qe.displayName;function pr({species:e,value:r,onChange:t,placeholder:i="Select or type breed...",disabled:a=!1,testId:l="combobox-breed"}){const[s,u]=o.useState(!1),[m,c]=o.useState(""),{language:v}=dt(),{data:g=[],isLoading:w}=pt({queryKey:["/api/pet-breeds"]}),y=g.filter(x=>x.species===e&&x.active).map(x=>({en:x.breedEn,zh:x.breedZh||x.breedEn})),N=v==="zh-HK",V=y.filter(x=>x.en.toLowerCase().includes(m.toLowerCase())||x.zh.toLowerCase().includes(m.toLowerCase())),O=x=>{t(x),u(!1),c("")},$=x=>{c(x);const A=y.find(C=>C.zh.toLowerCase()===x.toLowerCase());if(A){t(A.en);return}const j=y.find(C=>C.en.toLowerCase()===x.toLowerCase());if(j){t(j.en);return}x&&t(x)},q=x=>{const A=y.find(j=>j.en===x);return A?N?A.zh:A.en:x};return p.jsxs(ar,{open:s,onOpenChange:u,children:[p.jsx(lr,{asChild:!0,children:p.jsxs(ft,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between",disabled:a||w,"data-testid":l,children:[p.jsx("span",{className:"truncate",children:r?q(r):w?"Loading breeds...":i}),p.jsx(Ct,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Xe,{className:"w-full p-0",align:"start",children:p.jsxs(_e,{shouldFilter:!1,children:[p.jsx(De,{placeholder:"Search or type breed...",value:m,onValueChange:$}),p.jsxs(Fe,{children:[p.jsx(Le,{children:m?p.jsxs("div",{className:"py-2 px-4 text-center text-sm",children:[p.jsx("div",{className:"text-green-600 dark:text-green-400 font-medium mb-1",children:"âœ“ Custom breed ready!"}),p.jsxs("div",{className:"text-muted-foreground",children:['Click anywhere outside or press Enter to save "',m,'"']})]}):"No breed found. Type to add custom breed."}),p.jsx($e,{children:V.map(x=>p.jsxs(Te,{value:x.en,onSelect:()=>O(x.en),children:[p.jsx(mt,{className:_("mr-2 h-4 w-4",r===x.en?"opacity-100":"opacity-0")}),N?x.zh:x.en]},x.en))})]})]})})]})}export{pr as B,Ct as C,ar as P,lr as a,Xe as b,_e as c,De as d,Fe as e,Le as f,$e as g,Te as h};
