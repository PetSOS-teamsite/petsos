var ca=Object.defineProperty;var da=(n,e,t)=>e in n?ca(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>da(n,typeof e!="symbol"?e+"":e,t);import{aI as pa,aJ as ma,aK as ga,aL as fa,aM as ha,aN as ya,aO as ba,aP as Y,aQ as Na,aR as _a,aS as Sa,aT as Ta,aU as wa,aV as Pa,aW as Ia,aX as xa,aY as Da,aZ as le,a_ as Ca,Z as va,a$ as Aa,b0 as Ba,b1 as Va,b2 as za,b3 as qa,b4 as Fa,b5 as La,b6 as Ma,b7 as Qa,b8 as Ea,b9 as Ua,ba as Oa,bb as $a,bc as ja,bd as Za,be as Ka,bf as Xa,bg as Ga,bh as Ra,bi as Ja,bj as Ha,bk as Wa,bl as Ya,bm as ka,bn as eo,bo as to,bp as no,bq as ro,br as io,bs as X,bt as si,bu as so,aB as ai,ab as ao,bv as oi,bw as oo,bx as uo,by as lo,bz as co,bA as ce,aa as po,bB as mo,bC as go,bD as fo,bE as ho,bF as yo,bG as bo,bH as No,bI as _o,bJ as So,bK as To,bL as wo,a9 as Po,bM as Io,bN as xo,bO as Do,bP as Co,bQ as vo,bR as ui,bS as Ao,n as li,o as ci,bT as Bo,bU as Vo,bV as zo,bW as qo,bX as Fo,bY as Lo,bZ as Mo,b_ as Qo,b$ as Eo,c0 as di,c1 as Uo,c2 as Oo,c3 as $o,s as pi,c4 as jo,c5 as Zo,c6 as Ko,c7 as ie,c8 as Xo,c9 as Go,ca as Ro}from"./index-B6saPYUG.js";const Jo=Object.freeze(Object.defineProperty({__proto__:null,BRAND:pa,DIRTY:ma,EMPTY_PATH:ga,INVALID:fa,NEVER:ha,OK:ya,ParseStatus:ba,Schema:Y,ZodAny:Na,ZodArray:_a,ZodBigInt:Sa,ZodBoolean:Ta,ZodBranded:wa,ZodCatch:Pa,ZodDate:Ia,ZodDefault:xa,ZodDiscriminatedUnion:Da,ZodEffects:le,ZodEnum:Ca,ZodError:va,get ZodFirstPartyTypeKind(){return Aa},ZodFunction:Ba,ZodIntersection:Va,ZodIssueCode:za,ZodLazy:qa,ZodLiteral:Fa,ZodMap:La,ZodNaN:Ma,ZodNativeEnum:Qa,ZodNever:Ea,ZodNull:Ua,ZodNullable:Oa,ZodNumber:$a,ZodObject:ja,ZodOptional:Za,ZodParsedType:Ka,ZodPipeline:Xa,ZodPromise:Ga,ZodReadonly:Ra,ZodRecord:Ja,ZodSchema:Y,ZodSet:Ha,ZodString:Wa,ZodSymbol:Ya,ZodTransformer:le,ZodTuple:ka,ZodType:Y,ZodUndefined:eo,ZodUnion:to,ZodUnknown:no,ZodVoid:ro,addIssueToContext:io,any:X,array:si,bigint:so,boolean:ai,coerce:ao,custom:oi,date:oo,datetimeRegex:uo,defaultErrorMap:lo,discriminatedUnion:co,effect:ce,enum:po,function:mo,getErrorMap:go,getParsedType:fo,instanceof:ho,intersection:yo,isAborted:bo,isAsync:No,isDirty:_o,isValid:So,late:To,lazy:wo,literal:Po,makeIssue:Io,map:xo,nan:Do,nativeEnum:Co,never:vo,null:ui,nullable:Ao,number:li,object:ci,get objectUtil(){return Bo},oboolean:Vo,onumber:zo,optional:qo,ostring:Fo,pipeline:Lo,preprocess:Mo,promise:Qo,quotelessJson:Eo,record:di,set:Uo,setErrorMap:Oo,strictObject:$o,string:pi,symbol:jo,transformer:ce,tuple:Zo,undefined:Ko,union:ie,unknown:Xo,get util(){return Go},void:Ro},Symbol.toStringTag,{value:"Module"})),a=Symbol.for("drizzle:entityKind");function w(n,e){if(!n||typeof n!="object")return!1;if(n instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(n).constructor;if(t)for(;t;){if(a in t&&t[a]===e[a])return!0;t=Object.getPrototypeOf(t)}return!1}var be;be=a;class Q{constructor(e,t){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(Q,be,"Column");var Ne;Ne=a;class mi{constructor(e,t,r){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(mi,Ne,"ColumnBuilder");const L=Symbol.for("drizzle:Name");var _e;_e=a;class gi{constructor(e,t){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:o,foreignColumns:u}=e();return{name:r,columns:o,foreignTable:u[0].table,foreignColumns:u}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new fi(e,this)}}i(gi,_e,"PgForeignKeyBuilder");var Se;Se=a;class fi{constructor(e,t){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:r}=this.reference(),o=t.map(f=>f.name),u=r.map(f=>f.name),c=[this.table[L],...o,r[0].table[L],...u];return e??`${c.join("_")}_fk`}}i(fi,Se,"PgForeignKey");function Ho(n,...e){return n(...e)}function Wo(n,e){return`${n[L]}_${e.join("_")}_unique`}function de(n,e,t){for(let r=e;r<n.length;r++){const o=n[r];if(o==="\\"){r++;continue}if(o==='"')return[n.slice(e,r).replace(/\\/g,""),r+1];if(!t&&(o===","||o==="}"))return[n.slice(e,r).replace(/\\/g,""),r]}return[n.slice(e).replace(/\\/g,""),n.length]}function hi(n,e=0){const t=[];let r=e,o=!1;for(;r<n.length;){const u=n[r];if(u===","){(o||r===e)&&t.push(""),o=!0,r++;continue}if(o=!1,u==="\\"){r+=2;continue}if(u==='"'){const[g,b]=de(n,r+1,!0);t.push(g),r=b;continue}if(u==="}")return[t,r+1];if(u==="{"){const[g,b]=hi(n,r+1);t.push(g),r=b;continue}const[c,f]=de(n,r,!1);t.push(c),r=f}return[t,r]}function Yo(n){const[e]=hi(n,1);return e}function yi(n){return`{${n.map(e=>Array.isArray(e)?yi(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Te,we;class m extends(we=mi,Te=a,we){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(t){return new Ni(this.config.name,this,t)}references(t,r={}){return this.foreignKeyConfigs.push({ref:t,actions:r}),this}unique(t,r){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,r){return this.foreignKeyConfigs.map(({ref:o,actions:u})=>Ho((c,f)=>{const g=new gi(()=>{const b=c();return{columns:[t],foreignColumns:[b]}});return f.onUpdate&&g.onUpdate(f.onUpdate),f.onDelete&&g.onDelete(f.onDelete),g.build(r)},o,u))}buildExtraConfigColumn(t){return new bi(t,this.config)}}i(m,Te,"PgColumnBuilder");var Pe,Ie;class d extends(Ie=Q,Pe=a,Ie){constructor(e,t){t.uniqueName||(t.uniqueName=Wo(e,[t.name])),super(e,t),this.table=e}}i(d,Pe,"PgColumn");var xe,De;class bi extends(De=d,xe=a,De){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}i(bi,xe,"ExtraConfigColumn");var Ce;Ce=a;class Z{constructor(e,t,r,o){i(this,"name");i(this,"keyAsName");i(this,"type");i(this,"indexConfig");this.name=e,this.keyAsName=t,this.type=r,this.indexConfig=o}}i(Z,Ce,"IndexedColumn");var ve,Ae;class Ni extends(Ae=m,ve=a,Ae){constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){const t=this.config.baseBuilder.build(e);return new ne(e,this.config,t)}}i(Ni,ve,"PgArrayBuilder");var Be,Ve;const H=class H extends(Ve=d,Be=a,Ve){constructor(t,r,o,u){super(t,r);i(this,"size");this.baseColumn=o,this.range=u,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=Yo(t)),t.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(t,r=!1){const o=t.map(u=>u===null?null:w(this.baseColumn,H)?this.baseColumn.mapToDriverValue(u,!0):this.baseColumn.mapToDriverValue(u));return r?o:yi(o)}};i(H,Be,"PgArray");let ne=H;const pe=Symbol.for("drizzle:isPgEnum");function ko(n){return!!n&&typeof n=="function"&&pe in n&&n[pe]===!0}var ze;ze=a;class se{constructor(e,t,r,o=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:o}}}i(se,ze,"Subquery");const eu={startActiveSpan(n,e){return e()}},M=Symbol.for("drizzle:ViewBaseConfig"),k=Symbol.for("drizzle:Schema"),me=Symbol.for("drizzle:Columns"),ge=Symbol.for("drizzle:ExtraConfigColumns"),ee=Symbol.for("drizzle:OriginalName"),te=Symbol.for("drizzle:BaseName"),G=Symbol.for("drizzle:IsAlias"),fe=Symbol.for("drizzle:ExtraConfigBuilder"),_i=Symbol.for("drizzle:IsDrizzleTable");var qe,Fe,Le,Me,Qe,Ee,Ue,Oe,$e,je;je=a,$e=L,Oe=ee,Ue=k,Ee=me,Qe=ge,Me=te,Le=G,Fe=_i,qe=fe;class C{constructor(e,t,r){i(this,$e);i(this,Oe);i(this,Ue);i(this,Ee);i(this,Qe);i(this,Me);i(this,Le,!1);i(this,Fe,!0);i(this,qe);this[L]=this[ee]=e,this[k]=t,this[te]=r}}i(C,je,"Table"),i(C,"Symbol",{Name:L,Schema:k,OriginalName:ee,Columns:me,ExtraConfigColumns:ge,BaseName:te,IsAlias:G,ExtraConfigBuilder:fe});function Si(n){return typeof n=="object"&&n!==null&&_i in n}function tu(n){return n!=null&&typeof n.getSQL=="function"}function nu(n){var t;const e={sql:"",params:[]};for(const r of n)e.sql+=r.sql,e.params.push(...r.params),(t=r.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var Ze;Ze=a;class A{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new _([this])}}i(A,Ze,"StringChunk");var Ke;Ke=a;const q=class q{constructor(e){i(this,"decoder",Ti);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return eu.startActiveSpan("drizzle.buildSQL",t=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){const r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:o,escapeName:u,escapeParam:c,prepareTyping:f,inlineParams:g,paramStartIndex:b}=r;return nu(e.map(l=>{var B;if(w(l,A))return{sql:l.value.join(""),params:[]};if(w(l,R))return{sql:u(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){const y=[new A("(")];for(const[I,la]of l.entries())y.push(la),I<l.length-1&&y.push(new A(", "));return y.push(new A(")")),this.buildQueryFromSourceParams(y,r)}if(w(l,q))return this.buildQueryFromSourceParams(l.queryChunks,{...r,inlineParams:g||l.shouldInlineParams});if(w(l,C)){const y=l[C.Symbol.Schema],I=l[C.Symbol.Name];return{sql:y===void 0||l[G]?u(I):u(y)+"."+u(I),params:[]}}if(w(l,Q)){const y=o.getColumnCasing(l);if(t.invokeSource==="indexes")return{sql:u(y),params:[]};const I=l.table[C.Symbol.Schema];return{sql:l.table[G]||I===void 0?u(l.table[C.Symbol.Name])+"."+u(y):u(I)+"."+u(l.table[C.Symbol.Name])+"."+u(y),params:[]}}if(w(l,Ii)){const y=l[M].schema,I=l[M].name;return{sql:y===void 0||l[M].isAlias?u(I):u(y)+"."+u(I),params:[]}}if(w(l,ae)){if(w(l.value,J))return{sql:c(b.value++,l),params:[l],typings:["none"]};const y=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(w(y,q))return this.buildQueryFromSourceParams([y],r);if(g)return{sql:this.mapInlineParam(y,r),params:[]};let I=["none"];return f&&(I=[f(l.encoder)]),{sql:c(b.value++,y),params:[y],typings:I}}return w(l,J)?{sql:c(b.value++,l),params:[l],typings:["none"]}:w(l,q.Aliased)&&l.fieldAlias!==void 0?{sql:u(l.fieldAlias),params:[]}:w(l,se)?l._.isWith?{sql:u(l._.alias),params:[]}:this.buildQueryFromSourceParams([new A("("),l._.sql,new A(") "),new R(l._.alias)],r):ko(l)?l.schema?{sql:u(l.schema)+"."+u(l.enumName),params:[]}:{sql:u(l.enumName),params:[]}:tu(l)?(B=l.shouldOmitSQLParens)!=null&&B.call(l)?this.buildQueryFromSourceParams([l.getSQL()],r):this.buildQueryFromSourceParams([new A("("),l.getSQL(),new A(")")],r):g?{sql:this.mapInlineParam(l,r),params:[]}:{sql:c(b.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const r=e.toString();return t(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new q.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(q,Ke,"SQL");let _=q;var Xe;Xe=a;class R{constructor(e){i(this,"brand");this.value=e}getSQL(){return new _([this])}}i(R,Xe,"Name");const Ti={mapFromDriverValue:n=>n},wi={mapToDriverValue:n=>n};({...Ti,...wi});var Ge;Ge=a;class ae{constructor(e,t=wi){i(this,"brand");this.value=e,this.encoder=t}getSQL(){return new _([this])}}i(ae,Ge,"Param");function P(n,...e){const t=[];(e.length>0||n.length>0&&n[0]!=="")&&t.push(new A(n[0]));for(const[r,o]of e.entries())t.push(o,new A(n[r+1]));return new _(t)}(n=>{function e(){return new _([])}n.empty=e;function t(g){return new _(g)}n.fromList=t;function r(g){return new _([new A(g)])}n.raw=r;function o(g,b){const l=[];for(const[B,y]of g.entries())B>0&&b!==void 0&&l.push(b),l.push(y);return new _(l)}n.join=o;function u(g){return new R(g)}n.identifier=u;function c(g){return new J(g)}n.placeholder=c;function f(g,b){return new ae(g,b)}n.param=f})(P||(P={}));(n=>{var t;t=a;const r=class r{constructor(u,c){i(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=c}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};i(r,t,"SQL.Aliased");let e=r;n.Aliased=e})(_||(_={}));var Re;Re=a;class J{constructor(e){this.name=e}getSQL(){return new _([this])}}i(J,Re,"Placeholder");const Pi=Symbol.for("drizzle:IsDrizzleView");var Je,He,We;We=a,He=M,Je=Pi;class Ii{constructor({name:e,schema:t,selectedFields:r,query:o}){i(this,He);i(this,Je,!0);this[M]={name:e,originalName:e,schema:t,selectedFields:r,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new _([this])}}i(Ii,We,"View");function ru(n){return typeof n=="object"&&n!==null&&Pi in n}Q.prototype.getSQL=function(){return new _([this])};C.prototype.getSQL=function(){return new _([this])};se.prototype.getSQL=function(){return new _([this])};function iu(n){return n[C.Symbol.Columns]}function su(n){return n[M].selectedFields}function x(n,e){return{name:typeof n=="string"&&n.length>0?n:"",config:typeof n=="object"?n:e}}var Ye,ke;class O extends(ke=m,Ye=a,ke){generatedAlwaysAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(O,Ye,"PgIntColumnBaseBuilder");var et,tt;class xi extends(tt=O,et=a,tt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Di(e,this.config)}}i(xi,et,"PgBigInt53Builder");var nt,rt;class Di extends(rt=d,nt=a,rt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Di,nt,"PgBigInt53");var it,st;class Ci extends(st=O,it=a,st){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new vi(e,this.config)}}i(Ci,it,"PgBigInt64Builder");var at,ot;class vi extends(ot=d,at=a,ot){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(vi,at,"PgBigInt64");function au(n,e){const{name:t,config:r}=x(n,e);return r.mode==="number"?new xi(t):new Ci(t)}var ut,lt;class Ai extends(lt=m,ut=a,lt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Bi(e,this.config)}}i(Ai,ut,"PgBigSerial53Builder");var ct,dt;class Bi extends(dt=d,ct=a,dt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Bi,ct,"PgBigSerial53");var pt,mt;class Vi extends(mt=m,pt=a,mt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new zi(e,this.config)}}i(Vi,pt,"PgBigSerial64Builder");var gt,ft;class zi extends(ft=d,gt=a,ft){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(zi,gt,"PgBigSerial64");function ou(n,e){const{name:t,config:r}=x(n,e);return r.mode==="number"?new Ai(t):new Vi(t)}var ht,yt;class qi extends(yt=m,ht=a,yt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Fi(e,this.config)}}i(qi,ht,"PgBooleanBuilder");var bt,Nt;class Fi extends(Nt=d,bt=a,Nt){getSQLType(){return"boolean"}}i(Fi,bt,"PgBoolean");function h(n){return new qi(n??"")}var _t,St;class Li extends(St=m,_t=a,St){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Mi(e,this.config)}}i(Li,_t,"PgCharBuilder");var Tt,wt;class Mi extends(wt=d,Tt=a,wt){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Mi,Tt,"PgChar");function uu(n,e={}){const{name:t,config:r}=x(n,e);return new Li(t,r)}var Pt,It;class Qi extends(It=m,Pt=a,It){constructor(e){super(e,"string","PgCidr")}build(e){return new Ei(e,this.config)}}i(Qi,Pt,"PgCidrBuilder");var xt,Dt;class Ei extends(Dt=d,xt=a,Dt){getSQLType(){return"cidr"}}i(Ei,xt,"PgCidr");function lu(n){return new Qi(n??"")}var Ct,vt;class Ui extends(vt=m,Ct=a,vt){constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new Oi(e,this.config)}}i(Ui,Ct,"PgCustomColumnBuilder");var At,Bt;class Oi extends(Bt=d,At=a,Bt){constructor(t,r){super(t,r);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}i(Oi,At,"PgCustomColumn");function $i(n){return(e,t)=>{const{name:r,config:o}=x(e,t);return new Ui(r,o,n)}}var Vt,zt;class E extends(zt=m,Vt=a,zt){defaultNow(){return this.default(P`now()`)}}i(E,Vt,"PgDateColumnBaseBuilder");var qt,Ft;class ji extends(Ft=E,qt=a,Ft){constructor(e){super(e,"date","PgDate")}build(e){return new Zi(e,this.config)}}i(ji,qt,"PgDateBuilder");var Lt,Mt;class Zi extends(Mt=d,Lt=a,Mt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(Zi,Lt,"PgDate");var Qt,Et;class Ki extends(Et=E,Qt=a,Et){constructor(e){super(e,"string","PgDateString")}build(e){return new Xi(e,this.config)}}i(Ki,Qt,"PgDateStringBuilder");var Ut,Ot;class Xi extends(Ot=d,Ut=a,Ot){getSQLType(){return"date"}}i(Xi,Ut,"PgDateString");function cu(n,e){const{name:t,config:r}=x(n,e);return(r==null?void 0:r.mode)==="date"?new ji(t):new Ki(t)}var $t,jt;class Gi extends(jt=m,$t=a,jt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Ri(e,this.config)}}i(Gi,$t,"PgDoublePrecisionBuilder");var Zt,Kt;class Ri extends(Kt=d,Zt=a,Kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(Ri,Zt,"PgDoublePrecision");function du(n){return new Gi(n??"")}var Xt,Gt;class Ji extends(Gt=m,Xt=a,Gt){constructor(e){super(e,"string","PgInet")}build(e){return new Hi(e,this.config)}}i(Ji,Xt,"PgInetBuilder");var Rt,Jt;class Hi extends(Jt=d,Rt=a,Jt){getSQLType(){return"inet"}}i(Hi,Rt,"PgInet");function pu(n){return new Ji(n??"")}var Ht,Wt;class Wi extends(Wt=O,Ht=a,Wt){constructor(e){super(e,"number","PgInteger")}build(e){return new Yi(e,this.config)}}i(Wi,Ht,"PgIntegerBuilder");var Yt,kt;class Yi extends(kt=d,Yt=a,kt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(Yi,Yt,"PgInteger");function oe(n){return new Wi(n??"")}var en,tn;class ki extends(tn=m,en=a,tn){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new es(e,this.config)}}i(ki,en,"PgIntervalBuilder");var nn,rn;class es extends(rn=d,nn=a,rn){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${t}${r}`}}i(es,nn,"PgInterval");function mu(n,e={}){const{name:t,config:r}=x(n,e);return new ki(t,r)}var sn,an;class ts extends(an=m,sn=a,an){constructor(e){super(e,"json","PgJson")}build(e){return new ns(e,this.config)}}i(ts,sn,"PgJsonBuilder");var on,un;class ns extends(un=d,on=a,un){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(ns,on,"PgJson");function gu(n){return new ts(n??"")}var ln,cn;class rs extends(cn=m,ln=a,cn){constructor(e){super(e,"json","PgJsonb")}build(e){return new is(e,this.config)}}i(rs,ln,"PgJsonbBuilder");var dn,pn;class is extends(pn=d,dn=a,pn){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(is,dn,"PgJsonb");function $(n){return new rs(n??"")}var mn,gn;class ss extends(gn=m,mn=a,gn){constructor(e){super(e,"array","PgLine")}build(e){return new as(e,this.config)}}i(ss,mn,"PgLineBuilder");var fn,hn;class as extends(hn=d,fn=a,hn){getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,o]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(as,fn,"PgLine");var yn,bn;class os extends(bn=m,yn=a,bn){constructor(e){super(e,"json","PgLineABC")}build(e){return new us(e,this.config)}}i(os,yn,"PgLineABCBuilder");var Nn,_n;class us extends(_n=d,Nn=a,_n){getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(us,Nn,"PgLineABC");function fu(n,e){const{name:t,config:r}=x(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new ss(t):new os(t)}var Sn,Tn;class ls extends(Tn=m,Sn=a,Tn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new cs(e,this.config)}}i(ls,Sn,"PgMacaddrBuilder");var wn,Pn;class cs extends(Pn=d,wn=a,Pn){getSQLType(){return"macaddr"}}i(cs,wn,"PgMacaddr");function hu(n){return new ls(n??"")}var In,xn;class ds extends(xn=m,In=a,xn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ps(e,this.config)}}i(ds,In,"PgMacaddr8Builder");var Dn,Cn;class ps extends(Cn=d,Dn=a,Cn){getSQLType(){return"macaddr8"}}i(ps,Dn,"PgMacaddr8");function yu(n){return new ds(n??"")}var vn,An;class ms extends(An=m,vn=a,An){constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new gs(e,this.config)}}i(ms,vn,"PgNumericBuilder");var Bn,Vn;class gs extends(Vn=d,Bn=a,Vn){constructor(t,r){super(t,r);i(this,"precision");i(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(gs,Bn,"PgNumeric");function fs(n,e){const{name:t,config:r}=x(n,e);return new ms(t,r==null?void 0:r.precision,r==null?void 0:r.scale)}const V=fs;var zn,qn;class hs extends(qn=m,zn=a,qn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new ys(e,this.config)}}i(hs,zn,"PgPointTupleBuilder");var Fn,Ln;class ys extends(Ln=d,Fn=a,Ln){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(ys,Fn,"PgPointTuple");var Mn,Qn;class bs extends(Qn=m,Mn=a,Qn){constructor(e){super(e,"json","PgPointObject")}build(e){return new Ns(e,this.config)}}i(bs,Mn,"PgPointObjectBuilder");var En,Un;class Ns extends(Un=d,En=a,Un){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(Ns,En,"PgPointObject");function bu(n,e){const{name:t,config:r}=x(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new hs(t):new bs(t)}function Nu(n){const e=[];for(let t=0;t<n.length;t+=2)e.push(Number.parseInt(n.slice(t,t+2),16));return new Uint8Array(e)}function he(n,e){const t=new ArrayBuffer(8),r=new DataView(t);for(let o=0;o<8;o++)r.setUint8(o,n[e+o]);return r.getFloat64(0,!0)}function _s(n){const e=Nu(n);let t=0;const r=e[t];t+=1;const o=new DataView(e.buffer),u=o.getUint32(t,r===1);if(t+=4,u&536870912&&(o.getUint32(t,r===1),t+=4),(u&65535)===1){const c=he(e,t);t+=8;const f=he(e,t);return t+=8,[c,f]}throw new Error("Unsupported geometry type")}var On,$n;class Ss extends($n=m,On=a,$n){constructor(e){super(e,"array","PgGeometry")}build(e){return new Ts(e,this.config)}}i(Ss,On,"PgGeometryBuilder");var jn,Zn;class Ts extends(Zn=d,jn=a,Zn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return _s(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(Ts,jn,"PgGeometry");var Kn,Xn;class ws extends(Xn=m,Kn=a,Xn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Ps(e,this.config)}}i(ws,Kn,"PgGeometryObjectBuilder");var Gn,Rn;class Ps extends(Rn=d,Gn=a,Rn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=_s(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(Ps,Gn,"PgGeometryObject");function _u(n,e){const{name:t,config:r}=x(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Ss(t):new ws(t)}var Jn,Hn;class Is extends(Hn=m,Jn=a,Hn){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new xs(e,this.config)}}i(Is,Jn,"PgRealBuilder");var Wn,Yn;class xs extends(Yn=d,Wn=a,Yn){constructor(t,r){super(t,r);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}i(xs,Wn,"PgReal");function Su(n){return new Is(n??"")}var kn,er;class Ds extends(er=m,kn=a,er){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Cs(e,this.config)}}i(Ds,kn,"PgSerialBuilder");var tr,nr;class Cs extends(nr=d,tr=a,nr){getSQLType(){return"serial"}}i(Cs,tr,"PgSerial");function Tu(n){return new Ds(n??"")}var rr,ir;class vs extends(ir=O,rr=a,ir){constructor(e){super(e,"number","PgSmallInt")}build(e){return new As(e,this.config)}}i(vs,rr,"PgSmallIntBuilder");var sr,ar;class As extends(ar=d,sr=a,ar){constructor(){super(...arguments);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}i(As,sr,"PgSmallInt");function wu(n){return new vs(n??"")}var or,ur;class Bs extends(ur=m,or=a,ur){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Vs(e,this.config)}}i(Bs,or,"PgSmallSerialBuilder");var lr,cr;class Vs extends(cr=d,lr=a,cr){getSQLType(){return"smallserial"}}i(Vs,lr,"PgSmallSerial");function Pu(n){return new Bs(n??"")}var dr,pr;class zs extends(pr=m,dr=a,pr){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new qs(e,this.config)}}i(zs,dr,"PgTextBuilder");var mr,gr;class qs extends(gr=d,mr=a,gr){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(qs,mr,"PgText");function s(n,e={}){const{name:t,config:r}=x(n,e);return new zs(t,r)}var fr,hr;class Fs extends(hr=E,fr=a,hr){constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}build(e){return new Ls(e,this.config)}}i(Fs,fr,"PgTimeBuilder");var yr,br;class Ls extends(br=d,yr=a,br){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ls,yr,"PgTime");function Iu(n,e={}){const{name:t,config:r}=x(n,e);return new Fs(t,r.withTimezone??!1,r.precision)}var Nr,_r;class Ms extends(_r=E,Nr=a,_r){constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new Qs(e,this.config)}}i(Ms,Nr,"PgTimestampBuilder");var Sr,Tr;class Qs extends(Tr=d,Sr=a,Tr){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));i(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Qs,Sr,"PgTimestamp");var wr,Pr;class Es extends(Pr=E,wr=a,Pr){constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new Us(e,this.config)}}i(Es,wr,"PgTimestampStringBuilder");var Ir,xr;class Us extends(xr=d,Ir=a,xr){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Us,Ir,"PgTimestampString");function T(n,e={}){const{name:t,config:r}=x(n,e);return(r==null?void 0:r.mode)==="string"?new Es(t,r.withTimezone??!1,r.precision):new Ms(t,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var Dr,Cr;class Os extends(Cr=m,Dr=a,Cr){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(P`gen_random_uuid()`)}build(e){return new $s(e,this.config)}}i(Os,Dr,"PgUUIDBuilder");var vr,Ar;class $s extends(Ar=d,vr=a,Ar){getSQLType(){return"uuid"}}i($s,vr,"PgUUID");function xu(n){return new Os(n??"")}var Br,Vr;class js extends(Vr=m,Br=a,Vr){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Zs(e,this.config)}}i(js,Br,"PgVarcharBuilder");var zr,qr;class Zs extends(qr=d,zr=a,qr){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(Zs,zr,"PgVarchar");function p(n,e={}){const{name:t,config:r}=x(n,e);return new js(t,r)}var Fr,Lr;class Ks extends(Lr=m,Fr=a,Lr){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new Xs(e,this.config)}}i(Ks,Fr,"PgBinaryVectorBuilder");var Mr,Qr;class Xs extends(Qr=d,Mr=a,Qr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(Xs,Mr,"PgBinaryVector");function Du(n,e){const{name:t,config:r}=x(n,e);return new Ks(t,r)}var Er,Ur;class Gs extends(Ur=m,Er=a,Ur){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Rs(e,this.config)}}i(Gs,Er,"PgHalfVectorBuilder");var Or,$r;class Rs extends($r=d,Or=a,$r){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(Rs,Or,"PgHalfVector");function Cu(n,e){const{name:t,config:r}=x(n,e);return new Gs(t,r)}var jr,Zr;class Js extends(Zr=m,jr=a,Zr){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new Hs(e,this.config)}}i(Js,jr,"PgSparseVectorBuilder");var Kr,Xr;class Hs extends(Xr=d,Kr=a,Xr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(Hs,Kr,"PgSparseVector");function vu(n,e){const{name:t,config:r}=x(n,e);return new Js(t,r)}var Gr,Rr;class Ws extends(Rr=m,Gr=a,Rr){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Ys(e,this.config)}}i(Ws,Gr,"PgVectorBuilder");var Jr,Hr;class Ys extends(Hr=d,Jr=a,Hr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(Ys,Jr,"PgVector");function Au(n,e){const{name:t,config:r}=x(n,e);return new Ws(t,r)}function Bu(){return{bigint:au,bigserial:ou,boolean:h,char:uu,cidr:lu,customType:$i,date:cu,doublePrecision:du,inet:pu,integer:oe,interval:mu,json:gu,jsonb:$,line:fu,macaddr:hu,macaddr8:yu,numeric:fs,point:bu,geometry:_u,real:Su,serial:Tu,smallint:wu,smallserial:Pu,text:s,time:Iu,timestamp:T,uuid:xu,varchar:p,bit:Du,halfvec:Cu,sparsevec:vu,vector:Au}}const re=Symbol.for("drizzle:PgInlineForeignKeys"),ye=Symbol.for("drizzle:EnableRLS");var Wr,Yr,kr,ei,ti;class U extends(ti=C,ei=a,kr=re,Yr=ye,Wr=C.Symbol.ExtraConfigBuilder,ti){constructor(){super(...arguments);i(this,kr,[]);i(this,Yr,!1);i(this,Wr)}}i(U,ei,"PgTable"),i(U,"Symbol",Object.assign({},C.Symbol,{InlineForeignKeys:re,EnableRLS:ye}));function Vu(n,e,t,r,o=n){const u=new U(n,r,o),c=typeof e=="function"?e(Bu()):e,f=Object.fromEntries(Object.entries(c).map(([l,B])=>{const y=B;y.setName(l);const I=y.build(u);return u[re].push(...y.buildForeignKeys(I,u)),[l,I]})),g=Object.fromEntries(Object.entries(c).map(([l,B])=>{const y=B;y.setName(l);const I=y.buildExtraConfigColumn(u);return[l,I]})),b=Object.assign(u,f);return b[C.Symbol.Columns]=f,b[C.Symbol.ExtraConfigColumns]=g,t&&(b[U.Symbol.ExtraConfigBuilder]=t),Object.assign(b,{enableRLS:()=>(b[U.Symbol.EnableRLS]=!0,b)})}const D=(n,e,t)=>Vu(n,e,t,void 0);var ni;ni=a;class ue{constructor(e,t){this.unique=e,this.name=t}on(...e){return new K(e.map(t=>{if(w(t,_))return t;t=t;const r=new Z(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...e){return new K(e.map(t=>{if(w(t,_))return t;t=t;const r=new Z(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,r}),this.unique,!0,this.name)}using(e,...t){return new K(t.map(r=>{if(w(r,_))return r;r=r;const o=new Z(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),o}),this.unique,!0,this.name,e)}}i(ue,ni,"PgIndexBuilderOn");var ri;ri=a;class K{constructor(e,t,r,o,u="btree"){i(this,"config");this.config={name:o,columns:e,unique:t,only:r,method:u}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ks(this.config,e)}}i(K,ri,"PgIndexBuilder");var ii;ii=a;class ks{constructor(e,t){i(this,"config");this.config={...e,table:t}}}i(ks,ii,"PgIndex");function F(n){return new ue(!1,n)}function zu(n){return new ue(!0,n)}const N={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function S(n,e){return e.includes(n.columnType)}function qu(n){return"enumValues"in n&&Array.isArray(n.enumValues)&&n.enumValues.length>0}const Fu=ie([pi(),li(),ai(),ui()]),Lu=ie([Fu,di(X()),si(X())]),Mu=oi(n=>n instanceof Buffer);function ea(n,e){const t=(e==null?void 0:e.zodInstance)??Jo,r=(e==null?void 0:e.coerce)??{};let o;return qu(n)&&(o=n.enumValues.length?t.enum(n.enumValues):t.string()),o||(S(n,["PgGeometry","PgPointTuple"])?o=t.tuple([t.number(),t.number()]):S(n,["PgGeometryObject","PgPointObject"])?o=t.object({x:t.number(),y:t.number()}):S(n,["PgHalfVector","PgVector"])?(o=t.array(t.number()),o=n.dimensions?o.length(n.dimensions):o):S(n,["PgLine"])?o=t.tuple([t.number(),t.number(),t.number()]):S(n,["PgLineABC"])?o=t.object({a:t.number(),b:t.number(),c:t.number()}):S(n,["PgArray"])?(o=t.array(ea(n.baseColumn,t)),o=n.size?o.length(n.size):o):n.dataType==="array"?o=t.array(t.any()):n.dataType==="number"?o=Qu(n,t,r):n.dataType==="bigint"?o=Eu(n,t,r):n.dataType==="boolean"?o=r===!0||r.boolean?t.coerce.boolean():t.boolean():n.dataType==="date"?o=r===!0||r.date?t.coerce.date():t.date():n.dataType==="string"?o=Uu(n,t,r):n.dataType==="json"?o=Lu:n.dataType==="custom"?o=t.any():n.dataType==="buffer"&&(o=Mu)),o||(o=t.any()),o}function Qu(n,e,t){let r=n.getSQLType().includes("unsigned"),o,u,c=!1;S(n,["MySqlTinyInt","SingleStoreTinyInt"])?(o=r?0:N.INT8_MIN,u=r?N.INT8_UNSIGNED_MAX:N.INT8_MAX,c=!0):S(n,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=r?0:N.INT16_MIN,u=r?N.INT16_UNSIGNED_MAX:N.INT16_MAX,c=!0):S(n,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=r?0:N.INT24_MIN,u=r?N.INT24_UNSIGNED_MAX:N.INT24_MAX,c=S(n,["MySqlMediumInt","SingleStoreMediumInt"])):S(n,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=r?0:N.INT32_MIN,u=r?N.INT32_UNSIGNED_MAX:N.INT32_MAX,c=!0):S(n,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=r?0:N.INT48_MIN,u=r?N.INT48_UNSIGNED_MAX:N.INT48_MAX):S(n,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||S(n,["MySqlSerial","SingleStoreSerial"]),o=r?0:Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,c=!0):S(n,["MySqlYear","SingleStoreYear"])?(o=1901,u=2155,c=!0):(o=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER);let f=t===!0||t!=null&&t.number?e.coerce.number():e.number();return f=f.min(o).max(u),c?f.int():f}function Eu(n,e,t){const r=n.getSQLType().includes("unsigned"),o=r?0n:N.INT64_MIN,u=r?N.INT64_UNSIGNED_MAX:N.INT64_MAX;return(t===!0||t!=null&&t.bigint?e.coerce.bigint():e.bigint()).min(o).max(u)}function Uu(n,e,t){if(S(n,["PgUUID"]))return e.string().uuid();let r,o,u=!1;S(n,["PgVarchar","SQLiteText"])?r=n.length:S(n,["MySqlVarChar","SingleStoreVarChar"])?r=n.length??N.INT16_UNSIGNED_MAX:S(n,["MySqlText","SingleStoreText"])&&(n.textType==="longtext"?r=N.INT32_UNSIGNED_MAX:n.textType==="mediumtext"?r=N.INT24_UNSIGNED_MAX:n.textType==="text"?r=N.INT16_UNSIGNED_MAX:r=N.INT8_UNSIGNED_MAX),S(n,["PgChar","MySqlChar","SingleStoreChar"])&&(r=n.length,u=!0),S(n,["PgBinaryVector"])&&(o=/^[01]+$/,r=n.dimensions);let c=t===!0||t!=null&&t.string?e.coerce.string():e.string();return c=o?c.regex(o):c,r&&u?c.length(r):r?c.max(r):c}function ta(n){return Si(n)?iu(n):su(n)}function na(n,e,t,r){const o={};for(const[u,c]of Object.entries(n)){if(!w(c,Q)&&!w(c,_)&&!w(c,_.Aliased)&&typeof c=="object"){const B=Si(c)||ru(c)?ta(c):c;o[u]=na(B,e[u]??{},t,r);continue}const f=e[u];if(f!==void 0&&typeof f!="function"){o[u]=f;continue}const g=w(c,Q)?c:void 0,b=g?ea(g,r):X(),l=typeof f=="function"?f(b):b;t.never(g)||(o[u]=l,g&&(t.nullable(g)&&(o[u]=o[u].nullable()),t.optional(g)&&(o[u]=o[u].optional())))}return ci(o)}const Ou={never:n=>{var e,t;return((e=n==null?void 0:n.generated)==null?void 0:e.type)==="always"||((t=n==null?void 0:n.generatedIdentity)==null?void 0:t.type)==="always"},optional:n=>!n.notNull||n.notNull&&n.hasDefault,nullable:n=>!n.notNull},v=(n,e)=>{const t=ta(n);return na(t,{},Ou)},ra=$i({dataType(){return"geography"}});D("sessions",{sid:p("sid").primaryKey(),sess:$("sess").notNull(),expire:T("expire").notNull()});const z=D("users",{id:p("id").primaryKey().default(P`gen_random_uuid()`),username:s("username"),password:s("password"),email:p("email").unique(),phone:s("phone"),passwordHash:s("password_hash"),googleId:s("google_id").unique(),openidSub:s("openid_sub").unique(),role:s("role").notNull().default("user"),name:p("name"),avatar:s("avatar"),profileImageUrl:p("profile_image_url"),language:s("language").default("en"),languagePreference:s("language_preference"),region:s("region"),regionPreference:s("region_preference"),clinicId:p("clinic_id").references(()=>oa.id,{onDelete:"set null"}),createdAt:T("created_at").notNull().defaultNow(),updatedAt:T("updated_at").notNull().defaultNow()},n=>[F("idx_user_email").on(n.email),F("idx_user_phone").on(n.phone)]);v(z).omit({id:!0,createdAt:!0,updatedAt:!0});const ia=D("pets",{id:p("id").primaryKey().default(P`gen_random_uuid()`),userId:p("user_id").notNull().references(()=>z.id,{onDelete:"cascade"}),name:s("name").notNull(),species:s("species").notNull(),breed:s("breed"),breedId:p("breed_id").references(()=>aa.id),age:oe("age"),weight:s("weight"),medicalNotes:s("medical_notes"),createdAt:T("created_at").notNull().defaultNow(),lastVisitHospitalId:p("last_visit_hospital_id").references(()=>j.id,{onDelete:"set null"}),lastVisitDate:T("last_visit_date"),type:s("type"),color:s("color"),medicalHistory:s("medical_history"),microchipId:s("microchip_id")});v(ia).omit({id:!0,createdAt:!0});const sa=D("countries",{id:p("id").primaryKey().default(P`gen_random_uuid()`),code:s("code").notNull().unique(),nameEn:s("name_en").notNull(),nameZh:s("name_zh"),region:s("region"),active:h("active"),phonePrefix:s("phone_prefix"),flag:s("flag")}),Wu=v(sa).omit({id:!0}),W=D("regions",{id:p("id").primaryKey().default(P`gen_random_uuid()`),countryId:p("country_id").notNull().references(()=>sa.id),countryCode:s("country_code"),code:s("code").notNull(),nameEn:s("name_en").notNull(),nameZh:s("name_zh"),active:h("active"),phonePrefix:s("phone_prefix"),flag:s("flag")},n=>[F("idx_region_country").on(n.countryId)]),Yu=v(W).omit({id:!0}),aa=D("pet_breeds",{id:p("id").primaryKey().default(P`gen_random_uuid()`),species:s("species").notNull(),breedEn:s("breed_en").notNull(),breedZh:s("breed_zh"),countryCode:s("country_code"),isCommon:h("is_common").default(!1),active:h("active").notNull().default(!0)}),ku=v(aa).omit({id:!0}),oa=D("clinics",{id:p("id").primaryKey().default(P`gen_random_uuid()`),name:s("name").notNull(),nameZh:s("name_zh"),address:s("address").notNull(),addressZh:s("address_zh"),phone:s("phone").notNull(),whatsapp:s("whatsapp"),email:s("email"),lineUserId:s("line_user_id"),regionId:p("region_id").notNull().references(()=>W.id),is24Hour:h("is_24_hour").notNull().default(!1),isAvailable:h("is_available").notNull().default(!0),isSupportHospital:h("is_support_hospital").notNull().default(!1),latitude:V("latitude"),longitude:V("longitude"),location:ra("location"),status:s("status").notNull().default("active"),services:s("services").array(),ownerVerificationCode:s("owner_verification_code"),createdAt:T("created_at").notNull().defaultNow()}),el=v(oa).omit({id:!0,location:!0,createdAt:!0}),ua=D("emergency_requests",{id:p("id").primaryKey().default(P`gen_random_uuid()`),userId:p("user_id").references(()=>z.id,{onDelete:"set null"}),petId:p("pet_id").references(()=>ia.id,{onDelete:"set null"}),symptom:s("symptom"),locationLatitude:V("location_latitude"),locationLongitude:V("location_longitude"),manualLocation:s("manual_location"),contactName:s("contact_name").notNull(),contactPhone:s("contact_phone").notNull(),status:s("status").notNull().default("pending"),regionId:p("region_id").references(()=>W.id),createdAt:T("created_at").notNull().defaultNow(),petSpecies:s("pet_species"),petBreed:s("pet_breed"),petAge:s("pet_age"),voiceTranscript:s("voice_transcript"),aiAnalyzedSymptoms:s("ai_analyzed_symptoms"),isVoiceRecording:h("is_voice_recording")});v(ua).omit({id:!0,createdAt:!0});const j=D("hospitals",{id:p("id").primaryKey().default(P`gen_random_uuid()`),slug:s("slug").notNull().unique(),nameEn:s("name_en").notNull(),nameZh:s("name_zh").notNull(),addressEn:s("address_en").notNull(),addressZh:s("address_zh").notNull(),regionId:p("region_id").notNull().references(()=>W.id),latitude:V("latitude"),longitude:V("longitude"),location:ra("location"),phone:s("phone"),whatsapp:s("whatsapp"),email:s("email"),websiteUrl:s("website_url"),open247:h("open_247").notNull().default(!0),isAvailable:h("is_available").notNull().default(!0),isPartner:h("is_partner").notNull().default(!1),liveStatus:s("live_status"),photos:$("photos"),lastVerifiedAt:T("last_verified_at"),verifiedById:p("verified_by_id").references(()=>z.id,{onDelete:"set null"}),onSiteVet247:h("on_site_vet_247"),triagePolicy:s("triage_policy"),typicalWaitBand:s("typical_wait_band"),isolationWard:h("isolation_ward"),ambulanceSupport:h("ambulance_support"),icuLevel:s("icu_level"),nurse24h:h("nurse_24h"),ownerVisitPolicy:s("owner_visit_policy"),eolSupport:h("eol_support"),imagingXray:h("imaging_xray"),imagingUS:h("imaging_us"),imagingCT:h("imaging_ct"),sameDayCT:h("same_day_ct"),inHouseLab:h("in_house_lab"),extLabCutoff:s("ext_lab_cutoff"),bloodBankAccess:s("blood_bank_access"),sxEmergencySoft:h("sx_emergency_soft"),sxEmergencyOrtho:h("sx_emergency_ortho"),anaesMonitoring:s("anaes_monitoring"),specialistAvail:s("specialist_avail"),speciesAccepted:s("species_accepted").array(),whatsappTriage:h("whatsapp_triage"),languages:s("languages").array(),parking:h("parking"),wheelchairAccess:h("wheelchair_access"),payMethods:s("pay_methods").array(),admissionDeposit:h("admission_deposit"),depositBand:s("deposit_band"),insuranceSupport:s("insurance_support").array(),recheckWindow:s("recheck_window"),refundPolicy:s("refund_policy"),ownerVerificationCode:s("owner_verification_code"),verified:h("verified").notNull().default(!1),createdAt:T("created_at").notNull().defaultNow(),updatedAt:T("updated_at").notNull().defaultNow()},n=>[F("idx_hospital_location").using("gist",n.location),F("idx_hospital_region").on(n.regionId)]),tl=v(j).omit({id:!0,location:!0,createdAt:!0,updatedAt:!0}),$u=D("messages",{id:p("id").primaryKey().default(P`gen_random_uuid()`),emergencyRequestId:p("emergency_request_id").notNull().references(()=>ua.id,{onDelete:"cascade"}),hospitalId:p("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),messageType:s("message_type").notNull(),recipient:s("recipient").notNull(),content:s("content").notNull(),status:s("status").notNull().default("queued"),sentAt:T("sent_at"),deliveredAt:T("delivered_at"),failedAt:T("failed_at"),errorMessage:s("error_message"),retryCount:oe("retry_count").notNull().default(0),createdAt:T("created_at").notNull().defaultNow()});v($u).omit({id:!0,createdAt:!0});const ju=D("feature_flags",{id:p("id").primaryKey().default(P`gen_random_uuid()`),key:s("key").notNull().unique(),enabled:h("enabled").notNull().default(!1),value:$("value"),description:s("description"),updatedAt:T("updated_at").notNull().defaultNow()});v(ju).omit({id:!0,updatedAt:!0});const Zu=D("audit_logs",{id:p("id").primaryKey().default(P`gen_random_uuid()`),entityType:s("entity_type").notNull(),entityId:s("entity_id").notNull(),action:s("action").notNull(),userId:p("user_id").references(()=>z.id,{onDelete:"set null"}),changes:$("changes"),ipAddress:s("ip_address"),userAgent:s("user_agent"),createdAt:T("created_at").notNull().defaultNow()});v(Zu).omit({id:!0,createdAt:!0});const Ku=D("privacy_consents",{id:p("id").primaryKey().default(P`gen_random_uuid()`),userId:p("user_id").notNull().references(()=>z.id,{onDelete:"cascade"}),consentType:s("consent_type").notNull(),accepted:h("accepted").notNull(),consentedAt:T("consented_at").notNull().defaultNow()});v(Ku).omit({id:!0,consentedAt:!0});const Xu=D("translations",{id:p("id").primaryKey().default(P`gen_random_uuid()`),key:s("key").notNull().unique(),value:s("value"),en:s("en").notNull(),zhHk:s("zh_hk").notNull()});v(Xu).omit({id:!0});const Gu=D("hospital_consult_fees",{id:p("id").primaryKey().default(P`gen_random_uuid()`),hospitalId:p("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),feeType:s("fee_type").notNull(),species:s("species").notNull(),minFee:V("min_fee"),maxFee:V("max_fee"),currency:s("currency").notNull().default("HKD"),notes:s("notes"),lastUpdated:T("last_updated").notNull().defaultNow()},n=>[F("idx_consult_fees_hospital").on(n.hospitalId),zu("idx_consult_fees_unique").on(n.hospitalId,n.feeType,n.species)]);v(Gu).omit({id:!0});const Ru=D("hospital_updates",{id:p("id").primaryKey().default(P`gen_random_uuid()`),hospitalId:p("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),submittedById:p("submitted_by_id").references(()=>z.id,{onDelete:"set null"}),updateType:s("update_type").notNull(),fieldName:s("field_name"),oldValue:s("old_value"),newValue:s("new_value"),status:s("status").notNull().default("pending"),reviewedById:p("reviewed_by_id").references(()=>z.id,{onDelete:"set null"}),reviewedAt:T("reviewed_at"),notes:s("notes"),createdAt:T("created_at").notNull().defaultNow()},n=>[F("idx_hospital_updates_hospital").on(n.hospitalId)]);v(Ru).omit({id:!0,createdAt:!0});export{Wu as a,Yu as b,ku as c,el as d,tl as i};
