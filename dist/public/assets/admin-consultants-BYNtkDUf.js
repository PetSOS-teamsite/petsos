import{a6 as Je,a as et,r as x,h as Y,g as tt,j as e,S as st,X as it,B as h,aL as at,aM as nt,aN as J,_ as Ne,b8 as ee,L as C,$ as te,a0 as se,a1 as ie,a2 as ae,F as lt,z as j,A as p,D as g,E as f,I as L,G as N,J as k,K as A,N as E,O as P,P as m,a4 as ze,a3 as rt,o as ct,s as o,ag as ne,b5 as Ke,an as ot,ah as dt,T as z,U as K}from"./index-yGPiJpIr.js";import{u as H}from"./useMutation-g6oReyS0.js";import{B as u}from"./badge-4zSkoC7y.js";import{T as He}from"./textarea-B-COFCfx.js";import{S as Ce}from"./switch-BdZ2xI1R.js";import{A as we,a as Se,b as ke,c as Ae,d as Ee,e as Pe,f as Te,g as Ve}from"./alert-dialog-CbtaLizn.js";import{T as le,a as re,b as y,c as l,d as ce,e as a}from"./table-B-k4FnaN.js";import{S as oe}from"./skeleton-DdmbE3wx.js";import{A as ht}from"./arrow-left-BVTF3Tl5.js";import{U as mt}from"./users-D19uV04S.js";import{F as xt}from"./file-check-EsSS1xVf.js";import{E as ut}from"./eye-D4S_P32I.js";import{C as de}from"./circle-check-big-BsKdr8iG.js";import{C as he}from"./circle-x-BIzv2Di1.js";import{P as Fe}from"./plus-oXMKgXWF.js";import{P as jt}from"./pencil-TrFe8HXS.js";import{T as De}from"./trash-2-pXZASDYN.js";import{M as pt}from"./message-square-BEUah6ir.js";import{f as gt}from"./format-CKHqWWuY.js";import"./en-US-wfBU2YNu.js";function ft(s){return s?s.length<=4?s:"*".repeat(s.length-4)+s.slice(-4):"-"}const vt=ct({fullName:o().min(1,"Full name is required"),role:ne(["vet","nurse","practice_manager","other"]),vetType:ne(["GP","Specialist","GP_with_interest"]).optional().nullable(),clinicName:o().optional(),educationBackground:o().optional(),specialtyOrInterest:o().optional(),visibilityPreference:ne(["name_role","clinic_only","anonymous"]).default("name_role"),internalNotes:o().optional(),isActive:Ke().default(!0),isPublic:Ke().default(!0),nameEn:o().optional(),nameZh:o().optional(),titleEn:o().optional(),titleZh:o().optional(),specialtyEn:o().optional(),specialtyZh:o().optional(),bioEn:o().optional(),bioZh:o().optional(),photoUrl:o().optional(),licenseNumber:o().optional(),hospitalAffiliationEn:o().optional(),hospitalAffiliationZh:o().optional(),yearsExperience:ot.number().optional()});function Bt(){const{language:s}=Je(),{toast:d}=et(),[Ze,Ie]=x.useState("applications"),[i,Le]=x.useState(null),[Oe,F]=x.useState(!1),[bt,Be]=x.useState(!1),[_e,w]=x.useState(!1),[D,Z]=x.useState(null),[O,B]=x.useState(null),[Me,I]=x.useState(!1),[_,M]=x.useState(null),[$,me]=x.useState(""),[q,xe]=x.useState(""),[ue,je]=x.useState("clarity"),[pe,ge]=x.useState(""),{data:S,isLoading:$e}=Y({queryKey:["/api/admin/vet-applications"]}),{data:v,isLoading:qe}=Y({queryKey:["/api/consultants"]}),{data:b,isLoading:Re}=Y({queryKey:["/api/admin/verified-content"]}),r=tt({resolver:dt(vt),defaultValues:{fullName:"",role:"vet",vetType:null,clinicName:"",educationBackground:"",specialtyOrInterest:"",visibilityPreference:"name_role",internalNotes:"",isActive:!0,isPublic:!0,nameEn:"",nameZh:"",titleEn:"",titleZh:"",specialtyEn:"",specialtyZh:"",bioEn:"",bioZh:"",photoUrl:"",licenseNumber:"",hospitalAffiliationEn:"",hospitalAffiliationZh:"",yearsExperience:void 0}}),Ge=r.watch("role"),T=H({mutationFn:async t=>(await z("POST",`/api/admin/vet-applications/${t}/approve`,{})).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/admin/vet-applications"]}),K.invalidateQueries({queryKey:["/api/consultants"]}),d({title:s==="zh-HK"?"申請已批准":"Application approved"})},onError:t=>{d({title:s==="zh-HK"?"批准失敗":"Failed to approve",description:t.message,variant:"destructive"})}}),V=H({mutationFn:async t=>(await z("PATCH",`/api/admin/vet-applications/${t}/status`,{status:"rejected"})).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/admin/vet-applications"]}),d({title:s==="zh-HK"?"申請已拒絕":"Application rejected"})},onError:t=>{d({title:s==="zh-HK"?"拒絕失敗":"Failed to reject",description:t.message,variant:"destructive"})}}),R=H({mutationFn:async t=>(await z("POST",`/api/admin/vet-applications/${t}/send-thank-you`,{})).json(),onSuccess:()=>{d({title:s==="zh-HK"?"感謝信息已發送":"Thank you message sent"})},onError:t=>{d({title:s==="zh-HK"?"發送失敗":"Failed to send",description:t.message,variant:"destructive"})}}),G=H({mutationFn:async t=>(await z("POST","/api/admin/consultants",t)).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/consultants"]}),w(!1),r.reset(),d({title:s==="zh-HK"?"顧問已創建":"Consultant created"})},onError:t=>{d({title:s==="zh-HK"?"創建失敗":"Failed to create",description:t.message,variant:"destructive"})}}),Q=H({mutationFn:async({id:t,data:n})=>(await z("PATCH",`/api/admin/consultants/${t}`,n)).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/consultants"]}),w(!1),Z(null),r.reset(),d({title:s==="zh-HK"?"顧問已更新":"Consultant updated"})},onError:t=>{d({title:s==="zh-HK"?"更新失敗":"Failed to update",description:t.message,variant:"destructive"})}}),fe=H({mutationFn:async t=>(await z("DELETE",`/api/admin/consultants/${t}`,{})).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/consultants"]}),B(null),d({title:s==="zh-HK"?"顧問已刪除":"Consultant deleted"})},onError:t=>{d({title:s==="zh-HK"?"刪除失敗":"Failed to delete",description:t.message,variant:"destructive"})}}),U=H({mutationFn:async t=>(await z("POST","/api/admin/content-verifications",t)).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/admin/verified-content"]}),I(!1),me(""),xe(""),je("clarity"),ge(""),d({title:s==="zh-HK"?"驗證已添加":"Verification added"})},onError:t=>{d({title:s==="zh-HK"?"添加失敗":"Failed to add",description:t.message,variant:"destructive"})}}),ve=H({mutationFn:async({consultantId:t,contentId:n})=>(await z("DELETE",`/api/admin/content-verifications/${t}/${n}`,{})).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/admin/verified-content"]}),M(null),d({title:s==="zh-HK"?"驗證已移除":"Verification removed"})},onError:t=>{d({title:s==="zh-HK"?"移除失敗":"Failed to remove",description:t.message,variant:"destructive"})}}),Qe=t=>{Z(t),r.reset({fullName:t.fullName||t.nameEn||"",role:t.role||"vet",vetType:t.vetType,clinicName:t.clinicName||"",educationBackground:t.educationBackground||"",specialtyOrInterest:t.specialtyOrInterest||"",visibilityPreference:t.visibilityPreference||"name_role",internalNotes:t.internalNotes||"",isActive:t.isActive,isPublic:t.isPublic,nameEn:t.nameEn||"",nameZh:t.nameZh||"",titleEn:t.titleEn||"",titleZh:t.titleZh||"",specialtyEn:t.specialtyEn||"",specialtyZh:t.specialtyZh||"",bioEn:t.bioEn||"",bioZh:t.bioZh||"",photoUrl:t.photoUrl||"",licenseNumber:t.licenseNumber||"",hospitalAffiliationEn:t.hospitalAffiliationEn||"",hospitalAffiliationZh:t.hospitalAffiliationZh||"",yearsExperience:t.yearsExperience||void 0}),w(!0)},Ue=()=>{Z(null),r.reset({fullName:"",role:"vet",vetType:null,clinicName:"",educationBackground:"",specialtyOrInterest:"",visibilityPreference:"name_role",internalNotes:"",isActive:!0,isPublic:!0,nameEn:"",nameZh:"",titleEn:"",titleZh:"",specialtyEn:"",specialtyZh:"",bioEn:"",bioZh:"",photoUrl:"",licenseNumber:"",hospitalAffiliationEn:"",hospitalAffiliationZh:"",yearsExperience:void 0}),w(!0)},We=t=>{t.role!=="vet"&&(t.vetType=null),D?Q.mutate({id:D.id,data:t}):G.mutate(t)},be=t=>{switch(t){case"pending":return e.jsxs(u,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),s==="zh-HK"?"待審核":"Pending"]});case"approved":return e.jsxs(u,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),s==="zh-HK"?"已批准":"Approved"]});case"rejected":return e.jsxs(u,{variant:"secondary",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),s==="zh-HK"?"已拒絕":"Rejected"]});default:return e.jsx(u,{variant:"outline",children:t})}},W=t=>{const c={vet:{en:"Vet",zh:"獸醫"},nurse:{en:"Nurse",zh:"護士"},practice_manager:{en:"Practice Manager",zh:"診所經理"},other:{en:"Other",zh:"其他"}}[t]||{en:t,zh:t};return e.jsx(u,{variant:"outline",children:s==="zh-HK"?c.zh:c.en})},X=t=>{if(!t)return"-";const c={GP:{en:"GP",zh:"全科"},Specialist:{en:"Specialist",zh:"專科"},GP_with_interest:{en:"GP with Interest",zh:"全科帶興趣"}}[t]||{en:t,zh:t};return e.jsx(u,{variant:"secondary",children:s==="zh-HK"?c.zh:c.en})},Xe=t=>{const c={name_role:{en:"Name & Role",zh:"名稱及角色",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},clinic_only:{en:"Clinic Only",zh:"僅顯示診所",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},anonymous:{en:"Anonymous",zh:"匿名",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}[t]||{en:t,zh:t,color:""};return e.jsx(u,{variant:"secondary",className:c.color,children:s==="zh-HK"?c.zh:c.en})},Ye=t=>{const c={clarity:{en:"Clarity",zh:"清晰度",color:"bg-blue-100 text-blue-800"},safety:{en:"Safety",zh:"安全",color:"bg-green-100 text-green-800"},triage_language:{en:"Triage Language",zh:"分診語言",color:"bg-purple-100 text-purple-800"}}[t]||{en:t,zh:t,color:"bg-gray-100 text-gray-800"};return e.jsx(u,{variant:"secondary",className:c.color,children:s==="zh-HK"?c.zh:c.en})},ye=t=>{if(!t)return"-";try{return gt(new Date(t),"yyyy-MM-dd")}catch{return"-"}};return e.jsxs(e.Fragment,{children:[e.jsx(st,{noindex:!0}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",children:[e.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(it,{href:"/admin",children:e.jsx(h,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(ht,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-page-title",children:s==="zh-HK"?"獸醫顧問管理":"Vet Consultant Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s==="zh-HK"?"管理申請、顧問和內容驗證":"Manage applications, consultants and content verifications"})]})]})})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs(at,{value:Ze,onValueChange:Ie,className:"w-full",children:[e.jsxs(nt,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(J,{value:"applications",className:"flex items-center gap-2","data-testid":"tab-applications",children:[e.jsx(Ne,{className:"h-4 w-4"}),s==="zh-HK"?"申請":"Applications"]}),e.jsxs(J,{value:"consultants",className:"flex items-center gap-2","data-testid":"tab-consultants",children:[e.jsx(mt,{className:"h-4 w-4"}),s==="zh-HK"?"顧問":"Consultants"]}),e.jsxs(J,{value:"verifications",className:"flex items-center gap-2","data-testid":"tab-verifications",children:[e.jsx(xt,{className:"h-4 w-4"}),s==="zh-HK"?"內容驗證":"Content Verification"]})]}),e.jsx(ee,{value:"applications",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-applications-title",children:s==="zh-HK"?"顧問申請":"Consultant Applications"})}),$e?e.jsx("div",{className:"p-8 space-y-4",children:[1,2,3].map(t=>e.jsx(oe,{className:"h-12 w-full"},t))}):e.jsxs(le,{children:[e.jsx(re,{children:e.jsxs(y,{children:[e.jsx(l,{children:s==="zh-HK"?"姓名":"Full Name"}),e.jsx(l,{children:s==="zh-HK"?"角色":"Role"}),e.jsx(l,{children:s==="zh-HK"?"獸醫類型":"Vet Type"}),e.jsx(l,{children:s==="zh-HK"?"診所":"Clinic"}),e.jsx(l,{children:s==="zh-HK"?"電話":"Phone"}),e.jsx(l,{children:s==="zh-HK"?"提交日期":"Submitted"}),e.jsx(l,{children:s==="zh-HK"?"狀態":"Status"}),e.jsx(l,{children:s==="zh-HK"?"操作":"Actions"})]})}),e.jsxs(ce,{children:[(S==null?void 0:S.length)===0&&e.jsx(y,{children:e.jsx(a,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:s==="zh-HK"?"暫無申請":"No applications yet"})}),S==null?void 0:S.map(t=>e.jsxs(y,{"data-testid":`row-application-${t.id}`,children:[e.jsx(a,{className:"font-medium",children:t.fullName||t.nameEn||"-"}),e.jsx(a,{children:W(t.role)}),e.jsx(a,{children:t.role==="vet"?X(t.vetType):"-"}),e.jsx(a,{children:t.clinicName||"-"}),e.jsx(a,{className:"font-mono text-sm",children:ft(t.phoneWhatsapp||t.phone)}),e.jsx(a,{children:ye(t.submittedAt||t.createdAt)}),e.jsx(a,{children:be(t.status)}),e.jsx(a,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>{Le(t),F(!0),Be(!1)},"data-testid":`button-view-${t.id}`,children:e.jsx(ut,{className:"h-4 w-4"})}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>T.mutate(t.id),disabled:T.isPending,"data-testid":`button-approve-${t.id}`,children:T.isPending?e.jsx(C,{className:"h-4 w-4 animate-spin"}):e.jsx(de,{className:"h-4 w-4"})}),e.jsx(h,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>V.mutate(t.id),disabled:V.isPending,"data-testid":`button-reject-${t.id}`,children:V.isPending?e.jsx(C,{className:"h-4 w-4 animate-spin"}):e.jsx(he,{className:"h-4 w-4"})})]})]})})]},t.id))]})]})]})}),e.jsx(ee,{value:"consultants",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-consultants-title",children:s==="zh-HK"?"顧問列表":"Consultant List"}),e.jsxs(h,{onClick:Ue,"data-testid":"button-add-consultant",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),s==="zh-HK"?"新增顧問":"Add New Consultant"]})]}),qe?e.jsx("div",{className:"p-8 space-y-4",children:[1,2,3].map(t=>e.jsx(oe,{className:"h-12 w-full"},t))}):e.jsxs(le,{children:[e.jsx(re,{children:e.jsxs(y,{children:[e.jsx(l,{children:s==="zh-HK"?"姓名":"Name"}),e.jsx(l,{children:s==="zh-HK"?"角色":"Role"}),e.jsx(l,{children:s==="zh-HK"?"獸醫類型":"Vet Type"}),e.jsx(l,{children:s==="zh-HK"?"診所":"Clinic"}),e.jsx(l,{children:s==="zh-HK"?"顯示設定":"Visibility"}),e.jsx(l,{children:s==="zh-HK"?"狀態":"Status"}),e.jsx(l,{children:s==="zh-HK"?"操作":"Actions"})]})}),e.jsxs(ce,{children:[(v==null?void 0:v.length)===0&&e.jsx(y,{children:e.jsx(a,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:s==="zh-HK"?"暫無顧問":"No consultants yet"})}),v==null?void 0:v.map(t=>e.jsxs(y,{"data-testid":`row-consultant-${t.id}`,children:[e.jsx(a,{className:"font-medium",children:t.fullName||s==="zh-HK"&&t.nameZh||t.nameEn||"-"}),e.jsx(a,{children:W(t.role)}),e.jsx(a,{children:t.role==="vet"?X(t.vetType):"-"}),e.jsx(a,{children:t.clinicName||"-"}),e.jsx(a,{children:Xe(t.visibilityPreference)}),e.jsx(a,{children:t.isActive?e.jsx(u,{className:"bg-green-100 text-green-800",children:s==="zh-HK"?"啟用":"Active"}):e.jsx(u,{variant:"secondary",children:s==="zh-HK"?"停用":"Inactive"})}),e.jsx(a,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>Qe(t),"data-testid":`button-edit-${t.id}`,children:e.jsx(jt,{className:"h-4 w-4"})}),e.jsx(h,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>B(t.id),"data-testid":`button-delete-${t.id}`,children:e.jsx(De,{className:"h-4 w-4"})})]})})]},t.id))]})]})]})}),e.jsx(ee,{value:"verifications",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-verifications-title",children:s==="zh-HK"?"內容驗證":"Content Verifications"}),e.jsxs(h,{onClick:()=>I(!0),"data-testid":"button-add-verification",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),s==="zh-HK"?"新增驗證":"Add Verification"]})]}),Re?e.jsx("div",{className:"p-8 space-y-4",children:[1,2,3].map(t=>e.jsx(oe,{className:"h-12 w-full"},t))}):e.jsxs(le,{children:[e.jsx(re,{children:e.jsxs(y,{children:[e.jsx(l,{children:s==="zh-HK"?"內容標題":"Content Title"}),e.jsx(l,{children:s==="zh-HK"?"驗證者":"Verified By"}),e.jsx(l,{children:s==="zh-HK"?"驗證範圍":"Verification Scope"}),e.jsx(l,{children:s==="zh-HK"?"驗證日期":"Verified Date"}),e.jsx(l,{children:s==="zh-HK"?"操作":"Actions"})]})}),e.jsxs(ce,{children:[(b==null?void 0:b.length)===0&&e.jsx(y,{children:e.jsx(a,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:s==="zh-HK"?"暫無驗證內容":"No verified content yet"})}),b==null?void 0:b.map(t=>{var n,c;return e.jsxs(y,{"data-testid":`row-content-${t.id}`,children:[e.jsx(a,{className:"font-medium",children:s==="zh-HK"&&t.titleZh||t.titleEn}),e.jsx(a,{children:(n=t.verification)!=null&&n.consultant?t.verification.consultant.fullName||s==="zh-HK"&&t.verification.consultant.nameZh||t.verification.consultant.nameEn:"-"}),e.jsx(a,{children:(c=t.verification)!=null&&c.verificationScope?Ye(t.verification.verificationScope):"-"}),e.jsx(a,{children:t.verification?ye(t.verification.verifiedAt):"-"}),e.jsx(a,{children:t.verification&&e.jsx(h,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>M({consultantId:t.verification.consultantId,contentId:t.id}),"data-testid":`button-remove-verification-${t.id}`,children:e.jsx(De,{className:"h-4 w-4"})})})]},t.id)})]})]})]})})]})}),e.jsx(te,{open:Oe,onOpenChange:F,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsx(ae,{children:s==="zh-HK"?"申請詳情":"Application Details"})}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:s==="zh-HK"?"專業資料":"Professional Info"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"姓名":"Full Name"}),e.jsx("p",{className:"text-foreground",children:i.fullName||i.nameEn||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"角色":"Role"}),e.jsx("p",{className:"text-foreground",children:W(i.role)})]}),i.role==="vet"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"獸醫類型":"Vet Type"}),e.jsx("p",{className:"text-foreground",children:X(i.vetType)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"診所":"Clinic"}),e.jsx("p",{className:"text-foreground",children:i.clinicName||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"電郵":"Email"}),e.jsx("p",{className:"text-foreground",children:i.email||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="zh-HK"?"電話 (WhatsApp)":"Phone (WhatsApp)"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-foreground font-mono",children:i.phoneWhatsapp||i.phone||"-"}),(i.phoneWhatsapp||i.phone)&&e.jsxs(h,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>R.mutate(i.id),disabled:R.isPending,"data-testid":"button-send-thank-you",children:[R.isPending?e.jsx(C,{className:"h-4 w-4 animate-spin mr-1"}):e.jsx(pt,{className:"h-4 w-4 mr-1"}),s==="zh-HK"?"發送感謝":"Send Thank You"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:s==="zh-HK"?"教育背景":"Education Background"}),e.jsx("p",{className:"text-foreground",children:i.educationBackground||"-"})]}),i.verificationScope&&i.verificationScope.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:s==="zh-HK"?"驗證範圍":"Verification Scope"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.verificationScope.map((t,n)=>e.jsx(u,{variant:"secondary",children:t},n))})]}),i.futureContactInterest&&i.futureContactInterest.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:s==="zh-HK"?"未來聯繫興趣":"Future Contact Interest"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.futureContactInterest.map((t,n)=>e.jsx(u,{variant:"outline",children:t},n))})]}),i.additionalComments&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:s==="zh-HK"?"附加評論":"Additional Comments"}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:i.additionalComments})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:s==="zh-HK"?"狀態:":"Status:"}),be(i.status)]}),i.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",className:"text-green-600",onClick:()=>{T.mutate(i.id),F(!1)},disabled:T.isPending,"data-testid":"button-approve-modal",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),s==="zh-HK"?"批准":"Approve"]}),e.jsxs(h,{variant:"outline",className:"text-red-600",onClick:()=>{V.mutate(i.id),F(!1)},disabled:V.isPending,"data-testid":"button-reject-modal",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),s==="zh-HK"?"拒絕":"Reject"]})]})]})]})]})}),e.jsx(te,{open:_e,onOpenChange:t=>{w(t),t||(Z(null),r.reset())},children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsx(ae,{children:D?s==="zh-HK"?"編輯顧問":"Edit Consultant":s==="zh-HK"?"新增顧問":"Add New Consultant"})}),e.jsx(lt,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(We),className:"space-y-4",children:[e.jsx(j,{control:r.control,name:"fullName",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"全名 *":"Full Name *"}),e.jsx(f,{children:e.jsx(L,{...t,"data-testid":"input-fullname"})}),e.jsx(N,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(j,{control:r.control,name:"role",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"角色 *":"Role *"}),e.jsxs(k,{onValueChange:t.onChange,value:t.value,children:[e.jsx(f,{children:e.jsx(A,{"data-testid":"select-role",children:e.jsx(E,{placeholder:s==="zh-HK"?"選擇角色":"Select role"})})}),e.jsxs(P,{children:[e.jsx(m,{value:"vet",children:s==="zh-HK"?"獸醫":"Vet"}),e.jsx(m,{value:"nurse",children:s==="zh-HK"?"護士":"Nurse"}),e.jsx(m,{value:"practice_manager",children:s==="zh-HK"?"診所經理":"Practice Manager"}),e.jsx(m,{value:"other",children:s==="zh-HK"?"其他":"Other"})]})]}),e.jsx(N,{})]})}),Ge==="vet"&&e.jsx(j,{control:r.control,name:"vetType",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"獸醫類型":"Vet Type"}),e.jsxs(k,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(f,{children:e.jsx(A,{"data-testid":"select-vet-type",children:e.jsx(E,{placeholder:s==="zh-HK"?"選擇類型":"Select type"})})}),e.jsxs(P,{children:[e.jsx(m,{value:"GP",children:s==="zh-HK"?"全科":"GP"}),e.jsx(m,{value:"Specialist",children:s==="zh-HK"?"專科":"Specialist"}),e.jsx(m,{value:"GP_with_interest",children:s==="zh-HK"?"全科帶興趣":"GP with Interest"})]})]}),e.jsx(N,{})]})})]}),e.jsx(j,{control:r.control,name:"clinicName",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"診所名稱":"Clinic Name"}),e.jsx(f,{children:e.jsx(L,{...t,"data-testid":"input-clinic"})}),e.jsx(N,{})]})}),e.jsx(j,{control:r.control,name:"educationBackground",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"教育背景":"Education Background"}),e.jsx(f,{children:e.jsx(L,{...t,placeholder:"e.g., BVSc, DVM, VN Diploma","data-testid":"input-education"})}),e.jsx(N,{})]})}),e.jsx(j,{control:r.control,name:"specialtyOrInterest",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"專長或興趣":"Specialty or Interest"}),e.jsx(f,{children:e.jsx(L,{...t,"data-testid":"input-specialty"})}),e.jsx(N,{})]})}),e.jsx(j,{control:r.control,name:"visibilityPreference",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"顯示偏好":"Visibility Preference"}),e.jsxs(k,{onValueChange:t.onChange,value:t.value,children:[e.jsx(f,{children:e.jsx(A,{"data-testid":"select-visibility",children:e.jsx(E,{})})}),e.jsxs(P,{children:[e.jsx(m,{value:"name_role",children:s==="zh-HK"?"顯示名稱及角色":"Name & Role"}),e.jsx(m,{value:"clinic_only",children:s==="zh-HK"?"僅顯示診所":"Clinic Only"}),e.jsx(m,{value:"anonymous",children:s==="zh-HK"?"匿名":"Anonymous"})]})]}),e.jsx(N,{})]})}),e.jsx(j,{control:r.control,name:"internalNotes",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{children:s==="zh-HK"?"內部備註 (僅管理員可見)":"Internal Notes (Admin only)"}),e.jsx(f,{children:e.jsx(He,{...t,rows:3,"data-testid":"input-internal-notes"})}),e.jsx(N,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(j,{control:r.control,name:"isActive",render:({field:t})=>e.jsxs(p,{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx(g,{children:s==="zh-HK"?"啟用":"Active"}),e.jsx(f,{children:e.jsx(Ce,{checked:t.value,onCheckedChange:t.onChange,"data-testid":"switch-active"})})]})}),e.jsx(j,{control:r.control,name:"isPublic",render:({field:t})=>e.jsxs(p,{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx(g,{children:s==="zh-HK"?"公開顯示":"Public"}),e.jsx(f,{children:e.jsx(Ce,{checked:t.value,onCheckedChange:t.onChange,"data-testid":"switch-public"})})]})})]}),e.jsxs(ze,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>w(!1),children:s==="zh-HK"?"取消":"Cancel"}),e.jsxs(h,{type:"submit",disabled:G.isPending||Q.isPending,"data-testid":"button-submit-consultant",children:[(G.isPending||Q.isPending)&&e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),D?s==="zh-HK"?"更新":"Update":s==="zh-HK"?"創建":"Create"]})]})]})})]})}),e.jsx(we,{open:!!O,onOpenChange:()=>B(null),children:e.jsxs(Se,{children:[e.jsxs(ke,{children:[e.jsx(Ae,{children:s==="zh-HK"?"確認刪除":"Confirm Delete"}),e.jsx(Ee,{children:s==="zh-HK"?"確定要刪除此顧問嗎？此操作無法撤銷。":"Are you sure you want to delete this consultant? This action cannot be undone."})]}),e.jsxs(Pe,{children:[e.jsx(Te,{children:s==="zh-HK"?"取消":"Cancel"}),e.jsxs(Ve,{className:"bg-red-600 hover:bg-red-700",onClick:()=>O&&fe.mutate(O),"data-testid":"button-confirm-delete",children:[fe.isPending&&e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),s==="zh-HK"?"刪除":"Delete"]})]})]})}),e.jsx(te,{open:Me,onOpenChange:I,children:e.jsxs(se,{children:[e.jsxs(ie,{children:[e.jsx(ae,{children:s==="zh-HK"?"新增內容驗證":"Add Content Verification"}),e.jsx(rt,{children:s==="zh-HK"?"選擇顧問和要驗證的內容":"Select a consultant and content to verify"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:s==="zh-HK"?"顧問":"Consultant"}),e.jsxs(k,{value:$,onValueChange:me,children:[e.jsx(A,{"data-testid":"select-consultant",children:e.jsx(E,{placeholder:s==="zh-HK"?"選擇顧問":"Select consultant"})}),e.jsx(P,{children:v==null?void 0:v.map(t=>e.jsx(m,{value:t.id,children:t.fullName||s==="zh-HK"&&t.nameZh||t.nameEn},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:s==="zh-HK"?"內容":"Content"}),e.jsxs(k,{value:q,onValueChange:xe,children:[e.jsx(A,{"data-testid":"select-content",children:e.jsx(E,{placeholder:s==="zh-HK"?"選擇內容":"Select content"})}),e.jsx(P,{children:b==null?void 0:b.filter(t=>!t.verification).map(t=>e.jsx(m,{value:t.id,children:s==="zh-HK"&&t.titleZh||t.titleEn},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:s==="zh-HK"?"驗證範圍":"Verification Scope"}),e.jsxs(k,{value:ue,onValueChange:je,children:[e.jsx(A,{"data-testid":"select-scope",children:e.jsx(E,{})}),e.jsxs(P,{children:[e.jsx(m,{value:"clarity",children:s==="zh-HK"?"清晰度":"Clarity"}),e.jsx(m,{value:"safety",children:s==="zh-HK"?"安全":"Safety"}),e.jsx(m,{value:"triage_language",children:s==="zh-HK"?"分診語言":"Triage Language"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:s==="zh-HK"?"管理員備註 (選填)":"Admin Note (optional)"}),e.jsx(He,{value:pe,onChange:t=>ge(t.target.value),placeholder:s==="zh-HK"?"備註...":"Notes...","data-testid":"input-admin-note"})]})]}),e.jsxs(ze,{children:[e.jsx(h,{variant:"outline",onClick:()=>I(!1),children:s==="zh-HK"?"取消":"Cancel"}),e.jsxs(h,{onClick:()=>U.mutate({consultantId:$,contentId:q,verificationScope:ue,adminNote:pe||void 0}),disabled:!$||!q||U.isPending,"data-testid":"button-submit-verification",children:[U.isPending&&e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),s==="zh-HK"?"確認":"Confirm"]})]})]})}),e.jsx(we,{open:!!_,onOpenChange:()=>M(null),children:e.jsxs(Se,{children:[e.jsxs(ke,{children:[e.jsx(Ae,{children:s==="zh-HK"?"確認移除驗證":"Confirm Remove Verification"}),e.jsx(Ee,{children:s==="zh-HK"?"確定要移除此內容驗證嗎？":"Are you sure you want to remove this content verification?"})]}),e.jsxs(Pe,{children:[e.jsx(Te,{children:s==="zh-HK"?"取消":"Cancel"}),e.jsxs(Ve,{className:"bg-red-600 hover:bg-red-700",onClick:()=>_&&ve.mutate(_),"data-testid":"button-confirm-remove-verification",children:[ve.isPending&&e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),s==="zh-HK"?"移除":"Remove"]})]})]})})]})]})}export{Bt as default};
