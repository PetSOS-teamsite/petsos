import{c as he,a as xe,W as me,r as T,h as J,g as _,j as e,L as O,C as g,b as f,v as y,w as v,a8 as pe,y as L,F as G,z as t,A as i,D as r,E as l,I as u,G as x,B as E,X as je,_ as ue,J as w,K as N,N as C,O as k,P as h,R as ge,a9 as fe,o as ae,s as m,b5 as c,b6 as ye,ah as Y,T as q,U}from"./index-yGPiJpIr.js";import{u as D}from"./useMutation-g6oReyS0.js";import{T as P}from"./textarea-B-COFCfx.js";import{S as d}from"./switch-BdZ2xI1R.js";import{u as ve,C as be,U as we}from"./useStorageStatus-CWBDob1J.js";import{f as Ne}from"./dateFormat-B3M36iqg.js";import{A as Ce}from"./arrow-left-BVTF3Tl5.js";import{B as ee}from"./building-2-Bk6ymILd.js";import{S as ke}from"./stethoscope-Y56DkLQX.js";import{U as Se}from"./users-D19uV04S.js";import{I as se}from"./image-BKIDXmlM.js";import{C as Te}from"./circle-x-BIzv2Di1.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Pe=ae({verificationCode:m().length(6,"Verification code must be 6 digits").regex(/^\d+$/,"Must be 6 digits")}),Ve=ae({nameEn:m().min(1,"Hospital name (English) is required"),nameZh:m().min(1,"Hospital name (Chinese) is required"),addressEn:m().min(1,"Address (English) is required"),addressZh:m().min(1,"Address (Chinese) is required"),phone:m().optional(),whatsapp:m().optional(),email:m().optional(),websiteUrl:m().optional(),regionId:m().min(1,"Region is required"),open247:c().default(!0),parking:c().optional(),wheelchairAccess:c().optional(),isolationWard:c().optional(),ambulanceSupport:c().optional(),eolSupport:c().optional(),whatsappTriage:c().optional(),icuLevel:m().optional(),imagingXray:c().optional(),imagingUS:c().optional(),imagingCT:c().optional(),sameDayCT:c().optional(),inHouseLab:c().optional(),extLabCutoff:m().optional(),bloodBankAccess:m().optional(),sxEmergencySoft:c().optional(),sxEmergencyOrtho:c().optional(),anaesMonitoring:m().optional(),specialistAvail:m().optional(),oxygenTherapy:c().optional(),ventilator:c().optional(),bloodTransfusion:c().optional(),imagingMRI:c().optional(),endoscopy:c().optional(),dialysis:c().optional(),defibrillator:c().optional(),onSiteVet247:c().optional(),nurse24h:c().optional(),triagePolicy:m().optional(),typicalWaitBand:m().optional(),ownerVisitPolicy:m().optional(),recheckWindow:m().optional(),admissionDeposit:c().optional(),depositBand:m().optional(),refundPolicy:m().optional(),photos:ye().optional()});function Ze(){const{toast:j}=xe(),{isStorageAvailable:K}=ve(),[ne,F]=me("/hospital/edit/:slug"),[te,ie]=T.useState(!1),[re,Z]=T.useState(!1),[I,z]=T.useState(""),[R,H]=T.useState(!1),$=T.useRef(null),b=F==null?void 0:F.slug,{data:a,isLoading:le}=J({queryKey:["/api/hospitals",b],queryFn:async()=>{if(!b)return null;const s=await fetch(`/api/hospitals/slug/${b}`);return s.ok?s.json():null},enabled:!!b}),{data:B}=J({queryKey:["/api/regions"]}),S=_({resolver:Y(Pe),defaultValues:{verificationCode:""}}),n=_({resolver:Y(Ve),defaultValues:{nameEn:"",nameZh:"",addressEn:"",addressZh:"",phone:"",whatsapp:"",email:"",websiteUrl:"",regionId:"",open247:!0,parking:!1,wheelchairAccess:!1,isolationWard:!1,ambulanceSupport:!1,eolSupport:!1,whatsappTriage:!1,icuLevel:"",imagingXray:!1,imagingUS:!1,imagingCT:!1,sameDayCT:!1,inHouseLab:!1,extLabCutoff:"",bloodBankAccess:"",sxEmergencySoft:!1,sxEmergencyOrtho:!1,anaesMonitoring:"",specialistAvail:"",oxygenTherapy:!1,ventilator:!1,bloodTransfusion:!1,imagingMRI:!1,endoscopy:!1,dialysis:!1,defibrillator:!1,onSiteVet247:!1,nurse24h:!1,triagePolicy:"",typicalWaitBand:"",ownerVisitPolicy:"",recheckWindow:"",admissionDeposit:!1,depositBand:"",refundPolicy:"",photos:[]}}),V=n.watch("photos"),X=()=>{if(I.trim()){const s=V||[];n.setValue("photos",[...s,I.trim()],{shouldDirty:!0,shouldTouch:!0}),z("")}};T.useEffect(()=>{a&&n.reset({nameEn:a.nameEn||"",nameZh:a.nameZh||"",addressEn:a.addressEn||"",addressZh:a.addressZh||"",phone:a.phone||"",whatsapp:a.whatsapp||"",email:a.email||"",websiteUrl:a.websiteUrl||"",regionId:a.regionId||"",open247:a.open247??!0,parking:a.parking??!1,wheelchairAccess:a.wheelchairAccess??!1,isolationWard:a.isolationWard??!1,ambulanceSupport:a.ambulanceSupport??!1,eolSupport:a.eolSupport??!1,whatsappTriage:a.whatsappTriage??!1,icuLevel:a.icuLevel||"",imagingXray:a.imagingXray??!1,imagingUS:a.imagingUS??!1,imagingCT:a.imagingCT??!1,sameDayCT:a.sameDayCT??!1,inHouseLab:a.inHouseLab??!1,extLabCutoff:a.extLabCutoff||"",bloodBankAccess:a.bloodBankAccess||"",sxEmergencySoft:a.sxEmergencySoft??!1,sxEmergencyOrtho:a.sxEmergencyOrtho??!1,anaesMonitoring:a.anaesMonitoring||"",specialistAvail:a.specialistAvail||"",oxygenTherapy:a.oxygenTherapy??!1,ventilator:a.ventilator??!1,bloodTransfusion:a.bloodTransfusion??!1,imagingMRI:a.imagingMRI??!1,endoscopy:a.endoscopy??!1,dialysis:a.dialysis??!1,defibrillator:a.defibrillator??!1,onSiteVet247:a.onSiteVet247??!1,nurse24h:a.nurse24h??!1,triagePolicy:a.triagePolicy||"",typicalWaitBand:a.typicalWaitBand||"",ownerVisitPolicy:a.ownerVisitPolicy||"",recheckWindow:a.recheckWindow||"",admissionDeposit:a.admissionDeposit??!1,depositBand:a.depositBand||"",refundPolicy:a.refundPolicy||"",photos:a.photos||[]})},[a]);const M=D({mutationFn:async s=>{if(!(a!=null&&a.id))throw new Error("Hospital not found");const o=await fetch(`/api/hospitals/${a.id}/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationCode:s.verificationCode})});if(!o.ok)throw new Error("Invalid verification code");return o.json()},onSuccess:()=>{ie(!0),j({title:"Verified successfully!"})},onError:()=>{j({title:"Invalid verification code",variant:"destructive"})}}),W=D({mutationFn:async s=>{if(!(a!=null&&a.id))throw new Error("Hospital not found");const o=S.getValues("verificationCode");return q("PATCH",`/api/hospitals/${a.id}/update-owner`,{...s,verificationCode:o})},onSuccess:()=>{Z(!0),j({title:"Hospital information saved successfully!"}),U.invalidateQueries({queryKey:["/api/hospitals",b]}),U.invalidateQueries({queryKey:["/api/hospitals"]}),setTimeout(()=>Z(!1),3e3)},onError:s=>{j({title:"Error saving hospital",description:s.message,variant:"destructive"})}}),oe=D({mutationFn:async s=>{if(!(a!=null&&a.id))throw new Error("Hospital not found");const o=S.getValues("verificationCode"),p=await q("POST",`/api/hospitals/${a.id}/photo-upload-url`,{verificationCode:o,contentType:s.type}),{uploadURL:A}=await p.json();if(!(await fetch(A,{method:"PUT",headers:{"Content-Type":s.type},body:s})).ok)throw new Error("Failed to upload photo");const de=A.split("?")[0];return await(await q("POST",`/api/hospitals/${a.id}/photo`,{verificationCode:o,filePath:de})).json()},onSuccess:s=>{const o=s.photoUrl,p=n.getValues("photos")||[];n.setValue("photos",[...p,o],{shouldDirty:!0,shouldTouch:!0}),U.invalidateQueries({queryKey:["/api/hospitals",b]}),j({title:"Photo uploaded successfully!"}),H(!1)},onError:s=>{j({title:"Failed to upload photo",description:s.message,variant:"destructive"}),H(!1)}}),Q=D({mutationFn:async s=>{if(!(a!=null&&a.id))throw new Error("Hospital not found");const o=S.getValues("verificationCode"),p=await fetch(`/api/hospitals/${a.id}/photo`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationCode:o,photoUrl:s})});if(!p.ok){const A=await p.json();throw new Error(A.message||"Failed to delete photo")}return{photoUrl:s}},onSuccess:({photoUrl:s})=>{const o=n.getValues("photos")||[];n.setValue("photos",o.filter(p=>p!==s),{shouldDirty:!0,shouldTouch:!0}),U.invalidateQueries({queryKey:["/api/hospitals",b]}),j({title:"Photo removed successfully!"})},onError:s=>{j({title:"Failed to remove photo",description:s.message,variant:"destructive"})}}),ce=s=>{var p;const o=(p=s.target.files)==null?void 0:p[0];if(o){if(!o.type.startsWith("image/")){j({title:"Invalid file type",description:"Please select an image file",variant:"destructive"}),s.target.value="";return}if(o.size>5*1024*1024){j({title:"File too large",description:"Maximum file size is 5MB",variant:"destructive"}),s.target.value="";return}H(!0),oe.mutate(o),s.target.value=""}};return ne?le?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(O,{className:"h-8 w-8 animate-spin"})}):a?te?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(je,{href:"/",children:e.jsx(E,{variant:"ghost",size:"icon","data-testid":"button-back",children:e.jsx(Ce,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Hospital Information"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Update your hospital details"})]})]}),(a==null?void 0:a.updatedAt)&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(ue,{className:"h-4 w-4"}),"Last updated: ",Ne(a.updatedAt)]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 max-w-3xl",children:e.jsx(G,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(s=>W.mutate(s)),className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Basic Information"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{control:n.control,name:"nameEn",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Hospital Name (English) *"}),e.jsx(l,{children:e.jsx(u,{...s,"data-testid":"input-name-en"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"nameZh",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Hospital Name (Chinese) *"}),e.jsx(l,{children:e.jsx(u,{...s,"data-testid":"input-name-zh"})}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{control:n.control,name:"addressEn",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Address (English) *"}),e.jsx(l,{children:e.jsx(P,{...s,rows:2,"data-testid":"input-address-en"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"addressZh",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Address (Chinese) *"}),e.jsx(l,{children:e.jsx(P,{...s,rows:2,"data-testid":"input-address-zh"})}),e.jsx(x,{})]})})]}),e.jsx(t,{control:n.control,name:"regionId",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Region *"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-region",children:e.jsx(C,{})})}),e.jsx(k,{children:B==null?void 0:B.map(o=>e.jsx(h,{value:o.id,children:o.nameEn},o.id))})]}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"websiteUrl",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Website URL"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"",placeholder:"https://www.example.com","data-testid":"input-website"})}),e.jsx(x,{})]})})]})]}),e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Contact Information"]})}),e.jsx(f,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{control:n.control,name:"phone",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Phone"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"","data-testid":"input-phone"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"whatsapp",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"WhatsApp"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"","data-testid":"input-whatsapp"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Email"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"",type:"email","data-testid":"input-email"})}),e.jsx(x,{})]})})]})})]}),e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Facilities"]}),e.jsx(L,{children:"What facilities does your hospital offer?"})]}),e.jsx(f,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{control:n.control,name:"parking",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Parking Available"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-parking"})})]})}),e.jsx(t,{control:n.control,name:"wheelchairAccess",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Wheelchair Accessible"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-wheelchair"})})]})}),e.jsx(t,{control:n.control,name:"isolationWard",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Isolation Ward"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-isolation"})})]})}),e.jsx(t,{control:n.control,name:"ambulanceSupport",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Ambulance Support"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-ambulance"})})]})}),e.jsx(t,{control:n.control,name:"eolSupport",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"End-of-Life Support"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-eol"})})]})}),e.jsx(t,{control:n.control,name:"whatsappTriage",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"WhatsApp Triage"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-whatsapp-triage"})})]})})]})})]}),e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Medical Services"]}),e.jsx(L,{children:"What medical services and equipment do you have?"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsx(t,{control:n.control,name:"icuLevel",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"ICU Level"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-icu",children:e.jsx(C,{placeholder:"Select ICU level"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"none",children:"None"}),e.jsx(h,{value:"basic",children:"Basic"}),e.jsx(h,{value:"advanced",children:"Advanced"}),e.jsx(h,{value:"full",children:"Full ICU"})]})]}),e.jsx(x,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{control:n.control,name:"imagingXray",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"X-Ray"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-xray"})})]})}),e.jsx(t,{control:n.control,name:"imagingUS",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Ultrasound"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-ultrasound"})})]})}),e.jsx(t,{control:n.control,name:"imagingCT",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"CT Scan"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-ct"})})]})}),e.jsx(t,{control:n.control,name:"sameDayCT",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Same-Day CT"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-sameday-ct"})})]})}),e.jsx(t,{control:n.control,name:"inHouseLab",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"In-House Laboratory"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-lab"})})]})}),e.jsx(t,{control:n.control,name:"sxEmergencySoft",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Emergency Soft Tissue Surgery"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-soft-surgery"})})]})}),e.jsx(t,{control:n.control,name:"sxEmergencyOrtho",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Emergency Orthopedic Surgery"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-ortho-surgery"})})]})}),e.jsx(t,{control:n.control,name:"oxygenTherapy",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Oxygen Therapy / Tanks"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-oxygen"})})]})}),e.jsx(t,{control:n.control,name:"ventilator",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Ventilator / Respirator"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-ventilator"})})]})}),e.jsx(t,{control:n.control,name:"bloodTransfusion",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Blood Bank (transfusion support)"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-blood-transfusion"})})]})}),e.jsx(t,{control:n.control,name:"imagingMRI",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"MRI Imaging"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-mri"})})]})}),e.jsx(t,{control:n.control,name:"endoscopy",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Endoscopy"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-endoscopy"})})]})}),e.jsx(t,{control:n.control,name:"dialysis",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Dialysis / Renal Support"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-dialysis"})})]})}),e.jsx(t,{control:n.control,name:"defibrillator",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Defibrillator / AED"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-defibrillator"})})]})})]}),e.jsx(t,{control:n.control,name:"extLabCutoff",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"External Lab Cutoff Time"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"",placeholder:"e.g., 6:00 PM","data-testid":"input-lab-cutoff"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"bloodBankAccess",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Blood Bank Access"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-blood-bank",children:e.jsx(C,{placeholder:"Select blood bank access"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"none",children:"None"}),e.jsx(h,{value:"limited",children:"Limited"}),e.jsx(h,{value:"full",children:"Full Access"})]})]}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"anaesMonitoring",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Anesthesia Monitoring"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-anesthesia",children:e.jsx(C,{placeholder:"Select monitoring level"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"basic",children:"Basic"}),e.jsx(h,{value:"advanced",children:"Advanced"}),e.jsx(h,{value:"full",children:"Full Monitoring"})]})]}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"specialistAvail",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Specialist Availability"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-specialist",children:e.jsx(C,{placeholder:"Select specialist availability"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"none",children:"None"}),e.jsx(h,{value:"on_call",children:"On-Call"}),e.jsx(h,{value:"on_site",children:"On-Site"}),e.jsx(h,{value:"24h",children:"24/7 Available"})]})]}),e.jsx(x,{})]})})]})]}),e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Staffing & Operations"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{control:n.control,name:"open247",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"24-Hour Operation"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!0,onCheckedChange:s.onChange,"data-testid":"switch-24h"})})]})}),e.jsx(t,{control:n.control,name:"onSiteVet247",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"On-Site Vet 24/7"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-vet-247"})})]})}),e.jsx(t,{control:n.control,name:"nurse24h",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"24-Hour Nursing"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-nurse-24h"})})]})})]}),e.jsx(t,{control:n.control,name:"triagePolicy",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Triage Policy"}),e.jsx(l,{children:e.jsx(P,{...s,value:s.value||"",placeholder:"Describe your triage policy...",rows:2,"data-testid":"input-triage"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"typicalWaitBand",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Typical Wait Time"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-wait-time",children:e.jsx(C,{placeholder:"Select typical wait time"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"<15min",children:"<15 minutes"}),e.jsx(h,{value:"15-30min",children:"15-30 minutes"}),e.jsx(h,{value:"30-60min",children:"30-60 minutes"}),e.jsx(h,{value:">60min",children:">60 minutes"})]})]}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"ownerVisitPolicy",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Owner Visiting Policy"}),e.jsx(l,{children:e.jsx(P,{...s,value:s.value||"",placeholder:"Describe your visiting hours and policies...",rows:2,"data-testid":"input-visit-policy"})}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"recheckWindow",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Recheck Window"}),e.jsx(l,{children:e.jsx(u,{...s,value:s.value||"",placeholder:"e.g., Free recheck within 7 days","data-testid":"input-recheck"})}),e.jsx(x,{})]})})]})]}),e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Financial Information"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx(t,{control:n.control,name:"admissionDeposit",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(r,{className:"text-base",children:"Requires Admission Deposit"})}),e.jsx(l,{children:e.jsx(d,{checked:s.value||!1,onCheckedChange:s.onChange,"data-testid":"switch-deposit"})})]})}),e.jsx(t,{control:n.control,name:"depositBand",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Deposit Range"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value||"",children:[e.jsx(l,{children:e.jsx(N,{"data-testid":"select-deposit-range",children:e.jsx(C,{placeholder:"Select deposit range"})})}),e.jsxs(k,{children:[e.jsx(h,{value:"<5k",children:"Less than HKD 5,000"}),e.jsx(h,{value:"5k-10k",children:"HKD 5,000 - 10,000"}),e.jsx(h,{value:"10k-20k",children:"HKD 10,000 - 20,000"}),e.jsx(h,{value:">20k",children:"More than HKD 20,000"})]})]}),e.jsx(x,{})]})}),e.jsx(t,{control:n.control,name:"refundPolicy",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Refund Policy"}),e.jsx(l,{children:e.jsx(P,{...s,value:s.value||"",placeholder:"Describe your refund policy...",rows:2,"data-testid":"input-refund"})}),e.jsx(x,{})]})})]})]}),e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Hospital Photos"]}),e.jsx(L,{children:"Add photos of your hospital to help pet owners"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[K&&e.jsxs(e.Fragment,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>{var s;return(s=$.current)==null?void 0:s.click()},disabled:R,className:"flex-shrink-0","data-testid":"button-upload-photo",children:R?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Upload from Device"]})}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:$,onChange:ce,disabled:R,"data-testid":"input-file-upload"})]}),e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(u,{placeholder:K?"Or enter photo URL":"Enter photo URL",value:I,onChange:s=>z(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),X()),"data-testid":"input-photo-url"}),e.jsxs(E,{type:"button",onClick:X,"data-testid":"button-add-photo",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Add URL"]})]})]}),V&&V.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:V.map((s,o)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Hospital photo ${o+1}`,className:"w-full h-32 object-cover rounded-lg border",onError:p=>{p.target.src="/placeholder-image.png"}}),e.jsx(E,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Q.mutate(s),disabled:Q.isPending,"data-testid":`button-remove-photo-${o}`,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:["Photo ",o+1]})]},o))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No photos added yet"}),e.jsx("p",{className:"text-sm",children:"Upload from your device or add photo URLs"})]})]})]}),e.jsx(E,{type:"submit",disabled:W.isPending,className:"w-full",size:"lg","data-testid":"button-save",children:W.isPending?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):re?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Saved!"]}):"Save Changes"})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"container mx-auto px-4 py-12 max-w-md",children:e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Verify Access"]}),e.jsx(L,{children:"Enter the 6-digit verification code to edit hospital information"})]}),e.jsx(f,{children:e.jsx(G,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(s=>M.mutate(s)),className:"space-y-4",children:[e.jsx(t,{control:S.control,name:"verificationCode",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:"Verification Code"}),e.jsx(l,{children:e.jsx(u,{...s,type:"text",placeholder:"000000",maxLength:6,className:"text-center text-2xl tracking-widest","data-testid":"input-verification-code"})}),e.jsx(x,{})]})}),e.jsx(E,{type:"submit",className:"w-full",disabled:M.isPending,"data-testid":"button-verify",children:M.isPending?"Verifying...":"Verify"})]})})})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsx(g,{children:e.jsxs(f,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Hospital not found"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check the hospital link and try again."})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Hospital not found"})})}export{Ze as default};
