var da=Object.defineProperty;var ca=(t,e,n)=>e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e,n)=>ca(t,typeof e!="symbol"?e+"":e,n);import{bb as pa,bc as ma,bd as ga,be as fa,bf as ha,bg as ya,bh as _a,bi as te,bj as ba,bk as Na,bl as wa,bm as Sa,bn as Ta,bo as Ia,bp as Pa,bq as xa,br as va,bs as ge,bt as Aa,Z as Da,bu as Ca,bv as Ba,bw as Va,bx as Fa,by as za,bz as qa,bA as Ma,bB as La,bC as Ea,bD as Qa,bE as Ua,bF as Oa,bG as $a,bH as ja,bI as Za,bJ as Ka,bK as Ra,bL as Xa,bM as Ga,bN as Ja,bO as Ha,bP as Wa,bQ as Ya,bR as ka,bS as eo,bT as to,bU as no,bV as io,bW as ro,aV as G,bX as dr,bY as so,aU as L,aq as ao,bZ as cr,b_ as oo,b$ as uo,c0 as lo,c1 as co,c2 as fe,an as po,c3 as mo,c4 as go,c5 as fo,c6 as ho,c7 as yo,c8 as _o,c9 as bo,ca as No,cb as wo,cc as So,cd as To,am as Io,ce as Po,cf as xo,cg as vo,ch as Ao,ci as Do,cj as pr,ck as Co,n as oe,o as ue,cl as Bo,cm as Vo,cn as Fo,co as zo,cp as qo,cq as Mo,cr as Lo,cs as Eo,ct as Qo,cu as mr,cv as Uo,cw as Oo,cx as $o,s as gr,cy as jo,cz as Zo,cA as Ko,cB as le,cC as Ro,cD as Xo,cE as Go}from"./index-B6B5-wqG.js";const Jo=Object.freeze(Object.defineProperty({__proto__:null,BRAND:pa,DIRTY:ma,EMPTY_PATH:ga,INVALID:fa,NEVER:ha,OK:ya,ParseStatus:_a,Schema:te,ZodAny:ba,ZodArray:Na,ZodBigInt:wa,ZodBoolean:Sa,ZodBranded:Ta,ZodCatch:Ia,ZodDate:Pa,ZodDefault:xa,ZodDiscriminatedUnion:va,ZodEffects:ge,ZodEnum:Aa,ZodError:Da,get ZodFirstPartyTypeKind(){return Ca},ZodFunction:Ba,ZodIntersection:Va,ZodIssueCode:Fa,ZodLazy:za,ZodLiteral:qa,ZodMap:Ma,ZodNaN:La,ZodNativeEnum:Ea,ZodNever:Qa,ZodNull:Ua,ZodNullable:Oa,ZodNumber:$a,ZodObject:ja,ZodOptional:Za,ZodParsedType:Ka,ZodPipeline:Ra,ZodPromise:Xa,ZodReadonly:Ga,ZodRecord:Ja,ZodSchema:te,ZodSet:Ha,ZodString:Wa,ZodSymbol:Ya,ZodTransformer:ge,ZodTuple:ka,ZodType:te,ZodUndefined:eo,ZodUnion:to,ZodUnknown:no,ZodVoid:io,addIssueToContext:ro,any:G,array:dr,bigint:so,boolean:L,coerce:ao,custom:cr,date:oo,datetimeRegex:uo,defaultErrorMap:lo,discriminatedUnion:co,effect:fe,enum:po,function:mo,getErrorMap:go,getParsedType:fo,instanceof:ho,intersection:yo,isAborted:_o,isAsync:bo,isDirty:No,isValid:wo,late:So,lazy:To,literal:Io,makeIssue:Po,map:xo,nan:vo,nativeEnum:Ao,never:Do,null:pr,nullable:Co,number:oe,object:ue,get objectUtil(){return Bo},oboolean:Vo,onumber:Fo,optional:zo,ostring:qo,pipeline:Mo,preprocess:Lo,promise:Eo,quotelessJson:Qo,record:mr,set:Uo,setErrorMap:Oo,strictObject:$o,string:gr,symbol:jo,transformer:fe,tuple:Zo,undefined:Ko,union:le,unknown:Ro,get util(){return Xo},void:Go},Symbol.toStringTag,{value:"Module"})),a=Symbol.for("drizzle:entityKind");function v(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(a in n&&n[a]===e[a])return!0;n=Object.getPrototypeOf(n)}return!1}var Te;Te=a;class O{constructor(e,n){r(this,"name");r(this,"keyAsName");r(this,"primary");r(this,"notNull");r(this,"default");r(this,"defaultFn");r(this,"onUpdateFn");r(this,"hasDefault");r(this,"isUnique");r(this,"uniqueName");r(this,"uniqueType");r(this,"dataType");r(this,"columnType");r(this,"enumValues");r(this,"generated");r(this,"generatedIdentity");r(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}r(O,Te,"Column");var Ie;Ie=a;class fr{constructor(e,n,i){r(this,"config");r(this,"$default",this.$defaultFn);r(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}r(fr,Ie,"ColumnBuilder");const Q=Symbol.for("drizzle:Name");var Pe;Pe=a;class hr{constructor(e,n){r(this,"reference");r(this,"_onUpdate","no action");r(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:o,foreignColumns:u}=e();return{name:i,columns:o,foreignTable:u[0].table,foreignColumns:u}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new yr(e,this)}}r(hr,Pe,"PgForeignKeyBuilder");var xe;xe=a;class yr{constructor(e,n){r(this,"reference");r(this,"onUpdate");r(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:i}=this.reference(),o=n.map(y=>y.name),u=i.map(y=>y.name),c=[this.table[Q],...o,i[0].table[Q],...u];return e??`${c.join("_")}_fk`}}r(yr,xe,"PgForeignKey");function Ho(t,...e){return t(...e)}function Wo(t,e){return`${t[Q]}_${e.join("_")}_unique`}function he(t,e,n){for(let i=e;i<t.length;i++){const o=t[i];if(o==="\\"){i++;continue}if(o==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!n&&(o===","||o==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function _r(t,e=0){const n=[];let i=e,o=!1;for(;i<t.length;){const u=t[i];if(u===","){(o||i===e)&&n.push(""),o=!0,i++;continue}if(o=!1,u==="\\"){i+=2;continue}if(u==='"'){const[h,N]=he(t,i+1,!0);n.push(h),i=N;continue}if(u==="}")return[n,i+1];if(u==="{"){const[h,N]=_r(t,i+1);n.push(h),i=N;continue}const[c,y]=he(t,i,!1);n.push(c),i=y}return[n,i]}function Yo(t){const[e]=_r(t,1);return e}function br(t){return`{${t.map(e=>Array.isArray(e)?br(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var ve,Ae;class f extends(Ae=fr,ve=a,Ae){constructor(){super(...arguments);r(this,"foreignKeyConfigs",[])}array(n){return new wr(this.config.name,this,n)}references(n,i={}){return this.foreignKeyConfigs.push({ref:n,actions:i}),this}unique(n,i){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,i){return this.foreignKeyConfigs.map(({ref:o,actions:u})=>Ho((c,y)=>{const h=new hr(()=>{const N=c();return{columns:[n],foreignColumns:[N]}});return y.onUpdate&&h.onUpdate(y.onUpdate),y.onDelete&&h.onDelete(y.onDelete),h.build(i)},o,u))}buildExtraConfigColumn(n){return new Nr(n,this.config)}}r(f,ve,"PgColumnBuilder");var De,Ce;class g extends(Ce=O,De=a,Ce){constructor(e,n){n.uniqueName||(n.uniqueName=Wo(e,[n.name])),super(e,n),this.table=e}}r(g,De,"PgColumn");var Be,Ve;class Nr extends(Ve=g,Be=a,Ve){constructor(){super(...arguments);r(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});r(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}r(Nr,Be,"ExtraConfigColumn");var Fe;Fe=a;class R{constructor(e,n,i,o){r(this,"name");r(this,"keyAsName");r(this,"type");r(this,"indexConfig");this.name=e,this.keyAsName=n,this.type=i,this.indexConfig=o}}r(R,Fe,"IndexedColumn");var ze,qe;class wr extends(qe=f,ze=a,qe){constructor(e,n,i){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=i}build(e){const n=this.config.baseBuilder.build(e);return new se(e,this.config,n)}}r(wr,ze,"PgArrayBuilder");var Me,Le;const Y=class Y extends(Le=g,Me=a,Le){constructor(n,i,o,u){super(n,i);r(this,"size");this.baseColumn=o,this.range=u,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=Yo(n)),n.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(n,i=!1){const o=n.map(u=>u===null?null:v(this.baseColumn,Y)?this.baseColumn.mapToDriverValue(u,!0):this.baseColumn.mapToDriverValue(u));return i?o:br(o)}};r(Y,Me,"PgArray");let se=Y;const ye=Symbol.for("drizzle:isPgEnum");function ko(t){return!!t&&typeof t=="function"&&ye in t&&t[ye]===!0}var Ee;Ee=a;class de{constructor(e,n,i,o=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:i,isWith:o}}}r(de,Ee,"Subquery");const eu={startActiveSpan(t,e){return e()}},U=Symbol.for("drizzle:ViewBaseConfig"),ne=Symbol.for("drizzle:Schema"),_e=Symbol.for("drizzle:Columns"),be=Symbol.for("drizzle:ExtraConfigColumns"),ie=Symbol.for("drizzle:OriginalName"),re=Symbol.for("drizzle:BaseName"),J=Symbol.for("drizzle:IsAlias"),Ne=Symbol.for("drizzle:ExtraConfigBuilder"),Sr=Symbol.for("drizzle:IsDrizzleTable");var Qe,Ue,Oe,$e,je,Ze,Ke,Re,Xe,Ge;Ge=a,Xe=Q,Re=ie,Ke=ne,Ze=_e,je=be,$e=re,Oe=J,Ue=Sr,Qe=Ne;class C{constructor(e,n,i){r(this,Xe);r(this,Re);r(this,Ke);r(this,Ze);r(this,je);r(this,$e);r(this,Oe,!1);r(this,Ue,!0);r(this,Qe);this[Q]=this[ie]=e,this[ne]=n,this[re]=i}}r(C,Ge,"Table"),r(C,"Symbol",{Name:Q,Schema:ne,OriginalName:ie,Columns:_e,ExtraConfigColumns:be,BaseName:re,IsAlias:J,ExtraConfigBuilder:Ne});function Tr(t){return typeof t=="object"&&t!==null&&Sr in t}function tu(t){return t!=null&&typeof t.getSQL=="function"}function nu(t){var n;const e={sql:"",params:[]};for(const i of t)e.sql+=i.sql,e.params.push(...i.params),(n=i.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...i.typings));return e}var Je;Je=a;class V{constructor(e){r(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}}r(V,Je,"StringChunk");var He;He=a;const E=class E{constructor(e){r(this,"decoder",Ir);r(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return eu.startActiveSpan("drizzle.buildSQL",n=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,n){const i=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:o,escapeName:u,escapeParam:c,prepareTyping:y,inlineParams:h,paramStartIndex:N}=i;return nu(e.map(l=>{var F;if(v(l,V))return{sql:l.value.join(""),params:[]};if(v(l,H))return{sql:u(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){const _=[new V("(")];for(const[A,la]of l.entries())_.push(la),A<l.length-1&&_.push(new V(", "));return _.push(new V(")")),this.buildQueryFromSourceParams(_,i)}if(v(l,E))return this.buildQueryFromSourceParams(l.queryChunks,{...i,inlineParams:h||l.shouldInlineParams});if(v(l,C)){const _=l[C.Symbol.Schema],A=l[C.Symbol.Name];return{sql:_===void 0||l[J]?u(A):u(_)+"."+u(A),params:[]}}if(v(l,O)){const _=o.getColumnCasing(l);if(n.invokeSource==="indexes")return{sql:u(_),params:[]};const A=l.table[C.Symbol.Schema];return{sql:l.table[J]||A===void 0?u(l.table[C.Symbol.Name])+"."+u(_):u(A)+"."+u(l.table[C.Symbol.Name])+"."+u(_),params:[]}}if(v(l,vr)){const _=l[U].schema,A=l[U].name;return{sql:_===void 0||l[U].isAlias?u(A):u(_)+"."+u(A),params:[]}}if(v(l,ce)){if(v(l.value,W))return{sql:c(N.value++,l),params:[l],typings:["none"]};const _=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(v(_,E))return this.buildQueryFromSourceParams([_],i);if(h)return{sql:this.mapInlineParam(_,i),params:[]};let A=["none"];return y&&(A=[y(l.encoder)]),{sql:c(N.value++,_),params:[_],typings:A}}return v(l,W)?{sql:c(N.value++,l),params:[l],typings:["none"]}:v(l,E.Aliased)&&l.fieldAlias!==void 0?{sql:u(l.fieldAlias),params:[]}:v(l,de)?l._.isWith?{sql:u(l._.alias),params:[]}:this.buildQueryFromSourceParams([new V("("),l._.sql,new V(") "),new H(l._.alias)],i):ko(l)?l.schema?{sql:u(l.schema)+"."+u(l.enumName),params:[]}:{sql:u(l.enumName),params:[]}:tu(l)?(F=l.shouldOmitSQLParens)!=null&&F.call(l)?this.buildQueryFromSourceParams([l.getSQL()],i):this.buildQueryFromSourceParams([new V("("),l.getSQL(),new V(")")],i):h?{sql:this.mapInlineParam(l,i),params:[]}:{sql:c(N.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const i=e.toString();return n(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new E.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};r(E,He,"SQL");let I=E;var We;We=a;class H{constructor(e){r(this,"brand");this.value=e}getSQL(){return new I([this])}}r(H,We,"Name");const Ir={mapFromDriverValue:t=>t},Pr={mapToDriverValue:t=>t};({...Ir,...Pr});var Ye;Ye=a;class ce{constructor(e,n=Pr){r(this,"brand");this.value=e,this.encoder=n}getSQL(){return new I([this])}}r(ce,Ye,"Param");function b(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new V(t[0]));for(const[i,o]of e.entries())n.push(o,new V(t[i+1]));return new I(n)}(t=>{function e(){return new I([])}t.empty=e;function n(h){return new I(h)}t.fromList=n;function i(h){return new I([new V(h)])}t.raw=i;function o(h,N){const l=[];for(const[F,_]of h.entries())F>0&&N!==void 0&&l.push(N),l.push(_);return new I(l)}t.join=o;function u(h){return new H(h)}t.identifier=u;function c(h){return new W(h)}t.placeholder=c;function y(h,N){return new ce(h,N)}t.param=y})(b||(b={}));(t=>{var n;n=a;const i=class i{constructor(u,c){r(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=c}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};r(i,n,"SQL.Aliased");let e=i;t.Aliased=e})(I||(I={}));var ke;ke=a;class W{constructor(e){this.name=e}getSQL(){return new I([this])}}r(W,ke,"Placeholder");const xr=Symbol.for("drizzle:IsDrizzleView");var et,tt,nt;nt=a,tt=U,et=xr;class vr{constructor({name:e,schema:n,selectedFields:i,query:o}){r(this,tt);r(this,et,!0);this[U]={name:e,originalName:e,schema:n,selectedFields:i,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new I([this])}}r(vr,nt,"View");function iu(t){return typeof t=="object"&&t!==null&&xr in t}O.prototype.getSQL=function(){return new I([this])};C.prototype.getSQL=function(){return new I([this])};de.prototype.getSQL=function(){return new I([this])};function ru(t){return t[C.Symbol.Columns]}function su(t){return t[U].selectedFields}function D(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var it,rt;class K extends(rt=f,it=a,rt){generatedAlwaysAsIdentity(e){if(e){const{name:n,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}r(K,it,"PgIntColumnBaseBuilder");var st,at;class Ar extends(at=K,st=a,at){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Dr(e,this.config)}}r(Ar,st,"PgBigInt53Builder");var ot,ut;class Dr extends(ut=g,ot=a,ut){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}r(Dr,ot,"PgBigInt53");var lt,dt;class Cr extends(dt=K,lt=a,dt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Br(e,this.config)}}r(Cr,lt,"PgBigInt64Builder");var ct,pt;class Br extends(pt=g,ct=a,pt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}r(Br,ct,"PgBigInt64");function au(t,e){const{name:n,config:i}=D(t,e);return i.mode==="number"?new Ar(n):new Cr(n)}var mt,gt;class Vr extends(gt=f,mt=a,gt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Fr(e,this.config)}}r(Vr,mt,"PgBigSerial53Builder");var ft,ht;class Fr extends(ht=g,ft=a,ht){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}r(Fr,ft,"PgBigSerial53");var yt,_t;class zr extends(_t=f,yt=a,_t){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new qr(e,this.config)}}r(zr,yt,"PgBigSerial64Builder");var bt,Nt;class qr extends(Nt=g,bt=a,Nt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}r(qr,bt,"PgBigSerial64");function ou(t,e){const{name:n,config:i}=D(t,e);return i.mode==="number"?new Vr(n):new zr(n)}var wt,St;class Mr extends(St=f,wt=a,St){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Lr(e,this.config)}}r(Mr,wt,"PgBooleanBuilder");var Tt,It;class Lr extends(It=g,Tt=a,It){getSQLType(){return"boolean"}}r(Lr,Tt,"PgBoolean");function p(t){return new Mr(t??"")}var Pt,xt;class Er extends(xt=f,Pt=a,xt){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Qr(e,this.config)}}r(Er,Pt,"PgCharBuilder");var vt,At;class Qr extends(At=g,vt=a,At){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}r(Qr,vt,"PgChar");function uu(t,e={}){const{name:n,config:i}=D(t,e);return new Er(n,i)}var Dt,Ct;class Ur extends(Ct=f,Dt=a,Ct){constructor(e){super(e,"string","PgCidr")}build(e){return new Or(e,this.config)}}r(Ur,Dt,"PgCidrBuilder");var Bt,Vt;class Or extends(Vt=g,Bt=a,Vt){getSQLType(){return"cidr"}}r(Or,Bt,"PgCidr");function lu(t){return new Ur(t??"")}var Ft,zt;class $r extends(zt=f,Ft=a,zt){constructor(e,n,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=i}build(e){return new jr(e,this.config)}}r($r,Ft,"PgCustomColumnBuilder");var qt,Mt;class jr extends(Mt=g,qt=a,Mt){constructor(n,i){super(n,i);r(this,"sqlName");r(this,"mapTo");r(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}r(jr,qt,"PgCustomColumn");function Zr(t){return(e,n)=>{const{name:i,config:o}=D(e,n);return new $r(i,o,t)}}var Lt,Et;class $ extends(Et=f,Lt=a,Et){defaultNow(){return this.default(b`now()`)}}r($,Lt,"PgDateColumnBaseBuilder");var Qt,Ut;class Kr extends(Ut=$,Qt=a,Ut){constructor(e){super(e,"date","PgDate")}build(e){return new Rr(e,this.config)}}r(Kr,Qt,"PgDateBuilder");var Ot,$t;class Rr extends($t=g,Ot=a,$t){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}r(Rr,Ot,"PgDate");var jt,Zt;class Xr extends(Zt=$,jt=a,Zt){constructor(e){super(e,"string","PgDateString")}build(e){return new Gr(e,this.config)}}r(Xr,jt,"PgDateStringBuilder");var Kt,Rt;class Gr extends(Rt=g,Kt=a,Rt){getSQLType(){return"date"}}r(Gr,Kt,"PgDateString");function du(t,e){const{name:n,config:i}=D(t,e);return(i==null?void 0:i.mode)==="date"?new Kr(n):new Xr(n)}var Xt,Gt;class Jr extends(Gt=f,Xt=a,Gt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Hr(e,this.config)}}r(Jr,Xt,"PgDoublePrecisionBuilder");var Jt,Ht;class Hr extends(Ht=g,Jt=a,Ht){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}r(Hr,Jt,"PgDoublePrecision");function cu(t){return new Jr(t??"")}var Wt,Yt;class Wr extends(Yt=f,Wt=a,Yt){constructor(e){super(e,"string","PgInet")}build(e){return new Yr(e,this.config)}}r(Wr,Wt,"PgInetBuilder");var kt,en;class Yr extends(en=g,kt=a,en){getSQLType(){return"inet"}}r(Yr,kt,"PgInet");function pu(t){return new Wr(t??"")}var tn,nn;class kr extends(nn=K,tn=a,nn){constructor(e){super(e,"number","PgInteger")}build(e){return new es(e,this.config)}}r(kr,tn,"PgIntegerBuilder");var rn,sn;class es extends(sn=g,rn=a,sn){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}r(es,rn,"PgInteger");function q(t){return new kr(t??"")}var an,on;class ts extends(on=f,an=a,on){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new ns(e,this.config)}}r(ts,an,"PgIntervalBuilder");var un,ln;class ns extends(ln=g,un=a,ln){constructor(){super(...arguments);r(this,"fields",this.config.intervalConfig.fields);r(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${n}${i}`}}r(ns,un,"PgInterval");function mu(t,e={}){const{name:n,config:i}=D(t,e);return new ts(n,i)}var dn,cn;class is extends(cn=f,dn=a,cn){constructor(e){super(e,"json","PgJson")}build(e){return new rs(e,this.config)}}r(is,dn,"PgJsonBuilder");var pn,mn;class rs extends(mn=g,pn=a,mn){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}r(rs,pn,"PgJson");function gu(t){return new is(t??"")}var gn,fn;class ss extends(fn=f,gn=a,fn){constructor(e){super(e,"json","PgJsonb")}build(e){return new as(e,this.config)}}r(ss,gn,"PgJsonbBuilder");var hn,yn;class as extends(yn=g,hn=a,yn){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}r(as,hn,"PgJsonb");function M(t){return new ss(t??"")}var _n,bn;class os extends(bn=f,_n=a,bn){constructor(e){super(e,"array","PgLine")}build(e){return new us(e,this.config)}}r(os,_n,"PgLineBuilder");var Nn,wn;class us extends(wn=g,Nn=a,wn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,i,o]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}r(us,Nn,"PgLine");var Sn,Tn;class ls extends(Tn=f,Sn=a,Tn){constructor(e){super(e,"json","PgLineABC")}build(e){return new ds(e,this.config)}}r(ls,Sn,"PgLineABCBuilder");var In,Pn;class ds extends(Pn=g,In=a,Pn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,i,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(i),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}r(ds,In,"PgLineABC");function fu(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new os(n):new ls(n)}var xn,vn;class cs extends(vn=f,xn=a,vn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ps(e,this.config)}}r(cs,xn,"PgMacaddrBuilder");var An,Dn;class ps extends(Dn=g,An=a,Dn){getSQLType(){return"macaddr"}}r(ps,An,"PgMacaddr");function hu(t){return new cs(t??"")}var Cn,Bn;class ms extends(Bn=f,Cn=a,Bn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new gs(e,this.config)}}r(ms,Cn,"PgMacaddr8Builder");var Vn,Fn;class gs extends(Fn=g,Vn=a,Fn){getSQLType(){return"macaddr8"}}r(gs,Vn,"PgMacaddr8");function yu(t){return new ms(t??"")}var zn,qn;class fs extends(qn=f,zn=a,qn){constructor(e,n,i){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=i}build(e){return new hs(e,this.config)}}r(fs,zn,"PgNumericBuilder");var Mn,Ln;class hs extends(Ln=g,Mn=a,Ln){constructor(n,i){super(n,i);r(this,"precision");r(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}r(hs,Mn,"PgNumeric");function ys(t,e){const{name:n,config:i}=D(t,e);return new fs(n,i==null?void 0:i.precision,i==null?void 0:i.scale)}const z=ys;var En,Qn;class _s extends(Qn=f,En=a,Qn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new bs(e,this.config)}}r(_s,En,"PgPointTupleBuilder");var Un,On;class bs extends(On=g,Un=a,On){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}r(bs,Un,"PgPointTuple");var $n,jn;class Ns extends(jn=f,$n=a,jn){constructor(e){super(e,"json","PgPointObject")}build(e){return new ws(e,this.config)}}r(Ns,$n,"PgPointObjectBuilder");var Zn,Kn;class ws extends(Kn=g,Zn=a,Kn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}r(ws,Zn,"PgPointObject");function _u(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new _s(n):new Ns(n)}function bu(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function we(t,e){const n=new ArrayBuffer(8),i=new DataView(n);for(let o=0;o<8;o++)i.setUint8(o,t[e+o]);return i.getFloat64(0,!0)}function Ss(t){const e=bu(t);let n=0;const i=e[n];n+=1;const o=new DataView(e.buffer),u=o.getUint32(n,i===1);if(n+=4,u&536870912&&(o.getUint32(n,i===1),n+=4),(u&65535)===1){const c=we(e,n);n+=8;const y=we(e,n);return n+=8,[c,y]}throw new Error("Unsupported geometry type")}var Rn,Xn;class Ts extends(Xn=f,Rn=a,Xn){constructor(e){super(e,"array","PgGeometry")}build(e){return new Is(e,this.config)}}r(Ts,Rn,"PgGeometryBuilder");var Gn,Jn;class Is extends(Jn=g,Gn=a,Jn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Ss(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}r(Is,Gn,"PgGeometry");var Hn,Wn;class Ps extends(Wn=f,Hn=a,Wn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new xs(e,this.config)}}r(Ps,Hn,"PgGeometryObjectBuilder");var Yn,kn;class xs extends(kn=g,Yn=a,kn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=Ss(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}r(xs,Yn,"PgGeometryObject");function Nu(t,e){const{name:n,config:i}=D(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new Ts(n):new Ps(n)}var ei,ti;class vs extends(ti=f,ei=a,ti){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new As(e,this.config)}}r(vs,ei,"PgRealBuilder");var ni,ii;class As extends(ii=g,ni=a,ii){constructor(n,i){super(n,i);r(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}r(As,ni,"PgReal");function wu(t){return new vs(t??"")}var ri,si;class Ds extends(si=f,ri=a,si){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Cs(e,this.config)}}r(Ds,ri,"PgSerialBuilder");var ai,oi;class Cs extends(oi=g,ai=a,oi){getSQLType(){return"serial"}}r(Cs,ai,"PgSerial");function Su(t){return new Ds(t??"")}var ui,li;class Bs extends(li=K,ui=a,li){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Vs(e,this.config)}}r(Bs,ui,"PgSmallIntBuilder");var di,ci;class Vs extends(ci=g,di=a,ci){constructor(){super(...arguments);r(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}r(Vs,di,"PgSmallInt");function Tu(t){return new Bs(t??"")}var pi,mi;class Fs extends(mi=f,pi=a,mi){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new zs(e,this.config)}}r(Fs,pi,"PgSmallSerialBuilder");var gi,fi;class zs extends(fi=g,gi=a,fi){getSQLType(){return"smallserial"}}r(zs,gi,"PgSmallSerial");function Iu(t){return new Fs(t??"")}var hi,yi;class qs extends(yi=f,hi=a,yi){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new Ms(e,this.config)}}r(qs,hi,"PgTextBuilder");var _i,bi;class Ms extends(bi=g,_i=a,bi){constructor(){super(...arguments);r(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}r(Ms,_i,"PgText");function s(t,e={}){const{name:n,config:i}=D(t,e);return new qs(n,i)}var Ni,wi;class Ls extends(wi=$,Ni=a,wi){constructor(e,n,i){super(e,"string","PgTime"),this.withTimezone=n,this.precision=i,this.config.withTimezone=n,this.config.precision=i}build(e){return new Es(e,this.config)}}r(Ls,Ni,"PgTimeBuilder");var Si,Ti;class Es extends(Ti=g,Si=a,Ti){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(Es,Si,"PgTime");function Pu(t,e={}){const{name:n,config:i}=D(t,e);return new Ls(n,i.withTimezone??!1,i.precision)}var Ii,Pi;class Qs extends(Pi=$,Ii=a,Pi){constructor(e,n,i){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=i}build(e){return new Us(e,this.config)}}r(Qs,Ii,"PgTimestampBuilder");var xi,vi;class Us extends(vi=g,xi=a,vi){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");r(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));r(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(Us,xi,"PgTimestamp");var Ai,Di;class Os extends(Di=$,Ai=a,Di){constructor(e,n,i){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=i}build(e){return new $s(e,this.config)}}r(Os,Ai,"PgTimestampStringBuilder");var Ci,Bi;class $s extends(Bi=g,Ci=a,Bi){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r($s,Ci,"PgTimestampString");function m(t,e={}){const{name:n,config:i}=D(t,e);return(i==null?void 0:i.mode)==="string"?new Os(n,i.withTimezone??!1,i.precision):new Qs(n,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var Vi,Fi;class js extends(Fi=f,Vi=a,Fi){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(b`gen_random_uuid()`)}build(e){return new Zs(e,this.config)}}r(js,Vi,"PgUUIDBuilder");var zi,qi;class Zs extends(qi=g,zi=a,qi){getSQLType(){return"uuid"}}r(Zs,zi,"PgUUID");function xu(t){return new js(t??"")}var Mi,Li;class Ks extends(Li=f,Mi=a,Li){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Rs(e,this.config)}}r(Ks,Mi,"PgVarcharBuilder");var Ei,Qi;class Rs extends(Qi=g,Ei=a,Qi){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}r(Rs,Ei,"PgVarchar");function d(t,e={}){const{name:n,config:i}=D(t,e);return new Ks(n,i)}var Ui,Oi;class Xs extends(Oi=f,Ui=a,Oi){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Gs(e,this.config)}}r(Xs,Ui,"PgBinaryVectorBuilder");var $i,ji;class Gs extends(ji=g,$i=a,ji){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}r(Gs,$i,"PgBinaryVector");function vu(t,e){const{name:n,config:i}=D(t,e);return new Xs(n,i)}var Zi,Ki;class Js extends(Ki=f,Zi=a,Ki){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Hs(e,this.config)}}r(Js,Zi,"PgHalfVectorBuilder");var Ri,Xi;class Hs extends(Xi=g,Ri=a,Xi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(Hs,Ri,"PgHalfVector");function Au(t,e){const{name:n,config:i}=D(t,e);return new Js(n,i)}var Gi,Ji;class Ws extends(Ji=f,Gi=a,Ji){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new Ys(e,this.config)}}r(Ws,Gi,"PgSparseVectorBuilder");var Hi,Wi;class Ys extends(Wi=g,Hi=a,Wi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}r(Ys,Hi,"PgSparseVector");function Du(t,e){const{name:n,config:i}=D(t,e);return new Ws(n,i)}var Yi,ki;class ks extends(ki=f,Yi=a,ki){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new ea(e,this.config)}}r(ks,Yi,"PgVectorBuilder");var er,tr;class ea extends(tr=g,er=a,tr){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(ea,er,"PgVector");function Cu(t,e){const{name:n,config:i}=D(t,e);return new ks(n,i)}function Bu(){return{bigint:au,bigserial:ou,boolean:p,char:uu,cidr:lu,customType:Zr,date:du,doublePrecision:cu,inet:pu,integer:q,interval:mu,json:gu,jsonb:M,line:fu,macaddr:hu,macaddr8:yu,numeric:ys,point:_u,geometry:Nu,real:wu,serial:Su,smallint:Tu,smallserial:Iu,text:s,time:Pu,timestamp:m,uuid:xu,varchar:d,bit:vu,halfvec:Au,sparsevec:Du,vector:Cu}}const ae=Symbol.for("drizzle:PgInlineForeignKeys"),Se=Symbol.for("drizzle:EnableRLS");var nr,ir,rr,sr,ar;class Z extends(ar=C,sr=a,rr=ae,ir=Se,nr=C.Symbol.ExtraConfigBuilder,ar){constructor(){super(...arguments);r(this,rr,[]);r(this,ir,!1);r(this,nr)}}r(Z,sr,"PgTable"),r(Z,"Symbol",Object.assign({},C.Symbol,{InlineForeignKeys:ae,EnableRLS:Se}));function Vu(t,e,n,i,o=t){const u=new Z(t,i,o),c=typeof e=="function"?e(Bu()):e,y=Object.fromEntries(Object.entries(c).map(([l,F])=>{const _=F;_.setName(l);const A=_.build(u);return u[ae].push(..._.buildForeignKeys(A,u)),[l,A]})),h=Object.fromEntries(Object.entries(c).map(([l,F])=>{const _=F;_.setName(l);const A=_.buildExtraConfigColumn(u);return[l,A]})),N=Object.assign(u,y);return N[C.Symbol.Columns]=y,N[C.Symbol.ExtraConfigColumns]=h,n&&(N[Z.Symbol.ExtraConfigBuilder]=n),Object.assign(N,{enableRLS:()=>(N[Z.Symbol.EnableRLS]=!0,N)})}const T=(t,e,n)=>Vu(t,e,n,void 0);var or;or=a;class pe{constructor(e,n){this.unique=e,this.name=n}on(...e){return new X(e.map(n=>{if(v(n,I))return n;n=n;const i=new R(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new X(e.map(n=>{if(v(n,I))return n;n=n;const i=new R(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,i}),this.unique,!0,this.name)}using(e,...n){return new X(n.map(i=>{if(v(i,I))return i;i=i;const o=new R(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),o}),this.unique,!0,this.name,e)}}r(pe,or,"PgIndexBuilderOn");var ur;ur=a;class X{constructor(e,n,i,o,u="btree"){r(this,"config");this.config={name:o,columns:e,unique:n,only:i,method:u}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ta(this.config,e)}}r(X,ur,"PgIndexBuilder");var lr;lr=a;class ta{constructor(e,n){r(this,"config");this.config={...e,table:n}}}r(ta,lr,"PgIndex");function w(t){return new pe(!1,t)}function Fu(t){return new pe(!0,t)}const S={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function x(t,e){return e.includes(t.columnType)}function zu(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const qu=le([gr(),oe(),L(),pr()]),Mu=le([qu,mr(G()),dr(G())]),Lu=cr(t=>t instanceof Buffer);function na(t,e){const n=(e==null?void 0:e.zodInstance)??Jo,i=(e==null?void 0:e.coerce)??{};let o;return zu(t)&&(o=t.enumValues.length?n.enum(t.enumValues):n.string()),o||(x(t,["PgGeometry","PgPointTuple"])?o=n.tuple([n.number(),n.number()]):x(t,["PgGeometryObject","PgPointObject"])?o=n.object({x:n.number(),y:n.number()}):x(t,["PgHalfVector","PgVector"])?(o=n.array(n.number()),o=t.dimensions?o.length(t.dimensions):o):x(t,["PgLine"])?o=n.tuple([n.number(),n.number(),n.number()]):x(t,["PgLineABC"])?o=n.object({a:n.number(),b:n.number(),c:n.number()}):x(t,["PgArray"])?(o=n.array(na(t.baseColumn,n)),o=t.size?o.length(t.size):o):t.dataType==="array"?o=n.array(n.any()):t.dataType==="number"?o=Eu(t,n,i):t.dataType==="bigint"?o=Qu(t,n,i):t.dataType==="boolean"?o=i===!0||i.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?o=i===!0||i.date?n.coerce.date():n.date():t.dataType==="string"?o=Uu(t,n,i):t.dataType==="json"?o=Mu:t.dataType==="custom"?o=n.any():t.dataType==="buffer"&&(o=Lu)),o||(o=n.any()),o}function Eu(t,e,n){let i=t.getSQLType().includes("unsigned"),o,u,c=!1;x(t,["MySqlTinyInt","SingleStoreTinyInt"])?(o=i?0:S.INT8_MIN,u=i?S.INT8_UNSIGNED_MAX:S.INT8_MAX,c=!0):x(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=i?0:S.INT16_MIN,u=i?S.INT16_UNSIGNED_MAX:S.INT16_MAX,c=!0):x(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=i?0:S.INT24_MIN,u=i?S.INT24_UNSIGNED_MAX:S.INT24_MAX,c=x(t,["MySqlMediumInt","SingleStoreMediumInt"])):x(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=i?0:S.INT32_MIN,u=i?S.INT32_UNSIGNED_MAX:S.INT32_MAX,c=!0):x(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=i?0:S.INT48_MIN,u=i?S.INT48_UNSIGNED_MAX:S.INT48_MAX):x(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||x(t,["MySqlSerial","SingleStoreSerial"]),o=i?0:Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,c=!0):x(t,["MySqlYear","SingleStoreYear"])?(o=1901,u=2155,c=!0):(o=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER);let y=n===!0||n!=null&&n.number?e.coerce.number():e.number();return y=y.min(o).max(u),c?y.int():y}function Qu(t,e,n){const i=t.getSQLType().includes("unsigned"),o=i?0n:S.INT64_MIN,u=i?S.INT64_UNSIGNED_MAX:S.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(o).max(u)}function Uu(t,e,n){if(x(t,["PgUUID"]))return e.string().uuid();let i,o,u=!1;x(t,["PgVarchar","SQLiteText"])?i=t.length:x(t,["MySqlVarChar","SingleStoreVarChar"])?i=t.length??S.INT16_UNSIGNED_MAX:x(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?i=S.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?i=S.INT24_UNSIGNED_MAX:t.textType==="text"?i=S.INT16_UNSIGNED_MAX:i=S.INT8_UNSIGNED_MAX),x(t,["PgChar","MySqlChar","SingleStoreChar"])&&(i=t.length,u=!0),x(t,["PgBinaryVector"])&&(o=/^[01]+$/,i=t.dimensions);let c=n===!0||n!=null&&n.string?e.coerce.string():e.string();return c=o?c.regex(o):c,i&&u?c.length(i):i?c.max(i):c}function ia(t){return Tr(t)?ru(t):su(t)}function ra(t,e,n,i){const o={};for(const[u,c]of Object.entries(t)){if(!v(c,O)&&!v(c,I)&&!v(c,I.Aliased)&&typeof c=="object"){const F=Tr(c)||iu(c)?ia(c):c;o[u]=ra(F,e[u]??{},n,i);continue}const y=e[u];if(y!==void 0&&typeof y!="function"){o[u]=y;continue}const h=v(c,O)?c:void 0,N=h?na(h,i):G(),l=typeof y=="function"?y(N):N;n.never(h)||(o[u]=l,h&&(n.nullable(h)&&(o[u]=o[u].nullable()),n.optional(h)&&(o[u]=o[u].optional())))}return ue(o)}const Ou={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},P=(t,e)=>{const n=ia(t);return ra(n,{},Ou)},sa=Zr({dataType(){return"geography"}});T("sessions",{sid:d("sid").primaryKey(),sess:M("sess").notNull(),expire:m("expire").notNull()});ue({emergencyAlerts:L().default(!0),generalUpdates:L().default(!0),promotions:L().default(!1),systemAlerts:L().default(!0),vetTips:L().default(!0)});const B=T("users",{id:d("id").primaryKey().default(b`gen_random_uuid()`),username:s("username"),password:s("password"),email:d("email").unique(),phone:s("phone"),passwordHash:s("password_hash"),googleId:s("google_id").unique(),openidSub:s("openid_sub").unique(),role:s("role").notNull().default("user"),name:d("name"),avatar:s("avatar"),profileImageUrl:d("profile_image_url"),language:s("language").default("en"),languagePreference:s("language_preference"),region:s("region"),regionPreference:s("region_preference"),clinicId:d("clinic_id").references(()=>me.id,{onDelete:"set null"}),notificationPreferences:M("notification_preferences").$type(),twoFactorSecret:s("two_factor_secret"),twoFactorEnabled:p("two_factor_enabled").notNull().default(!1),twoFactorBackupCodes:s("two_factor_backup_codes").array(),createdAt:m("created_at").notNull().defaultNow(),updatedAt:m("updated_at").notNull().defaultNow()},t=>[w("idx_user_email").on(t.email),w("idx_user_phone").on(t.phone)]);P(B).omit({id:!0,createdAt:!0,updatedAt:!0});const k=T("pets",{id:d("id").primaryKey().default(b`gen_random_uuid()`),userId:d("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),name:s("name").notNull(),species:s("species").notNull(),breed:s("breed"),breedId:d("breed_id").references(()=>aa.id),age:q("age"),weight:s("weight"),medicalNotes:s("medical_notes"),createdAt:m("created_at").notNull().defaultNow(),lastVisitHospitalId:d("last_visit_hospital_id").references(()=>j.id,{onDelete:"set null"}),lastVisitDate:m("last_visit_date"),type:s("type"),color:s("color"),medicalHistory:s("medical_history"),microchipId:s("microchip_id"),photoUrl:s("photo_url")});P(k).omit({id:!0,createdAt:!0});const $u=T("countries",{id:d("id").primaryKey().default(b`gen_random_uuid()`),code:s("code").notNull().unique(),nameEn:s("name_en").notNull(),nameZh:s("name_zh"),region:s("region"),active:p("active"),phonePrefix:s("phone_prefix"),flag:s("flag")}),rl=P($u).omit({id:!0}),ee=T("regions",{id:d("id").primaryKey().default(b`gen_random_uuid()`),countryCode:s("country_code").notNull(),code:s("code").notNull(),nameEn:s("name_en").notNull(),nameZh:s("name_zh"),coordinates:M("coordinates"),active:p("active").notNull().default(!0)},t=>[w("idx_region_country_code").on(t.countryCode)]),sl=P(ee).omit({id:!0}),aa=T("pet_breeds",{id:d("id").primaryKey().default(b`gen_random_uuid()`),species:s("species").notNull(),breedEn:s("breed_en").notNull(),breedZh:s("breed_zh"),countryCode:s("country_code"),isCommon:p("is_common").default(!1),active:p("active").notNull().default(!0)}),al=P(aa).omit({id:!0}),me=T("clinics",{id:d("id").primaryKey().default(b`gen_random_uuid()`),name:s("name").notNull(),nameZh:s("name_zh"),address:s("address").notNull(),addressZh:s("address_zh"),phone:s("phone").notNull(),whatsapp:s("whatsapp"),email:s("email"),lineUserId:s("line_user_id"),regionId:d("region_id").notNull().references(()=>ee.id),is24Hour:p("is_24_hour").notNull().default(!1),isAvailable:p("is_available").notNull().default(!0),isSupportHospital:p("is_support_hospital").notNull().default(!1),latitude:z("latitude"),longitude:z("longitude"),location:sa("location"),status:s("status").notNull().default("active"),services:s("services").array(),ownerVerificationCode:s("owner_verification_code"),ownerVerificationCodeExpiresAt:m("owner_verification_code_expires_at"),averageRating:z("average_rating"),reviewCount:q("review_count").notNull().default(0),createdAt:m("created_at").notNull().defaultNow()}),ol=P(me).omit({id:!0,location:!0,createdAt:!0}),oa=T("emergency_requests",{id:d("id").primaryKey().default(b`gen_random_uuid()`),userId:d("user_id").references(()=>B.id,{onDelete:"set null"}),petId:d("pet_id").references(()=>k.id,{onDelete:"set null"}),symptom:s("symptom"),locationLatitude:z("location_latitude"),locationLongitude:z("location_longitude"),manualLocation:s("manual_location"),contactName:s("contact_name").notNull(),contactPhone:s("contact_phone").notNull(),status:s("status").notNull().default("pending"),regionId:d("region_id").references(()=>ee.id),createdAt:m("created_at").notNull().defaultNow(),petSpecies:s("pet_species"),petBreed:s("pet_breed"),petAge:s("pet_age"),voiceTranscript:s("voice_transcript"),aiAnalyzedSymptoms:s("ai_analyzed_symptoms"),isVoiceRecording:p("is_voice_recording")});P(oa).omit({id:!0,createdAt:!0});const j=T("hospitals",{id:d("id").primaryKey().default(b`gen_random_uuid()`),slug:s("slug").notNull().unique(),nameEn:s("name_en").notNull(),nameZh:s("name_zh").notNull(),addressEn:s("address_en").notNull(),addressZh:s("address_zh").notNull(),regionId:d("region_id").notNull().references(()=>ee.id),latitude:z("latitude"),longitude:z("longitude"),location:sa("location"),phone:s("phone"),whatsapp:s("whatsapp"),email:s("email"),websiteUrl:s("website_url"),open247:p("open_247").notNull().default(!0),isAvailable:p("is_available").notNull().default(!0),isPartner:p("is_partner").notNull().default(!1),liveStatus:s("live_status"),photos:M("photos"),lastVerifiedAt:m("last_verified_at"),verifiedById:d("verified_by_id").references(()=>B.id,{onDelete:"set null"}),onSiteVet247:p("on_site_vet_247"),triagePolicy:s("triage_policy"),typicalWaitBand:s("typical_wait_band"),isolationWard:p("isolation_ward"),ambulanceSupport:p("ambulance_support"),icuLevel:s("icu_level"),nurse24h:p("nurse_24h"),ownerVisitPolicy:s("owner_visit_policy"),eolSupport:p("eol_support"),imagingXray:p("imaging_xray"),imagingUS:p("imaging_us"),imagingCT:p("imaging_ct"),sameDayCT:p("same_day_ct"),inHouseLab:p("in_house_lab"),extLabCutoff:s("ext_lab_cutoff"),bloodBankAccess:s("blood_bank_access"),sxEmergencySoft:p("sx_emergency_soft"),sxEmergencyOrtho:p("sx_emergency_ortho"),anaesMonitoring:s("anaes_monitoring"),specialistAvail:s("specialist_avail"),oxygenTherapy:p("oxygen_therapy"),ventilator:p("ventilator"),bloodTransfusion:p("blood_transfusion"),imagingMRI:p("imaging_mri"),endoscopy:p("endoscopy"),dialysis:p("dialysis"),defibrillator:p("defibrillator"),speciesAccepted:s("species_accepted").array(),whatsappTriage:p("whatsapp_triage"),languages:s("languages").array(),parking:p("parking"),wheelchairAccess:p("wheelchair_access"),payMethods:s("pay_methods").array(),admissionDeposit:p("admission_deposit"),depositBand:s("deposit_band"),insuranceSupport:s("insurance_support").array(),recheckWindow:s("recheck_window"),refundPolicy:s("refund_policy"),ownerVerificationCode:s("owner_verification_code"),ownerVerificationCodeExpiresAt:m("owner_verification_code_expires_at"),verified:p("verified").notNull().default(!1),createdAt:m("created_at").notNull().defaultNow(),updatedAt:m("updated_at").notNull().defaultNow()},t=>[w("idx_hospital_location").using("gist",t.location),w("idx_hospital_region").on(t.regionId)]),ul=P(j).omit({id:!0,location:!0,createdAt:!0,updatedAt:!0}),ju=T("messages",{id:d("id").primaryKey().default(b`gen_random_uuid()`),emergencyRequestId:d("emergency_request_id").notNull().references(()=>oa.id,{onDelete:"cascade"}),hospitalId:d("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),messageType:s("message_type").notNull(),recipient:s("recipient").notNull(),content:s("content").notNull(),status:s("status").notNull().default("queued"),whatsappMessageId:s("whatsapp_message_id"),sentAt:m("sent_at"),deliveredAt:m("delivered_at"),readAt:m("read_at"),failedAt:m("failed_at"),errorMessage:s("error_message"),retryCount:q("retry_count").notNull().default(0),createdAt:m("created_at").notNull().defaultNow()});P(ju).omit({id:!0,createdAt:!0});const Zu=T("feature_flags",{id:d("id").primaryKey().default(b`gen_random_uuid()`),key:s("key").notNull().unique(),enabled:p("enabled").notNull().default(!1),value:M("value"),description:s("description"),updatedAt:m("updated_at").notNull().defaultNow()});P(Zu).omit({id:!0,updatedAt:!0});const Ku=T("audit_logs",{id:d("id").primaryKey().default(b`gen_random_uuid()`),entityType:s("entity_type").notNull(),entityId:s("entity_id").notNull(),action:s("action").notNull(),userId:d("user_id").references(()=>B.id,{onDelete:"set null"}),changes:M("changes"),ipAddress:s("ip_address"),userAgent:s("user_agent"),createdAt:m("created_at").notNull().defaultNow()});P(Ku).omit({id:!0,createdAt:!0});const Ru=T("privacy_consents",{id:d("id").primaryKey().default(b`gen_random_uuid()`),userId:d("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),consentType:s("consent_type").notNull(),accepted:p("accepted").notNull(),consentedAt:m("consented_at").notNull().defaultNow()});P(Ru).omit({id:!0,consentedAt:!0});const Xu=T("translations",{id:d("id").primaryKey().default(b`gen_random_uuid()`),key:s("key").notNull(),language:s("language").notNull(),value:s("value").notNull(),namespace:s("namespace").notNull().default("common"),updatedAt:m("updated_at").notNull().defaultNow()});P(Xu).omit({id:!0,updatedAt:!0});const Gu=T("hospital_consult_fees",{id:d("id").primaryKey().default(b`gen_random_uuid()`),hospitalId:d("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),feeType:s("fee_type").notNull(),species:s("species").notNull(),minFee:z("min_fee"),maxFee:z("max_fee"),currency:s("currency").notNull().default("HKD"),notes:s("notes"),lastUpdated:m("last_updated").notNull().defaultNow()},t=>[w("idx_consult_fees_hospital").on(t.hospitalId),Fu("idx_consult_fees_unique").on(t.hospitalId,t.feeType,t.species)]);P(Gu).omit({id:!0});const Ju=T("hospital_updates",{id:d("id").primaryKey().default(b`gen_random_uuid()`),hospitalId:d("hospital_id").notNull().references(()=>j.id,{onDelete:"cascade"}),submittedById:d("submitted_by_id").references(()=>B.id,{onDelete:"set null"}),updateType:s("update_type").notNull(),fieldName:s("field_name"),oldValue:s("old_value"),newValue:s("new_value"),status:s("status").notNull().default("pending"),reviewedById:d("reviewed_by_id").references(()=>B.id,{onDelete:"set null"}),reviewedAt:m("reviewed_at"),notes:s("notes"),createdAt:m("created_at").notNull().defaultNow()},t=>[w("idx_hospital_updates_hospital").on(t.hospitalId)]);P(Ju).omit({id:!0,createdAt:!0});const Hu=T("pet_medical_records",{id:d("id").primaryKey().default(b`gen_random_uuid()`),petId:d("pet_id").notNull().references(()=>k.id,{onDelete:"cascade"}),userId:d("user_id").notNull().references(()=>B.id),documentType:s("document_type").notNull(),title:s("title").notNull(),description:s("description"),filePath:s("file_path").notNull(),fileSize:q("file_size").notNull(),mimeType:s("mime_type").notNull(),isConfidential:p("is_confidential").notNull().default(!1),uploadedAt:m("uploaded_at").notNull().defaultNow(),expiresAt:m("expires_at")},t=>[w("idx_pet_medical_records_pet").on(t.petId),w("idx_pet_medical_records_user").on(t.userId)]);P(Hu).omit({id:!0,uploadedAt:!0});const Wu=T("pet_medical_sharing_consents",{id:d("id").primaryKey().default(b`gen_random_uuid()`),petId:d("pet_id").notNull().references(()=>k.id,{onDelete:"cascade"}),userId:d("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),consentType:s("consent_type").notNull(),enabled:p("enabled").notNull().default(!1),updatedAt:m("updated_at").notNull().defaultNow()},t=>[w("idx_pet_medical_sharing_consent_pet").on(t.petId),w("idx_pet_medical_sharing_consent_user").on(t.userId)]);P(Wu).omit({id:!0,updatedAt:!0});const Yu=T("push_subscriptions",{id:d("id").primaryKey().default(b`gen_random_uuid()`),userId:d("user_id").references(()=>B.id,{onDelete:"cascade"}),token:s("token").notNull().unique(),provider:s("provider").notNull().default("fcm"),platform:s("platform").notNull(),browserInfo:s("browser_info"),language:s("language").default("en"),isActive:p("is_active").notNull().default(!0),createdAt:m("created_at").notNull().defaultNow(),lastActiveAt:m("last_active_at").notNull().defaultNow()},t=>[w("idx_push_subscriptions_user").on(t.userId),w("idx_push_subscriptions_token").on(t.token)]);P(Yu).omit({id:!0,createdAt:!0,lastActiveAt:!0});const ku=T("notification_broadcasts",{id:d("id").primaryKey().default(b`gen_random_uuid()`),adminId:d("admin_id").notNull().references(()=>B.id),title:s("title").notNull(),message:s("message").notNull(),targetLanguage:s("target_language"),targetAudience:s("target_audience").notNull().default("all"),targetRole:s("target_role"),url:s("url"),recipientCount:q("recipient_count"),status:s("status").notNull().default("pending"),scheduledFor:m("scheduled_for"),providerResponse:M("provider_response"),createdAt:m("created_at").notNull().defaultNow(),sentAt:m("sent_at")},t=>[w("idx_notification_broadcasts_admin").on(t.adminId),w("idx_notification_broadcasts_status").on(t.status),w("idx_notification_broadcasts_scheduled").on(t.scheduledFor)]);P(ku).omit({id:!0,createdAt:!0,sentAt:!0,recipientCount:!0,providerResponse:!0});const el=T("clinic_reviews",{id:d("id").primaryKey().default(b`gen_random_uuid()`),clinicId:d("clinic_id").notNull().references(()=>me.id,{onDelete:"cascade"}),userId:d("user_id").notNull().references(()=>B.id,{onDelete:"cascade"}),rating:q("rating").notNull(),reviewText:s("review_text"),status:s("status").notNull().default("pending"),createdAt:m("created_at").notNull().defaultNow(),updatedAt:m("updated_at").notNull().defaultNow()},t=>[w("idx_clinic_reviews_clinic").on(t.clinicId),w("idx_clinic_reviews_user").on(t.userId),w("idx_clinic_reviews_status").on(t.status)]);P(el).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({rating:oe().min(1).max(5)});const ua=T("whatsapp_conversations",{id:d("id").primaryKey().default(b`gen_random_uuid()`),hospitalId:d("hospital_id").references(()=>j.id,{onDelete:"set null"}),phoneNumber:s("phone_number").notNull(),displayName:s("display_name"),lastMessageAt:m("last_message_at").notNull().defaultNow(),lastMessagePreview:s("last_message_preview"),unreadCount:q("unread_count").notNull().default(0),isArchived:p("is_archived").notNull().default(!1),createdAt:m("created_at").notNull().defaultNow(),updatedAt:m("updated_at").notNull().defaultNow()},t=>[w("idx_whatsapp_conversations_phone").on(t.phoneNumber),w("idx_whatsapp_conversations_hospital").on(t.hospitalId),w("idx_whatsapp_conversations_last_message").on(t.lastMessageAt)]);P(ua).omit({id:!0,createdAt:!0,updatedAt:!0});const tl=T("whatsapp_chat_messages",{id:d("id").primaryKey().default(b`gen_random_uuid()`),conversationId:d("conversation_id").notNull().references(()=>ua.id,{onDelete:"cascade"}),direction:s("direction").notNull(),content:s("content").notNull(),messageType:s("message_type").notNull().default("text"),mediaUrl:s("media_url"),whatsappMessageId:s("whatsapp_message_id"),status:s("status").notNull().default("sent"),sentAt:m("sent_at"),deliveredAt:m("delivered_at"),readAt:m("read_at"),errorMessage:s("error_message"),createdAt:m("created_at").notNull().defaultNow()},t=>[w("idx_whatsapp_chat_messages_conversation").on(t.conversationId),w("idx_whatsapp_chat_messages_created").on(t.createdAt),w("idx_whatsapp_chat_messages_whatsapp_id").on(t.whatsappMessageId)]);P(tl).omit({id:!0,createdAt:!0});export{rl as a,sl as b,al as c,ol as d,ul as i};
