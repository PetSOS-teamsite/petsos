Add a Hospital Directory module inside the existing PetSOS app, allowing pet owners to discover and evaluate 24-hour animal hospitals quickly and reliably.

This feature should:

Extend the Home Page with a new button â†’ Hospital List

Include a Hospital List Page with filters

Include an Individual Clinic Page with full details, photos, and member-gated reviews

Support bilingual display (English + ç¹é«”ä¸­æ–‡)

Include analytics tracking and a â€œreport incorrect infoâ€ function

Allow only logged-in PetSOS members or admins to leave reviews

Remain scalable for future partner clinic integrations

(Clinic data updates handled separately via Google Form submission â€” not part of this prompt.)

1) ğŸ§± Tech Stack

Follow the current PetSOS architecture:

Frontend: React + TypeScript + TailwindCSS

Routing: React Router (extend existing routes)

Backend: Node.js (Express) or Next.js API routes

Database: use existing DB (PostgreSQL / Mongo) â€” add new collections/tables for clinics & reviews

Auth: reuse PetSOS auth (JWT/session)

i18n: extend current setup (i18next or equivalent)

Analytics: use current provider (GA4 / PostHog)

Map: Google Maps deep link (https://www.google.com/maps?q=lat,lng)

2) ğŸ  Pages & Flow
ğŸ”¹ Home Page

Add a primary button:

Hospital List / 24å°æ™‚å‹•ç‰©é†«é™¢åˆ—è¡¨

â†’ routes to /hospitals.

ğŸ”¹ Hospital List Page (/hospitals)

Core features

Filter bar (sticky on mobile):

Distance: Nearby (â‰¤3 km) | â‰¤5 km | â‰¤10 km | All

Services: Multi-select checklist (see ServiceKey list below)

Support Hospital: toggle filter

Sorting: Default by distance (if location granted), else alphabetically

Fallback: If geolocation denied â†’ show â€œDistrictâ€ dropdown

Cards (per clinic):

Thumbnail (first photo)

Name (localized)

Support badge

Icons for top 4 services

Distance indicator

Call / WhatsApp buttons

CTA analytics events:
view_hospital_list, apply_hospital_filters, click_call, click_whatsapp, click_directions

ğŸ”¹ Clinic Detail Page (/hospitals/:id)

Sections:
1ï¸âƒ£ Photo Carousel (max 5)
2ï¸âƒ£ Key Info:

Phone (tel:), WhatsApp (wa.me), address, â€œGet Directionsâ€ button

Support Hospital badge

â€œLast updatedâ€ date
3ï¸âƒ£ Services Checklist (icons grouped by Imaging, Critical Care, Specialty, Other)
4ï¸âƒ£ Reviews (member-gated)
5ï¸âƒ£ Optional Vet Team intro
6ï¸âƒ£ Clinic Website link
7ï¸âƒ£ Report Incorrect Info button â†’ modal â†’ POST /api/clinics/:id/report

3) ğŸ“‹ Data Model
export type ServiceKey =
  | "ctScan" | "mri" | "xray" | "ultrasound" | "oxygenCage" | "icu"
  | "bloodBank" | "onSiteLab" | "endoscopy" | "surgery"
  | "exoticCare" | "cardiology" | "dentistry" | "dermatology" | "ophthalmology"
  | "internalMedicine" | "oncology" | "physiotherapy" | "ambulance"
  | "isolationWard" | "24hrVetOnsite" | "nightNurseOnly" | "specialistService";

export interface Clinic {
  id: string;
  name: { en: string; zhHant: string };
  address: { en: string; zhHant: string };
  location: { lat: number; lng: number; district?: string };
  phone: string;
  whatsapp?: string;
  website?: string;
  supportHospital: boolean;
  photos: string[]; // max 5
  services: Partial<Record<ServiceKey, boolean>>;
  extraServices?: string[];
  team?: Array<{ name: string; title?: string; bio?: { en: string; zhHant: string }; photo?: string }>;
  lastUpdatedISO: string;
}

Reviews (auth-gated)
export interface ClinicReview {
  id: string;
  clinicId: string;
  userId: string;
  rating: 1|2|3|4|5;
  comment: string;
  lang: "en"|"zh-Hant";
  createdAt: string;
  verified: boolean;
  hidden: boolean;
}

Reports
export interface ClinicReport {
  clinicId: string;
  name: string;
  email?: string;
  message: string;
  createdAt: string;
}

4) ğŸ” Auth-Gated Review Rules

View: Everyone (read-only).

Post: Only PetSOS logged-in users (role=user) or admins.

Admin Tools:

Hide/unhide reviews

Mark as verified (e.g., linked to completed emergency case)

Duplicate prevention: one review per user per clinic.

Auto-verification: if user has a completed emergency case at that clinic, mark verified=true automatically.

Frontend behavior:

If not logged in â†’ show â€œLogin to reviewâ€ button (trigger existing login flow).

If logged in â†’ show rating + comment form.

Show verified badge on verified reviews.

Admins see moderation toggles.

5) ğŸ§© Backend Endpoints
GET /api/clinics
  ?services=xray,ctScan&support=true&lat=..&lng=..&radiusKm=5&district=Eastern

GET /api/clinics/:id
  â†’ full Clinic + reviews (hidden=false)

POST /api/clinics/:id/reviews      (auth required)
  { rating, comment, lang }
  â†’ adds one review per user; profanity filtered; 500 char limit.

PATCH /api/clinics/:id/reviews/:reviewId/hide   (admin)
PATCH /api/clinics/:id/reviews/:reviewId/verify (admin)

POST /api/clinics/:id/report
  { name, email?, message } â†’ logs incorrect info report

6) ğŸŒ i18n

Use hospital namespace. Example:

// en/hospital.json
{
  "ctaList": "Hospital List",
  "filters": { "distance": "Distance", "services": "Services", "support": "Support Hospital", "all": "All" },
  "detail": { "lastUpdated": "Last updated", "getDirections": "Get Directions", "team": "Vet Team", "website": "Website" },
  "reviews": { "title": "Reviews", "loginToReview": "Log in to write a review", "verified": "Verified", "alreadyReviewed": "Youâ€™ve already reviewed this hospital." },
  "actions": { "report": "Report incorrect info", "submit": "Submit" }
}

// zh-Hant/hospital.json
{
  "ctaList": "24å°æ™‚å‹•ç‰©é†«é™¢åˆ—è¡¨",
  "filters": { "distance": "è·é›¢", "services": "æœå‹™", "support": "æ”¯æ´é†«é™¢", "all": "å…¨éƒ¨" },
  "detail": { "lastUpdated": "æœ€å¾Œæ›´æ–°", "getDirections": "å°èˆª", "team": "é†«ç™‚åœ˜éšŠ", "website": "ç¶²ç«™" },
  "reviews": { "title": "è©•åƒ¹", "loginToReview": "ç™»å…¥å¾Œå¯æ’°å¯«è©•åƒ¹", "verified": "å·²é©—è­‰", "alreadyReviewed": "ä½ å·²ç‚ºæ­¤é†«é™¢æ’°å¯«éè©•åƒ¹" },
  "actions": { "report": "å›å ±è³‡æ–™éŒ¯èª¤", "submit": "æäº¤" }
}

7) ğŸ“Š Analytics Events

Integrate with existing provider.

Event	Description
view_home	home page load
click_hospital_list_cta	click Hospital List button
view_hospital_list	list view opened
apply_hospital_filters	filter changed (distance/services/support)
view_hospital_detail	detail page open
click_hospital_call	click call button
click_hospital_whatsapp	click WhatsApp button
click_hospital_directions	click Get Directions
submit_hospital_review	review submitted
click_login_to_review	login button clicked
admin_hide_review / admin_verify_review	moderation
report_hospital_incorrect_info	incorrect info reported
switch_language	language changed
8) ğŸ§­ Distance & Filter Logic

Use browser Geolocation API; compute Haversine distance client-side.

If denied â†’ fallback to district filter.

When Distance filter active â†’ pass lat/lng/radiusKm to /api/clinics.

9) âš™ï¸ UI Components

PhotoCarousel

ClinicCard

ServiceIcon (with grouped icons)

FilterBar (distance, services, support)

ReviewSection (read-only + form gated by login)

ReportModal

LanguageSwitcher

SupportBadge

All elements responsive and bilingual.

10) ğŸ§‘â€ğŸ’» Database Setup (Minimal)

Tables / collections:

clinics

clinic_reviews

clinic_reports

Indexes:

clinics.location (geo)

clinic_reviews.clinicId

Unique composite (clinicId, userId) for review uniqueness

11) ğŸ“ˆ Acceptance Criteria

âœ… Home shows Hospital List CTA
âœ… List filters by Distance, Services, Support Hospital
âœ… Clinic detail includes all 6 sections
âœ… Reviews gated by login; only members/admins can post
âœ… Admin can hide/unhide & verify reviews
âœ… Multilingual support for EN / ç¹
âœ… Analytics fires per spec
âœ… â€œReport incorrect infoâ€ works
âœ… Lighthouse mobile score â‰¥ 85

12) ğŸ”’ Security & Quality

Profanity filter for comments

Sanitize inputs (XSS safe)

Limit one review/user/clinic

Rate limit 5/min per IP

Escape HTML in comments

Hide unverified or hidden reviews from public

Log admin actions